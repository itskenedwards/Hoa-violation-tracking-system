(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Qh(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){return this instanceof s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var n=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,n.get?n:{enumerable:!0,get:function(){return e[s]}})}),r}var cu={exports:{}},wi={},uu={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rn=Symbol.for("react.element"),Yh=Symbol.for("react.portal"),Xh=Symbol.for("react.fragment"),Zh=Symbol.for("react.strict_mode"),ef=Symbol.for("react.profiler"),tf=Symbol.for("react.provider"),rf=Symbol.for("react.context"),sf=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),of=Symbol.for("react.memo"),af=Symbol.for("react.lazy"),Rl=Symbol.iterator;function lf(e){return e===null||typeof e!="object"?null:(e=Rl&&e[Rl]||e["@@iterator"],typeof e=="function"?e:null)}var du={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},hu=Object.assign,fu={};function ss(e,t,r){this.props=e,this.context=t,this.refs=fu,this.updater=r||du}ss.prototype.isReactComponent={};ss.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ss.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mu(){}mu.prototype=ss.prototype;function Ia(e,t,r){this.props=e,this.context=t,this.refs=fu,this.updater=r||du}var Ra=Ia.prototype=new mu;Ra.constructor=Ia;hu(Ra,ss.prototype);Ra.isPureReactComponent=!0;var Ol=Array.isArray,pu=Object.prototype.hasOwnProperty,Oa={current:null},gu={key:!0,ref:!0,__self:!0,__source:!0};function yu(e,t,r){var s,n={},i=null,a=null;if(t!=null)for(s in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)pu.call(t,s)&&!gu.hasOwnProperty(s)&&(n[s]=t[s]);var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];n.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)n[s]===void 0&&(n[s]=l[s]);return{$$typeof:rn,type:e,key:i,ref:a,props:n,_owner:Oa.current}}function cf(e,t){return{$$typeof:rn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $a(e){return typeof e=="object"&&e!==null&&e.$$typeof===rn}function uf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var $l=/\/+/g;function Hi(e,t){return typeof e=="object"&&e!==null&&e.key!=null?uf(""+e.key):t.toString(36)}function Rn(e,t,r,s,n){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case rn:case Yh:a=!0}}if(a)return a=e,n=n(a),e=s===""?"."+Hi(a,0):s,Ol(n)?(r="",e!=null&&(r=e.replace($l,"$&/")+"/"),Rn(n,t,r,"",function(u){return u})):n!=null&&($a(n)&&(n=cf(n,r+(!n.key||a&&a.key===n.key?"":(""+n.key).replace($l,"$&/")+"/")+e)),t.push(n)),1;if(a=0,s=s===""?".":s+":",Ol(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+Hi(i,l);a+=Rn(i,t,r,c,n)}else if(c=lf(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+Hi(i,l++),a+=Rn(i,t,r,c,n);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function dn(e,t,r){if(e==null)return e;var s=[],n=0;return Rn(e,s,"","",function(i){return t.call(r,i,n++)}),s}function df(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pe={current:null},On={transition:null},hf={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:On,ReactCurrentOwner:Oa};function xu(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:dn,forEach:function(e,t,r){dn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return dn(e,function(){t++}),t},toArray:function(e){return dn(e,function(t){return t})||[]},only:function(e){if(!$a(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};q.Component=ss;q.Fragment=Xh;q.Profiler=ef;q.PureComponent=Ia;q.StrictMode=Zh;q.Suspense=nf;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hf;q.act=xu;q.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=hu({},e.props),n=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Oa.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)pu.call(t,c)&&!gu.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:rn,type:e.type,key:n,ref:i,props:s,_owner:a}};q.createContext=function(e){return e={$$typeof:rf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:tf,_context:e},e.Consumer=e};q.createElement=yu;q.createFactory=function(e){var t=yu.bind(null,e);return t.type=e,t};q.createRef=function(){return{current:null}};q.forwardRef=function(e){return{$$typeof:sf,render:e}};q.isValidElement=$a;q.lazy=function(e){return{$$typeof:af,_payload:{_status:-1,_result:e},_init:df}};q.memo=function(e,t){return{$$typeof:of,type:e,compare:t===void 0?null:t}};q.startTransition=function(e){var t=On.transition;On.transition={};try{e()}finally{On.transition=t}};q.unstable_act=xu;q.useCallback=function(e,t){return Pe.current.useCallback(e,t)};q.useContext=function(e){return Pe.current.useContext(e)};q.useDebugValue=function(){};q.useDeferredValue=function(e){return Pe.current.useDeferredValue(e)};q.useEffect=function(e,t){return Pe.current.useEffect(e,t)};q.useId=function(){return Pe.current.useId()};q.useImperativeHandle=function(e,t,r){return Pe.current.useImperativeHandle(e,t,r)};q.useInsertionEffect=function(e,t){return Pe.current.useInsertionEffect(e,t)};q.useLayoutEffect=function(e,t){return Pe.current.useLayoutEffect(e,t)};q.useMemo=function(e,t){return Pe.current.useMemo(e,t)};q.useReducer=function(e,t,r){return Pe.current.useReducer(e,t,r)};q.useRef=function(e){return Pe.current.useRef(e)};q.useState=function(e){return Pe.current.useState(e)};q.useSyncExternalStore=function(e,t,r){return Pe.current.useSyncExternalStore(e,t,r)};q.useTransition=function(){return Pe.current.useTransition()};q.version="18.3.1";uu.exports=q;var E=uu.exports;const ko=Kh(E);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff=E,mf=Symbol.for("react.element"),pf=Symbol.for("react.fragment"),gf=Object.prototype.hasOwnProperty,yf=ff.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xf={key:!0,ref:!0,__self:!0,__source:!0};function vu(e,t,r){var s,n={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(s in t)gf.call(t,s)&&!xf.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)n[s]===void 0&&(n[s]=t[s]);return{$$typeof:mf,type:e,key:i,ref:a,props:n,_owner:yf.current}}wi.Fragment=pf;wi.jsx=vu;wi.jsxs=vu;cu.exports=wi;var o=cu.exports,No={},wu={exports:{}},Ve={},bu={exports:{}},_u={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,U){var M=A.length;A.push(U);e:for(;0<M;){var J=M-1>>>1,Q=A[J];if(0<n(Q,U))A[J]=U,A[M]=Q,M=J;else break e}}function r(A){return A.length===0?null:A[0]}function s(A){if(A.length===0)return null;var U=A[0],M=A.pop();if(M!==U){A[0]=M;e:for(var J=0,Q=A.length,Y=Q>>>1;J<Y;){var Se=2*(J+1)-1,Xe=A[Se],H=Se+1,we=A[H];if(0>n(Xe,M))H<Q&&0>n(we,Xe)?(A[J]=we,A[H]=M,J=H):(A[J]=Xe,A[Se]=M,J=Se);else if(H<Q&&0>n(we,M))A[J]=we,A[H]=M,J=H;else break e}}return U}function n(A,U){var M=A.sortIndex-U.sortIndex;return M!==0?M:A.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,x=!1,y=!1,_=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(A){for(var U=r(u);U!==null;){if(U.callback===null)s(u);else if(U.startTime<=A)s(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=r(u)}}function j(A){if(_=!1,g(A),!y)if(r(c)!==null)y=!0,D(w);else{var U=r(u);U!==null&&ce(j,U.startTime-A)}}function w(A,U){y=!1,_&&(_=!1,m(k),k=-1),x=!0;var M=f;try{for(g(U),h=r(c);h!==null&&(!(h.expirationTime>U)||A&&!I());){var J=h.callback;if(typeof J=="function"){h.callback=null,f=h.priorityLevel;var Q=J(h.expirationTime<=U);U=e.unstable_now(),typeof Q=="function"?h.callback=Q:h===r(c)&&s(c),g(U)}else s(c);h=r(c)}if(h!==null)var Y=!0;else{var Se=r(u);Se!==null&&ce(j,Se.startTime-U),Y=!1}return Y}finally{h=null,f=M,x=!1}}var N=!1,b=null,k=-1,v=5,C=-1;function I(){return!(e.unstable_now()-C<v)}function z(){if(b!==null){var A=e.unstable_now();C=A;var U=!0;try{U=b(!0,A)}finally{U?L():(N=!1,b=null)}}else N=!1}var L;if(typeof p=="function")L=function(){p(z)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,R=T.port2;T.port1.onmessage=z,L=function(){R.postMessage(null)}}else L=function(){S(z,0)};function D(A){b=A,N||(N=!0,L())}function ce(A,U){k=S(function(){A(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,D(w))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var M=f;f=U;try{return A()}finally{f=M}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,U){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var M=f;f=A;try{return U()}finally{f=M}},e.unstable_scheduleCallback=function(A,U,M){var J=e.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?J+M:J):M=J,A){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=M+Q,A={id:d++,callback:U,priorityLevel:A,startTime:M,expirationTime:Q,sortIndex:-1},M>J?(A.sortIndex=M,t(u,A),r(c)===null&&A===r(u)&&(_?(m(k),k=-1):_=!0,ce(j,M-J))):(A.sortIndex=Q,t(c,A),y||x||(y=!0,D(w))),A},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(A){var U=f;return function(){var M=f;f=U;try{return A.apply(this,arguments)}finally{f=M}}}})(_u);bu.exports=_u;var vf=bu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wf=E,Be=vf;function P(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ju=new Set,Os={};function xr(e,t){Gr(e,t),Gr(e+"Capture",t)}function Gr(e,t){for(Os[e]=t,e=0;e<t.length;e++)ju.add(t[e])}var _t=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),So=Object.prototype.hasOwnProperty,bf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ll={},Ul={};function _f(e){return So.call(Ul,e)?!0:So.call(Ll,e)?!1:bf.test(e)?Ul[e]=!0:(Ll[e]=!0,!1)}function jf(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function kf(e,t,r,s){if(t===null||typeof t>"u"||jf(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ae(e,t,r,s,n,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ve[e]=new Ae(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ve[t]=new Ae(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ve[e]=new Ae(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ve[e]=new Ae(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ve[e]=new Ae(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ve[e]=new Ae(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ve[e]=new Ae(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ve[e]=new Ae(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ve[e]=new Ae(e,5,!1,e.toLowerCase(),null,!1,!1)});var La=/[\-:]([a-z])/g;function Ua(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(La,Ua);ve[t]=new Ae(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(La,Ua);ve[t]=new Ae(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(La,Ua);ve[t]=new Ae(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ve[e]=new Ae(e,1,!1,e.toLowerCase(),null,!1,!1)});ve.xlinkHref=new Ae("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ve[e]=new Ae(e,1,!1,e.toLowerCase(),null,!0,!0)});function za(e,t,r,s){var n=ve.hasOwnProperty(t)?ve[t]:null;(n!==null?n.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kf(t,r,n,s)&&(r=null),s||n===null?_f(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,s=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var St=wf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hn=Symbol.for("react.element"),Tr=Symbol.for("react.portal"),Pr=Symbol.for("react.fragment"),Da=Symbol.for("react.strict_mode"),Co=Symbol.for("react.profiler"),ku=Symbol.for("react.provider"),Nu=Symbol.for("react.context"),Ma=Symbol.for("react.forward_ref"),Eo=Symbol.for("react.suspense"),To=Symbol.for("react.suspense_list"),Fa=Symbol.for("react.memo"),Tt=Symbol.for("react.lazy"),Su=Symbol.for("react.offscreen"),zl=Symbol.iterator;function ls(e){return e===null||typeof e!="object"?null:(e=zl&&e[zl]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Object.assign,Wi;function ys(e){if(Wi===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Wi=t&&t[1]||""}return`
`+Wi+e}var Ji=!1;function Gi(e,t){if(!e||Ji)return"";Ji=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){s=u}e.call(t.prototype)}else{try{throw Error()}catch(u){s=u}e()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),i=s.stack.split(`
`),a=n.length-1,l=i.length-1;1<=a&&0<=l&&n[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(n[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||n[a]!==i[l]){var c=`
`+n[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Ji=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ys(e):""}function Nf(e){switch(e.tag){case 5:return ys(e.type);case 16:return ys("Lazy");case 13:return ys("Suspense");case 19:return ys("SuspenseList");case 0:case 2:case 15:return e=Gi(e.type,!1),e;case 11:return e=Gi(e.type.render,!1),e;case 1:return e=Gi(e.type,!0),e;default:return""}}function Po(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pr:return"Fragment";case Tr:return"Portal";case Co:return"Profiler";case Da:return"StrictMode";case Eo:return"Suspense";case To:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Nu:return(e.displayName||"Context")+".Consumer";case ku:return(e._context.displayName||"Context")+".Provider";case Ma:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fa:return t=e.displayName||null,t!==null?t:Po(e.type)||"Memo";case Tt:t=e._payload,e=e._init;try{return Po(e(t))}catch{}}return null}function Sf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Po(t);case 8:return t===Da?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ht(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Cu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Cf(e){var t=Cu(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(a){s=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(a){s=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fn(e){e._valueTracker||(e._valueTracker=Cf(e))}function Eu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Cu(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Jn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ao(e,t){var r=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Dl(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=Ht(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tu(e,t){t=t.checked,t!=null&&za(e,"checked",t,!1)}function Io(e,t){Tu(e,t);var r=Ht(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ro(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ro(e,t.type,Ht(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ml(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ro(e,t,r){(t!=="number"||Jn(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var xs=Array.isArray;function Fr(e,t,r,s){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&s&&(e[r].defaultSelected=!0)}else{for(r=""+Ht(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,s&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Oo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(P(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Fl(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(P(92));if(xs(r)){if(1<r.length)throw Error(P(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ht(r)}}function Pu(e,t){var r=Ht(t.value),s=Ht(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Bl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Au(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $o(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Au(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var mn,Iu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(mn=mn||document.createElement("div"),mn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=mn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $s(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var _s={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ef=["Webkit","ms","Moz","O"];Object.keys(_s).forEach(function(e){Ef.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_s[t]=_s[e]})});function Ru(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||_s.hasOwnProperty(e)&&_s[e]?(""+t).trim():t+"px"}function Ou(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,n=Ru(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,n):e[r]=n}}var Tf=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lo(e,t){if(t){if(Tf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(P(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(P(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(P(61))}if(t.style!=null&&typeof t.style!="object")throw Error(P(62))}}function Uo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zo=null;function Ba(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Do=null,Br=null,Vr=null;function Vl(e){if(e=on(e)){if(typeof Do!="function")throw Error(P(280));var t=e.stateNode;t&&(t=Ni(t),Do(e.stateNode,e.type,t))}}function $u(e){Br?Vr?Vr.push(e):Vr=[e]:Br=e}function Lu(){if(Br){var e=Br,t=Vr;if(Vr=Br=null,Vl(e),t)for(e=0;e<t.length;e++)Vl(t[e])}}function Uu(e,t){return e(t)}function zu(){}var Ki=!1;function Du(e,t,r){if(Ki)return e(t,r);Ki=!0;try{return Uu(e,t,r)}finally{Ki=!1,(Br!==null||Vr!==null)&&(zu(),Lu())}}function Ls(e,t){var r=e.stateNode;if(r===null)return null;var s=Ni(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(P(231,t,typeof r));return r}var Mo=!1;if(_t)try{var cs={};Object.defineProperty(cs,"passive",{get:function(){Mo=!0}}),window.addEventListener("test",cs,cs),window.removeEventListener("test",cs,cs)}catch{Mo=!1}function Pf(e,t,r,s,n,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var js=!1,Gn=null,Kn=!1,Fo=null,Af={onError:function(e){js=!0,Gn=e}};function If(e,t,r,s,n,i,a,l,c){js=!1,Gn=null,Pf.apply(Af,arguments)}function Rf(e,t,r,s,n,i,a,l,c){if(If.apply(this,arguments),js){if(js){var u=Gn;js=!1,Gn=null}else throw Error(P(198));Kn||(Kn=!0,Fo=u)}}function vr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Mu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ql(e){if(vr(e)!==e)throw Error(P(188))}function Of(e){var t=e.alternate;if(!t){if(t=vr(e),t===null)throw Error(P(188));return t!==e?null:e}for(var r=e,s=t;;){var n=r.return;if(n===null)break;var i=n.alternate;if(i===null){if(s=n.return,s!==null){r=s;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===r)return ql(n),e;if(i===s)return ql(n),t;i=i.sibling}throw Error(P(188))}if(r.return!==s.return)r=n,s=i;else{for(var a=!1,l=n.child;l;){if(l===r){a=!0,r=n,s=i;break}if(l===s){a=!0,s=n,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,s=n;break}if(l===s){a=!0,s=i,r=n;break}l=l.sibling}if(!a)throw Error(P(189))}}if(r.alternate!==s)throw Error(P(190))}if(r.tag!==3)throw Error(P(188));return r.stateNode.current===r?e:t}function Fu(e){return e=Of(e),e!==null?Bu(e):null}function Bu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bu(e);if(t!==null)return t;e=e.sibling}return null}var Vu=Be.unstable_scheduleCallback,Hl=Be.unstable_cancelCallback,$f=Be.unstable_shouldYield,Lf=Be.unstable_requestPaint,ue=Be.unstable_now,Uf=Be.unstable_getCurrentPriorityLevel,Va=Be.unstable_ImmediatePriority,qu=Be.unstable_UserBlockingPriority,Qn=Be.unstable_NormalPriority,zf=Be.unstable_LowPriority,Hu=Be.unstable_IdlePriority,bi=null,ft=null;function Df(e){if(ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(bi,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:Bf,Mf=Math.log,Ff=Math.LN2;function Bf(e){return e>>>=0,e===0?32:31-(Mf(e)/Ff|0)|0}var pn=64,gn=4194304;function vs(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Yn(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,n=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~n;l!==0?s=vs(l):(i&=a,i!==0&&(s=vs(i)))}else a=r&~n,a!==0?s=vs(a):i!==0&&(s=vs(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&n)&&(n=s&-s,i=t&-t,n>=i||n===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-ot(t),n=1<<r,s|=e[r],t&=~n;return s}function Vf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qf(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-ot(i),l=1<<a,c=n[a];c===-1?(!(l&r)||l&s)&&(n[a]=Vf(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Bo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Wu(){var e=pn;return pn<<=1,!(pn&4194240)&&(pn=64),e}function Qi(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function sn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=r}function Hf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-ot(r),i=1<<n;t[n]=0,s[n]=-1,e[n]=-1,r&=~i}}function qa(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-ot(r),n=1<<s;n&t|e[s]&t&&(e[s]|=t),r&=~n}}var K=0;function Ju(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gu,Ha,Ku,Qu,Yu,Vo=!1,yn=[],Ut=null,zt=null,Dt=null,Us=new Map,zs=new Map,It=[],Wf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wl(e,t){switch(e){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":zt=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Us.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zs.delete(t.pointerId)}}function us(e,t,r,s,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[n]},t!==null&&(t=on(t),t!==null&&Ha(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Jf(e,t,r,s,n){switch(t){case"focusin":return Ut=us(Ut,e,t,r,s,n),!0;case"dragenter":return zt=us(zt,e,t,r,s,n),!0;case"mouseover":return Dt=us(Dt,e,t,r,s,n),!0;case"pointerover":var i=n.pointerId;return Us.set(i,us(Us.get(i)||null,e,t,r,s,n)),!0;case"gotpointercapture":return i=n.pointerId,zs.set(i,us(zs.get(i)||null,e,t,r,s,n)),!0}return!1}function Xu(e){var t=ir(e.target);if(t!==null){var r=vr(t);if(r!==null){if(t=r.tag,t===13){if(t=Mu(r),t!==null){e.blockedOn=t,Yu(e.priority,function(){Ku(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $n(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=qo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);zo=s,r.target.dispatchEvent(s),zo=null}else return t=on(r),t!==null&&Ha(t),e.blockedOn=r,!1;t.shift()}return!0}function Jl(e,t,r){$n(e)&&r.delete(t)}function Gf(){Vo=!1,Ut!==null&&$n(Ut)&&(Ut=null),zt!==null&&$n(zt)&&(zt=null),Dt!==null&&$n(Dt)&&(Dt=null),Us.forEach(Jl),zs.forEach(Jl)}function ds(e,t){e.blockedOn===t&&(e.blockedOn=null,Vo||(Vo=!0,Be.unstable_scheduleCallback(Be.unstable_NormalPriority,Gf)))}function Ds(e){function t(n){return ds(n,e)}if(0<yn.length){ds(yn[0],e);for(var r=1;r<yn.length;r++){var s=yn[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Ut!==null&&ds(Ut,e),zt!==null&&ds(zt,e),Dt!==null&&ds(Dt,e),Us.forEach(t),zs.forEach(t),r=0;r<It.length;r++)s=It[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<It.length&&(r=It[0],r.blockedOn===null);)Xu(r),r.blockedOn===null&&It.shift()}var qr=St.ReactCurrentBatchConfig,Xn=!0;function Kf(e,t,r,s){var n=K,i=qr.transition;qr.transition=null;try{K=1,Wa(e,t,r,s)}finally{K=n,qr.transition=i}}function Qf(e,t,r,s){var n=K,i=qr.transition;qr.transition=null;try{K=4,Wa(e,t,r,s)}finally{K=n,qr.transition=i}}function Wa(e,t,r,s){if(Xn){var n=qo(e,t,r,s);if(n===null)oo(e,t,s,Zn,r),Wl(e,s);else if(Jf(n,e,t,r,s))s.stopPropagation();else if(Wl(e,s),t&4&&-1<Wf.indexOf(e)){for(;n!==null;){var i=on(n);if(i!==null&&Gu(i),i=qo(e,t,r,s),i===null&&oo(e,t,s,Zn,r),i===n)break;n=i}n!==null&&s.stopPropagation()}else oo(e,t,s,null,r)}}var Zn=null;function qo(e,t,r,s){if(Zn=null,e=Ba(s),e=ir(e),e!==null)if(t=vr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Mu(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zn=e,null}function Zu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uf()){case Va:return 1;case qu:return 4;case Qn:case zf:return 16;case Hu:return 536870912;default:return 16}default:return 16}}var $t=null,Ja=null,Ln=null;function ed(){if(Ln)return Ln;var e,t=Ja,r=t.length,s,n="value"in $t?$t.value:$t.textContent,i=n.length;for(e=0;e<r&&t[e]===n[e];e++);var a=r-e;for(s=1;s<=a&&t[r-s]===n[i-s];s++);return Ln=n.slice(e,1<s?1-s:void 0)}function Un(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function xn(){return!0}function Gl(){return!1}function qe(e){function t(r,s,n,i,a){this._reactName=r,this._targetInst=n,this.type=s,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xn:Gl,this.isPropagationStopped=Gl,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=xn)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=xn)},persist:function(){},isPersistent:xn}),t}var ns={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ga=qe(ns),nn=ae({},ns,{view:0,detail:0}),Yf=qe(nn),Yi,Xi,hs,_i=ae({},nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ka,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hs&&(hs&&e.type==="mousemove"?(Yi=e.screenX-hs.screenX,Xi=e.screenY-hs.screenY):Xi=Yi=0,hs=e),Yi)},movementY:function(e){return"movementY"in e?e.movementY:Xi}}),Kl=qe(_i),Xf=ae({},_i,{dataTransfer:0}),Zf=qe(Xf),em=ae({},nn,{relatedTarget:0}),Zi=qe(em),tm=ae({},ns,{animationName:0,elapsedTime:0,pseudoElement:0}),rm=qe(tm),sm=ae({},ns,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nm=qe(sm),im=ae({},ns,{data:0}),Ql=qe(im),om={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},am={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=lm[e])?!!t[e]:!1}function Ka(){return cm}var um=ae({},nn,{key:function(e){if(e.key){var t=om[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Un(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?am[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ka,charCode:function(e){return e.type==="keypress"?Un(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Un(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dm=qe(um),hm=ae({},_i,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yl=qe(hm),fm=ae({},nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ka}),mm=qe(fm),pm=ae({},ns,{propertyName:0,elapsedTime:0,pseudoElement:0}),gm=qe(pm),ym=ae({},_i,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xm=qe(ym),vm=[9,13,27,32],Qa=_t&&"CompositionEvent"in window,ks=null;_t&&"documentMode"in document&&(ks=document.documentMode);var wm=_t&&"TextEvent"in window&&!ks,td=_t&&(!Qa||ks&&8<ks&&11>=ks),Xl=String.fromCharCode(32),Zl=!1;function rd(e,t){switch(e){case"keyup":return vm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ar=!1;function bm(e,t){switch(e){case"compositionend":return sd(t);case"keypress":return t.which!==32?null:(Zl=!0,Xl);case"textInput":return e=t.data,e===Xl&&Zl?null:e;default:return null}}function _m(e,t){if(Ar)return e==="compositionend"||!Qa&&rd(e,t)?(e=ed(),Ln=Ja=$t=null,Ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return td&&t.locale!=="ko"?null:t.data;default:return null}}var jm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ec(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!jm[e.type]:t==="textarea"}function nd(e,t,r,s){$u(s),t=ei(t,"onChange"),0<t.length&&(r=new Ga("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Ns=null,Ms=null;function km(e){pd(e,0)}function ji(e){var t=Or(e);if(Eu(t))return e}function Nm(e,t){if(e==="change")return t}var id=!1;if(_t){var eo;if(_t){var to="oninput"in document;if(!to){var tc=document.createElement("div");tc.setAttribute("oninput","return;"),to=typeof tc.oninput=="function"}eo=to}else eo=!1;id=eo&&(!document.documentMode||9<document.documentMode)}function rc(){Ns&&(Ns.detachEvent("onpropertychange",od),Ms=Ns=null)}function od(e){if(e.propertyName==="value"&&ji(Ms)){var t=[];nd(t,Ms,e,Ba(e)),Du(km,t)}}function Sm(e,t,r){e==="focusin"?(rc(),Ns=t,Ms=r,Ns.attachEvent("onpropertychange",od)):e==="focusout"&&rc()}function Cm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ji(Ms)}function Em(e,t){if(e==="click")return ji(t)}function Tm(e,t){if(e==="input"||e==="change")return ji(t)}function Pm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lt=typeof Object.is=="function"?Object.is:Pm;function Fs(e,t){if(lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var n=r[s];if(!So.call(t,n)||!lt(e[n],t[n]))return!1}return!0}function sc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nc(e,t){var r=sc(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sc(r)}}function ad(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ad(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ld(){for(var e=window,t=Jn();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Jn(e.document)}return t}function Ya(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Am(e){var t=ld(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ad(r.ownerDocument.documentElement,r)){if(s!==null&&Ya(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,i=Math.min(s.start,n);s=s.end===void 0?i:Math.min(s.end,n),!e.extend&&i>s&&(n=s,s=i,i=n),n=nc(r,i);var a=nc(r,s);n&&a&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Im=_t&&"documentMode"in document&&11>=document.documentMode,Ir=null,Ho=null,Ss=null,Wo=!1;function ic(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wo||Ir==null||Ir!==Jn(s)||(s=Ir,"selectionStart"in s&&Ya(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Ss&&Fs(Ss,s)||(Ss=s,s=ei(Ho,"onSelect"),0<s.length&&(t=new Ga("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Ir)))}function vn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Rr={animationend:vn("Animation","AnimationEnd"),animationiteration:vn("Animation","AnimationIteration"),animationstart:vn("Animation","AnimationStart"),transitionend:vn("Transition","TransitionEnd")},ro={},cd={};_t&&(cd=document.createElement("div").style,"AnimationEvent"in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),"TransitionEvent"in window||delete Rr.transitionend.transition);function ki(e){if(ro[e])return ro[e];if(!Rr[e])return e;var t=Rr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in cd)return ro[e]=t[r];return e}var ud=ki("animationend"),dd=ki("animationiteration"),hd=ki("animationstart"),fd=ki("transitionend"),md=new Map,oc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gt(e,t){md.set(e,t),xr(t,[e])}for(var so=0;so<oc.length;so++){var no=oc[so],Rm=no.toLowerCase(),Om=no[0].toUpperCase()+no.slice(1);Gt(Rm,"on"+Om)}Gt(ud,"onAnimationEnd");Gt(dd,"onAnimationIteration");Gt(hd,"onAnimationStart");Gt("dblclick","onDoubleClick");Gt("focusin","onFocus");Gt("focusout","onBlur");Gt(fd,"onTransitionEnd");Gr("onMouseEnter",["mouseout","mouseover"]);Gr("onMouseLeave",["mouseout","mouseover"]);Gr("onPointerEnter",["pointerout","pointerover"]);Gr("onPointerLeave",["pointerout","pointerover"]);xr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xr("onBeforeInput",["compositionend","keypress","textInput","paste"]);xr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ws="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$m=new Set("cancel close invalid load scroll toggle".split(" ").concat(ws));function ac(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Rf(s,t,void 0,e),e.currentTarget=null}function pd(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],n=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var a=s.length-1;0<=a;a--){var l=s[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&n.isPropagationStopped())break e;ac(n,l,u),i=c}else for(a=0;a<s.length;a++){if(l=s[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&n.isPropagationStopped())break e;ac(n,l,u),i=c}}}if(Kn)throw e=Fo,Kn=!1,Fo=null,e}function te(e,t){var r=t[Yo];r===void 0&&(r=t[Yo]=new Set);var s=e+"__bubble";r.has(s)||(gd(t,e,2,!1),r.add(s))}function io(e,t,r){var s=0;t&&(s|=4),gd(r,e,s,t)}var wn="_reactListening"+Math.random().toString(36).slice(2);function Bs(e){if(!e[wn]){e[wn]=!0,ju.forEach(function(r){r!=="selectionchange"&&($m.has(r)||io(r,!1,e),io(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[wn]||(t[wn]=!0,io("selectionchange",!1,t))}}function gd(e,t,r,s){switch(Zu(t)){case 1:var n=Kf;break;case 4:n=Qf;break;default:n=Wa}r=n.bind(null,t,r,e),n=void 0,!Mo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),s?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function oo(e,t,r,s,n){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var a=s.tag;if(a===3||a===4){var l=s.stateNode.containerInfo;if(l===n||l.nodeType===8&&l.parentNode===n)break;if(a===4)for(a=s.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;a=a.return}for(;l!==null;){if(a=ir(l),a===null)return;if(c=a.tag,c===5||c===6){s=i=a;continue e}l=l.parentNode}}s=s.return}Du(function(){var u=i,d=Ba(r),h=[];e:{var f=md.get(e);if(f!==void 0){var x=Ga,y=e;switch(e){case"keypress":if(Un(r)===0)break e;case"keydown":case"keyup":x=dm;break;case"focusin":y="focus",x=Zi;break;case"focusout":y="blur",x=Zi;break;case"beforeblur":case"afterblur":x=Zi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Zf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=mm;break;case ud:case dd:case hd:x=rm;break;case fd:x=gm;break;case"scroll":x=Yf;break;case"wheel":x=xm;break;case"copy":case"cut":case"paste":x=nm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Yl}var _=(t&4)!==0,S=!_&&e==="scroll",m=_?f!==null?f+"Capture":null:f;_=[];for(var p=u,g;p!==null;){g=p;var j=g.stateNode;if(g.tag===5&&j!==null&&(g=j,m!==null&&(j=Ls(p,m),j!=null&&_.push(Vs(p,j,g)))),S)break;p=p.return}0<_.length&&(f=new x(f,y,null,r,d),h.push({event:f,listeners:_}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",f&&r!==zo&&(y=r.relatedTarget||r.fromElement)&&(ir(y)||y[jt]))break e;if((x||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,x?(y=r.relatedTarget||r.toElement,x=u,y=y?ir(y):null,y!==null&&(S=vr(y),y!==S||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=u),x!==y)){if(_=Kl,j="onMouseLeave",m="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(_=Yl,j="onPointerLeave",m="onPointerEnter",p="pointer"),S=x==null?f:Or(x),g=y==null?f:Or(y),f=new _(j,p+"leave",x,r,d),f.target=S,f.relatedTarget=g,j=null,ir(d)===u&&(_=new _(m,p+"enter",y,r,d),_.target=g,_.relatedTarget=S,j=_),S=j,x&&y)t:{for(_=x,m=y,p=0,g=_;g;g=jr(g))p++;for(g=0,j=m;j;j=jr(j))g++;for(;0<p-g;)_=jr(_),p--;for(;0<g-p;)m=jr(m),g--;for(;p--;){if(_===m||m!==null&&_===m.alternate)break t;_=jr(_),m=jr(m)}_=null}else _=null;x!==null&&lc(h,f,x,_,!1),y!==null&&S!==null&&lc(h,S,y,_,!0)}}e:{if(f=u?Or(u):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var w=Nm;else if(ec(f))if(id)w=Tm;else{w=Cm;var N=Sm}else(x=f.nodeName)&&x.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=Em);if(w&&(w=w(e,u))){nd(h,w,r,d);break e}N&&N(e,f,u),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Ro(f,"number",f.value)}switch(N=u?Or(u):window,e){case"focusin":(ec(N)||N.contentEditable==="true")&&(Ir=N,Ho=u,Ss=null);break;case"focusout":Ss=Ho=Ir=null;break;case"mousedown":Wo=!0;break;case"contextmenu":case"mouseup":case"dragend":Wo=!1,ic(h,r,d);break;case"selectionchange":if(Im)break;case"keydown":case"keyup":ic(h,r,d)}var b;if(Qa)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ar?rd(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(td&&r.locale!=="ko"&&(Ar||k!=="onCompositionStart"?k==="onCompositionEnd"&&Ar&&(b=ed()):($t=d,Ja="value"in $t?$t.value:$t.textContent,Ar=!0)),N=ei(u,k),0<N.length&&(k=new Ql(k,e,null,r,d),h.push({event:k,listeners:N}),b?k.data=b:(b=sd(r),b!==null&&(k.data=b)))),(b=wm?bm(e,r):_m(e,r))&&(u=ei(u,"onBeforeInput"),0<u.length&&(d=new Ql("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=b))}pd(h,t)})}function Vs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ei(e,t){for(var r=t+"Capture",s=[];e!==null;){var n=e,i=n.stateNode;n.tag===5&&i!==null&&(n=i,i=Ls(e,r),i!=null&&s.unshift(Vs(e,i,n)),i=Ls(e,t),i!=null&&s.push(Vs(e,i,n))),e=e.return}return s}function jr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lc(e,t,r,s,n){for(var i=t._reactName,a=[];r!==null&&r!==s;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,n?(c=Ls(r,i),c!=null&&a.unshift(Vs(r,c,l))):n||(c=Ls(r,i),c!=null&&a.push(Vs(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var Lm=/\r\n?/g,Um=/\u0000|\uFFFD/g;function cc(e){return(typeof e=="string"?e:""+e).replace(Lm,`
`).replace(Um,"")}function bn(e,t,r){if(t=cc(t),cc(e)!==t&&r)throw Error(P(425))}function ti(){}var Jo=null,Go=null;function Ko(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qo=typeof setTimeout=="function"?setTimeout:void 0,zm=typeof clearTimeout=="function"?clearTimeout:void 0,uc=typeof Promise=="function"?Promise:void 0,Dm=typeof queueMicrotask=="function"?queueMicrotask:typeof uc<"u"?function(e){return uc.resolve(null).then(e).catch(Mm)}:Qo;function Mm(e){setTimeout(function(){throw e})}function ao(e,t){var r=t,s=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(s===0){e.removeChild(n),Ds(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=n}while(r);Ds(t)}function Mt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function dc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var is=Math.random().toString(36).slice(2),ht="__reactFiber$"+is,qs="__reactProps$"+is,jt="__reactContainer$"+is,Yo="__reactEvents$"+is,Fm="__reactListeners$"+is,Bm="__reactHandles$"+is;function ir(e){var t=e[ht];if(t)return t;for(var r=e.parentNode;r;){if(t=r[jt]||r[ht]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=dc(e);e!==null;){if(r=e[ht])return r;e=dc(e)}return t}e=r,r=e.parentNode}return null}function on(e){return e=e[ht]||e[jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Or(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(P(33))}function Ni(e){return e[qs]||null}var Xo=[],$r=-1;function Kt(e){return{current:e}}function re(e){0>$r||(e.current=Xo[$r],Xo[$r]=null,$r--)}function ee(e,t){$r++,Xo[$r]=e.current,e.current=t}var Wt={},ke=Kt(Wt),Le=Kt(!1),dr=Wt;function Kr(e,t){var r=e.type.contextTypes;if(!r)return Wt;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n={},i;for(i in r)n[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function Ue(e){return e=e.childContextTypes,e!=null}function ri(){re(Le),re(ke)}function hc(e,t,r){if(ke.current!==Wt)throw Error(P(168));ee(ke,t),ee(Le,r)}function yd(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var n in s)if(!(n in t))throw Error(P(108,Sf(e)||"Unknown",n));return ae({},r,s)}function si(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wt,dr=ke.current,ee(ke,e),ee(Le,Le.current),!0}function fc(e,t,r){var s=e.stateNode;if(!s)throw Error(P(169));r?(e=yd(e,t,dr),s.__reactInternalMemoizedMergedChildContext=e,re(Le),re(ke),ee(ke,e)):re(Le),ee(Le,r)}var xt=null,Si=!1,lo=!1;function xd(e){xt===null?xt=[e]:xt.push(e)}function Vm(e){Si=!0,xd(e)}function Qt(){if(!lo&&xt!==null){lo=!0;var e=0,t=K;try{var r=xt;for(K=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}xt=null,Si=!1}catch(n){throw xt!==null&&(xt=xt.slice(e+1)),Vu(Va,Qt),n}finally{K=t,lo=!1}}return null}var Lr=[],Ur=0,ni=null,ii=0,He=[],We=0,hr=null,vt=1,wt="";function tr(e,t){Lr[Ur++]=ii,Lr[Ur++]=ni,ni=e,ii=t}function vd(e,t,r){He[We++]=vt,He[We++]=wt,He[We++]=hr,hr=e;var s=vt;e=wt;var n=32-ot(s)-1;s&=~(1<<n),r+=1;var i=32-ot(t)+n;if(30<i){var a=n-n%5;i=(s&(1<<a)-1).toString(32),s>>=a,n-=a,vt=1<<32-ot(t)+n|r<<n|s,wt=i+e}else vt=1<<i|r<<n|s,wt=e}function Xa(e){e.return!==null&&(tr(e,1),vd(e,1,0))}function Za(e){for(;e===ni;)ni=Lr[--Ur],Lr[Ur]=null,ii=Lr[--Ur],Lr[Ur]=null;for(;e===hr;)hr=He[--We],He[We]=null,wt=He[--We],He[We]=null,vt=He[--We],He[We]=null}var Fe=null,Me=null,ne=!1,nt=null;function wd(e,t){var r=Je(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function mc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Fe=e,Me=Mt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Fe=e,Me=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=hr!==null?{id:vt,overflow:wt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Je(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Fe=e,Me=null,!0):!1;default:return!1}}function Zo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ea(e){if(ne){var t=Me;if(t){var r=t;if(!mc(e,t)){if(Zo(e))throw Error(P(418));t=Mt(r.nextSibling);var s=Fe;t&&mc(e,t)?wd(s,r):(e.flags=e.flags&-4097|2,ne=!1,Fe=e)}}else{if(Zo(e))throw Error(P(418));e.flags=e.flags&-4097|2,ne=!1,Fe=e}}}function pc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fe=e}function _n(e){if(e!==Fe)return!1;if(!ne)return pc(e),ne=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ko(e.type,e.memoizedProps)),t&&(t=Me)){if(Zo(e))throw bd(),Error(P(418));for(;t;)wd(e,t),t=Mt(t.nextSibling)}if(pc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(P(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Me=Mt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Me=null}}else Me=Fe?Mt(e.stateNode.nextSibling):null;return!0}function bd(){for(var e=Me;e;)e=Mt(e.nextSibling)}function Qr(){Me=Fe=null,ne=!1}function el(e){nt===null?nt=[e]:nt.push(e)}var qm=St.ReactCurrentBatchConfig;function fs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(P(309));var s=r.stateNode}if(!s)throw Error(P(147,e));var n=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=n.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(P(284));if(!r._owner)throw Error(P(290,e))}return e}function jn(e,t){throw e=Object.prototype.toString.call(t),Error(P(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function gc(e){var t=e._init;return t(e._payload)}function _d(e){function t(m,p){if(e){var g=m.deletions;g===null?(m.deletions=[p],m.flags|=16):g.push(p)}}function r(m,p){if(!e)return null;for(;p!==null;)t(m,p),p=p.sibling;return null}function s(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function n(m,p){return m=qt(m,p),m.index=0,m.sibling=null,m}function i(m,p,g){return m.index=g,e?(g=m.alternate,g!==null?(g=g.index,g<p?(m.flags|=2,p):g):(m.flags|=2,p)):(m.flags|=1048576,p)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,p,g,j){return p===null||p.tag!==6?(p=go(g,m.mode,j),p.return=m,p):(p=n(p,g),p.return=m,p)}function c(m,p,g,j){var w=g.type;return w===Pr?d(m,p,g.props.children,j,g.key):p!==null&&(p.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Tt&&gc(w)===p.type)?(j=n(p,g.props),j.ref=fs(m,p,g),j.return=m,j):(j=qn(g.type,g.key,g.props,null,m.mode,j),j.ref=fs(m,p,g),j.return=m,j)}function u(m,p,g,j){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=yo(g,m.mode,j),p.return=m,p):(p=n(p,g.children||[]),p.return=m,p)}function d(m,p,g,j,w){return p===null||p.tag!==7?(p=cr(g,m.mode,j,w),p.return=m,p):(p=n(p,g),p.return=m,p)}function h(m,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=go(""+p,m.mode,g),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case hn:return g=qn(p.type,p.key,p.props,null,m.mode,g),g.ref=fs(m,null,p),g.return=m,g;case Tr:return p=yo(p,m.mode,g),p.return=m,p;case Tt:var j=p._init;return h(m,j(p._payload),g)}if(xs(p)||ls(p))return p=cr(p,m.mode,g,null),p.return=m,p;jn(m,p)}return null}function f(m,p,g,j){var w=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return w!==null?null:l(m,p,""+g,j);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case hn:return g.key===w?c(m,p,g,j):null;case Tr:return g.key===w?u(m,p,g,j):null;case Tt:return w=g._init,f(m,p,w(g._payload),j)}if(xs(g)||ls(g))return w!==null?null:d(m,p,g,j,null);jn(m,g)}return null}function x(m,p,g,j,w){if(typeof j=="string"&&j!==""||typeof j=="number")return m=m.get(g)||null,l(p,m,""+j,w);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case hn:return m=m.get(j.key===null?g:j.key)||null,c(p,m,j,w);case Tr:return m=m.get(j.key===null?g:j.key)||null,u(p,m,j,w);case Tt:var N=j._init;return x(m,p,g,N(j._payload),w)}if(xs(j)||ls(j))return m=m.get(g)||null,d(p,m,j,w,null);jn(p,j)}return null}function y(m,p,g,j){for(var w=null,N=null,b=p,k=p=0,v=null;b!==null&&k<g.length;k++){b.index>k?(v=b,b=null):v=b.sibling;var C=f(m,b,g[k],j);if(C===null){b===null&&(b=v);break}e&&b&&C.alternate===null&&t(m,b),p=i(C,p,k),N===null?w=C:N.sibling=C,N=C,b=v}if(k===g.length)return r(m,b),ne&&tr(m,k),w;if(b===null){for(;k<g.length;k++)b=h(m,g[k],j),b!==null&&(p=i(b,p,k),N===null?w=b:N.sibling=b,N=b);return ne&&tr(m,k),w}for(b=s(m,b);k<g.length;k++)v=x(b,m,k,g[k],j),v!==null&&(e&&v.alternate!==null&&b.delete(v.key===null?k:v.key),p=i(v,p,k),N===null?w=v:N.sibling=v,N=v);return e&&b.forEach(function(I){return t(m,I)}),ne&&tr(m,k),w}function _(m,p,g,j){var w=ls(g);if(typeof w!="function")throw Error(P(150));if(g=w.call(g),g==null)throw Error(P(151));for(var N=w=null,b=p,k=p=0,v=null,C=g.next();b!==null&&!C.done;k++,C=g.next()){b.index>k?(v=b,b=null):v=b.sibling;var I=f(m,b,C.value,j);if(I===null){b===null&&(b=v);break}e&&b&&I.alternate===null&&t(m,b),p=i(I,p,k),N===null?w=I:N.sibling=I,N=I,b=v}if(C.done)return r(m,b),ne&&tr(m,k),w;if(b===null){for(;!C.done;k++,C=g.next())C=h(m,C.value,j),C!==null&&(p=i(C,p,k),N===null?w=C:N.sibling=C,N=C);return ne&&tr(m,k),w}for(b=s(m,b);!C.done;k++,C=g.next())C=x(b,m,k,C.value,j),C!==null&&(e&&C.alternate!==null&&b.delete(C.key===null?k:C.key),p=i(C,p,k),N===null?w=C:N.sibling=C,N=C);return e&&b.forEach(function(z){return t(m,z)}),ne&&tr(m,k),w}function S(m,p,g,j){if(typeof g=="object"&&g!==null&&g.type===Pr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case hn:e:{for(var w=g.key,N=p;N!==null;){if(N.key===w){if(w=g.type,w===Pr){if(N.tag===7){r(m,N.sibling),p=n(N,g.props.children),p.return=m,m=p;break e}}else if(N.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Tt&&gc(w)===N.type){r(m,N.sibling),p=n(N,g.props),p.ref=fs(m,N,g),p.return=m,m=p;break e}r(m,N);break}else t(m,N);N=N.sibling}g.type===Pr?(p=cr(g.props.children,m.mode,j,g.key),p.return=m,m=p):(j=qn(g.type,g.key,g.props,null,m.mode,j),j.ref=fs(m,p,g),j.return=m,m=j)}return a(m);case Tr:e:{for(N=g.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){r(m,p.sibling),p=n(p,g.children||[]),p.return=m,m=p;break e}else{r(m,p);break}else t(m,p);p=p.sibling}p=yo(g,m.mode,j),p.return=m,m=p}return a(m);case Tt:return N=g._init,S(m,p,N(g._payload),j)}if(xs(g))return y(m,p,g,j);if(ls(g))return _(m,p,g,j);jn(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(r(m,p.sibling),p=n(p,g),p.return=m,m=p):(r(m,p),p=go(g,m.mode,j),p.return=m,m=p),a(m)):r(m,p)}return S}var Yr=_d(!0),jd=_d(!1),oi=Kt(null),ai=null,zr=null,tl=null;function rl(){tl=zr=ai=null}function sl(e){var t=oi.current;re(oi),e._currentValue=t}function ta(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Hr(e,t){ai=e,tl=zr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($e=!0),e.firstContext=null)}function Qe(e){var t=e._currentValue;if(tl!==e)if(e={context:e,memoizedValue:t,next:null},zr===null){if(ai===null)throw Error(P(308));zr=e,ai.dependencies={lanes:0,firstContext:e}}else zr=zr.next=e;return t}var or=null;function nl(e){or===null?or=[e]:or.push(e)}function kd(e,t,r,s){var n=t.interleaved;return n===null?(r.next=r,nl(t)):(r.next=n.next,n.next=r),t.interleaved=r,kt(e,s)}function kt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Pt=!1;function il(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ft(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,W&2){var n=s.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),s.pending=t,kt(e,r)}return n=s.interleaved,n===null?(t.next=t,nl(s)):(t.next=n.next,n.next=t),s.interleaved=t,kt(e,r)}function zn(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,qa(e,r)}}function yc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var n=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?n=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?n=i=t:i=i.next=t}else n=i=t;r={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function li(e,t,r,s){var n=e.updateQueue;Pt=!1;var i=n.firstBaseUpdate,a=n.lastBaseUpdate,l=n.shared.pending;if(l!==null){n.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=n.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,x=l.eventTime;if((s&f)===f){d!==null&&(d=d.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,_=l;switch(f=t,x=r,_.tag){case 1:if(y=_.payload,typeof y=="function"){h=y.call(x,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,f=typeof y=="function"?y.call(x,h,f):y,f==null)break e;h=ae({},h,f);break e;case 2:Pt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=n.effects,f===null?n.effects=[l]:f.push(l))}else x={eventTime:x,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=x,c=h):d=d.next=x,a|=f;if(l=l.next,l===null){if(l=n.shared.pending,l===null)break;f=l,l=f.next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}while(1);if(d===null&&(c=h),n.baseState=c,n.firstBaseUpdate=u,n.lastBaseUpdate=d,t=n.shared.interleaved,t!==null){n=t;do a|=n.lane,n=n.next;while(n!==t)}else i===null&&(n.shared.lanes=0);mr|=a,e.lanes=a,e.memoizedState=h}}function xc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(n!==null){if(s.callback=null,s=r,typeof n!="function")throw Error(P(191,n));n.call(s)}}}var an={},mt=Kt(an),Hs=Kt(an),Ws=Kt(an);function ar(e){if(e===an)throw Error(P(174));return e}function ol(e,t){switch(ee(Ws,t),ee(Hs,e),ee(mt,an),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:$o(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=$o(t,e)}re(mt),ee(mt,t)}function Xr(){re(mt),re(Hs),re(Ws)}function Sd(e){ar(Ws.current);var t=ar(mt.current),r=$o(t,e.type);t!==r&&(ee(Hs,e),ee(mt,r))}function al(e){Hs.current===e&&(re(mt),re(Hs))}var ie=Kt(0);function ci(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function ll(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var Dn=St.ReactCurrentDispatcher,uo=St.ReactCurrentBatchConfig,fr=0,oe=null,he=null,pe=null,ui=!1,Cs=!1,Js=0,Hm=0;function be(){throw Error(P(321))}function cl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!lt(e[r],t[r]))return!1;return!0}function ul(e,t,r,s,n,i){if(fr=i,oe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Dn.current=e===null||e.memoizedState===null?Km:Qm,e=r(s,n),Cs){i=0;do{if(Cs=!1,Js=0,25<=i)throw Error(P(301));i+=1,pe=he=null,t.updateQueue=null,Dn.current=Ym,e=r(s,n)}while(Cs)}if(Dn.current=di,t=he!==null&&he.next!==null,fr=0,pe=he=oe=null,ui=!1,t)throw Error(P(300));return e}function dl(){var e=Js!==0;return Js=0,e}function dt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?oe.memoizedState=pe=e:pe=pe.next=e,pe}function Ye(){if(he===null){var e=oe.alternate;e=e!==null?e.memoizedState:null}else e=he.next;var t=pe===null?oe.memoizedState:pe.next;if(t!==null)pe=t,he=e;else{if(e===null)throw Error(P(310));he=e,e={memoizedState:he.memoizedState,baseState:he.baseState,baseQueue:he.baseQueue,queue:he.queue,next:null},pe===null?oe.memoizedState=pe=e:pe=pe.next=e}return pe}function Gs(e,t){return typeof t=="function"?t(e):t}function ho(e){var t=Ye(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var s=he,n=s.baseQueue,i=r.pending;if(i!==null){if(n!==null){var a=n.next;n.next=i.next,i.next=a}s.baseQueue=n=i,r.pending=null}if(n!==null){i=n.next,s=s.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((fr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:e(s,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=s):c=c.next=h,oe.lanes|=d,mr|=d}u=u.next}while(u!==null&&u!==i);c===null?a=s:c.next=l,lt(s,t.memoizedState)||($e=!0),t.memoizedState=s,t.baseState=a,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){n=e;do i=n.lane,oe.lanes|=i,mr|=i,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function fo(e){var t=Ye(),r=t.queue;if(r===null)throw Error(P(311));r.lastRenderedReducer=e;var s=r.dispatch,n=r.pending,i=t.memoizedState;if(n!==null){r.pending=null;var a=n=n.next;do i=e(i,a.action),a=a.next;while(a!==n);lt(i,t.memoizedState)||($e=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function Cd(){}function Ed(e,t){var r=oe,s=Ye(),n=t(),i=!lt(s.memoizedState,n);if(i&&(s.memoizedState=n,$e=!0),s=s.queue,hl(Ad.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||pe!==null&&pe.memoizedState.tag&1){if(r.flags|=2048,Ks(9,Pd.bind(null,r,s,n,t),void 0,null),ge===null)throw Error(P(349));fr&30||Td(r,t,n)}return n}function Td(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Pd(e,t,r,s){t.value=r,t.getSnapshot=s,Id(t)&&Rd(e)}function Ad(e,t,r){return r(function(){Id(t)&&Rd(e)})}function Id(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lt(e,r)}catch{return!0}}function Rd(e){var t=kt(e,1);t!==null&&at(t,e,1,-1)}function vc(e){var t=dt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:e},t.queue=e,e=e.dispatch=Gm.bind(null,oe,e),[t.memoizedState,e]}function Ks(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=oe.updateQueue,t===null?(t={lastEffect:null,stores:null},oe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Od(){return Ye().memoizedState}function Mn(e,t,r,s){var n=dt();oe.flags|=e,n.memoizedState=Ks(1|t,r,void 0,s===void 0?null:s)}function Ci(e,t,r,s){var n=Ye();s=s===void 0?null:s;var i=void 0;if(he!==null){var a=he.memoizedState;if(i=a.destroy,s!==null&&cl(s,a.deps)){n.memoizedState=Ks(t,r,i,s);return}}oe.flags|=e,n.memoizedState=Ks(1|t,r,i,s)}function wc(e,t){return Mn(8390656,8,e,t)}function hl(e,t){return Ci(2048,8,e,t)}function $d(e,t){return Ci(4,2,e,t)}function Ld(e,t){return Ci(4,4,e,t)}function Ud(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zd(e,t,r){return r=r!=null?r.concat([e]):null,Ci(4,4,Ud.bind(null,t,e),r)}function fl(){}function Dd(e,t){var r=Ye();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&cl(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Md(e,t){var r=Ye();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&cl(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Fd(e,t,r){return fr&21?(lt(r,t)||(r=Wu(),oe.lanes|=r,mr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$e=!0),e.memoizedState=r)}function Wm(e,t){var r=K;K=r!==0&&4>r?r:4,e(!0);var s=uo.transition;uo.transition={};try{e(!1),t()}finally{K=r,uo.transition=s}}function Bd(){return Ye().memoizedState}function Jm(e,t,r){var s=Vt(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Vd(e))qd(t,r);else if(r=kd(e,t,r,s),r!==null){var n=Te();at(r,e,s,n),Hd(r,t,s)}}function Gm(e,t,r){var s=Vt(e),n={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Vd(e))qd(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,r);if(n.hasEagerState=!0,n.eagerState=l,lt(l,a)){var c=t.interleaved;c===null?(n.next=n,nl(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}r=kd(e,t,n,s),r!==null&&(n=Te(),at(r,e,s,n),Hd(r,t,s))}}function Vd(e){var t=e.alternate;return e===oe||t!==null&&t===oe}function qd(e,t){Cs=ui=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Hd(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,qa(e,r)}}var di={readContext:Qe,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useInsertionEffect:be,useLayoutEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useMutableSource:be,useSyncExternalStore:be,useId:be,unstable_isNewReconciler:!1},Km={readContext:Qe,useCallback:function(e,t){return dt().memoizedState=[e,t===void 0?null:t],e},useContext:Qe,useEffect:wc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Mn(4194308,4,Ud.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Mn(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mn(4,2,e,t)},useMemo:function(e,t){var r=dt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=dt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Jm.bind(null,oe,e),[s.memoizedState,e]},useRef:function(e){var t=dt();return e={current:e},t.memoizedState=e},useState:vc,useDebugValue:fl,useDeferredValue:function(e){return dt().memoizedState=e},useTransition:function(){var e=vc(!1),t=e[0];return e=Wm.bind(null,e[1]),dt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=oe,n=dt();if(ne){if(r===void 0)throw Error(P(407));r=r()}else{if(r=t(),ge===null)throw Error(P(349));fr&30||Td(s,t,r)}n.memoizedState=r;var i={value:r,getSnapshot:t};return n.queue=i,wc(Ad.bind(null,s,i,e),[e]),s.flags|=2048,Ks(9,Pd.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=dt(),t=ge.identifierPrefix;if(ne){var r=wt,s=vt;r=(s&~(1<<32-ot(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Js++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Hm++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Qm={readContext:Qe,useCallback:Dd,useContext:Qe,useEffect:hl,useImperativeHandle:zd,useInsertionEffect:$d,useLayoutEffect:Ld,useMemo:Md,useReducer:ho,useRef:Od,useState:function(){return ho(Gs)},useDebugValue:fl,useDeferredValue:function(e){var t=Ye();return Fd(t,he.memoizedState,e)},useTransition:function(){var e=ho(Gs)[0],t=Ye().memoizedState;return[e,t]},useMutableSource:Cd,useSyncExternalStore:Ed,useId:Bd,unstable_isNewReconciler:!1},Ym={readContext:Qe,useCallback:Dd,useContext:Qe,useEffect:hl,useImperativeHandle:zd,useInsertionEffect:$d,useLayoutEffect:Ld,useMemo:Md,useReducer:fo,useRef:Od,useState:function(){return fo(Gs)},useDebugValue:fl,useDeferredValue:function(e){var t=Ye();return he===null?t.memoizedState=e:Fd(t,he.memoizedState,e)},useTransition:function(){var e=fo(Gs)[0],t=Ye().memoizedState;return[e,t]},useMutableSource:Cd,useSyncExternalStore:Ed,useId:Bd,unstable_isNewReconciler:!1};function tt(e,t){if(e&&e.defaultProps){t=ae({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ra(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:ae({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ei={isMounted:function(e){return(e=e._reactInternals)?vr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Te(),n=Vt(e),i=bt(s,n);i.payload=t,r!=null&&(i.callback=r),t=Ft(e,i,n),t!==null&&(at(t,e,n,s),zn(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Te(),n=Vt(e),i=bt(s,n);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ft(e,i,n),t!==null&&(at(t,e,n,s),zn(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Te(),s=Vt(e),n=bt(r,s);n.tag=2,t!=null&&(n.callback=t),t=Ft(e,n,s),t!==null&&(at(t,e,s,r),zn(t,e,s))}};function bc(e,t,r,s,n,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,a):t.prototype&&t.prototype.isPureReactComponent?!Fs(r,s)||!Fs(n,i):!0}function Wd(e,t,r){var s=!1,n=Wt,i=t.contextType;return typeof i=="object"&&i!==null?i=Qe(i):(n=Ue(t)?dr:ke.current,s=t.contextTypes,i=(s=s!=null)?Kr(e,n):Wt),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ei,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),t}function _c(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Ei.enqueueReplaceState(t,t.state,null)}function sa(e,t,r,s){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},il(e);var i=t.contextType;typeof i=="object"&&i!==null?n.context=Qe(i):(i=Ue(t)?dr:ke.current,n.context=Kr(e,i)),n.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ra(e,t,i,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Ei.enqueueReplaceState(n,n.state,null),li(e,r,n,s),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Zr(e,t){try{var r="",s=t;do r+=Nf(s),s=s.return;while(s);var n=r}catch(i){n=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:n,digest:null}}function mo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function na(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Xm=typeof WeakMap=="function"?WeakMap:Map;function Jd(e,t,r){r=bt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){fi||(fi=!0,ma=s),na(e,t)},r}function Gd(e,t,r){r=bt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var n=t.value;r.payload=function(){return s(n)},r.callback=function(){na(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){na(e,t),typeof s!="function"&&(Bt===null?Bt=new Set([this]):Bt.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function jc(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Xm;var n=new Set;s.set(t,n)}else n=s.get(t),n===void 0&&(n=new Set,s.set(t,n));n.has(r)||(n.add(r),e=hp.bind(null,e,t,r),t.then(e,e))}function kc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Nc(e,t,r,s,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=bt(-1,1),t.tag=2,Ft(r,t,1))),r.lanes|=1),e)}var Zm=St.ReactCurrentOwner,$e=!1;function Ee(e,t,r,s){t.child=e===null?jd(t,null,r,s):Yr(t,e.child,r,s)}function Sc(e,t,r,s,n){r=r.render;var i=t.ref;return Hr(t,n),s=ul(e,t,r,s,i,n),r=dl(),e!==null&&!$e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Nt(e,t,n)):(ne&&r&&Xa(t),t.flags|=1,Ee(e,t,s,n),t.child)}function Cc(e,t,r,s,n){if(e===null){var i=r.type;return typeof i=="function"&&!bl(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Kd(e,t,i,s,n)):(e=qn(r.type,null,s,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&n)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Fs,r(a,s)&&e.ref===t.ref)return Nt(e,t,n)}return t.flags|=1,e=qt(i,s),e.ref=t.ref,e.return=t,t.child=e}function Kd(e,t,r,s,n){if(e!==null){var i=e.memoizedProps;if(Fs(i,s)&&e.ref===t.ref)if($e=!1,t.pendingProps=s=i,(e.lanes&n)!==0)e.flags&131072&&($e=!0);else return t.lanes=e.lanes,Nt(e,t,n)}return ia(e,t,r,s,n)}function Qd(e,t,r){var s=t.pendingProps,n=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(Mr,De),De|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ee(Mr,De),De|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,ee(Mr,De),De|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,ee(Mr,De),De|=s;return Ee(e,t,n,r),t.child}function Yd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ia(e,t,r,s,n){var i=Ue(r)?dr:ke.current;return i=Kr(t,i),Hr(t,n),r=ul(e,t,r,s,i,n),s=dl(),e!==null&&!$e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Nt(e,t,n)):(ne&&s&&Xa(t),t.flags|=1,Ee(e,t,r,n),t.child)}function Ec(e,t,r,s,n){if(Ue(r)){var i=!0;si(t)}else i=!1;if(Hr(t,n),t.stateNode===null)Fn(e,t),Wd(t,r,s),sa(t,r,s,n),s=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=Qe(u):(u=Ue(r)?dr:ke.current,u=Kr(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==s||c!==u)&&_c(t,a,s,u),Pt=!1;var f=t.memoizedState;a.state=f,li(t,s,a,n),c=t.memoizedState,l!==s||f!==c||Le.current||Pt?(typeof d=="function"&&(ra(t,r,d,s),c=t.memoizedState),(l=Pt||bc(t,r,l,s,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),a.props=s,a.state=c,a.context=u,s=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{a=t.stateNode,Nd(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:tt(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Qe(c):(c=Ue(r)?dr:ke.current,c=Kr(t,c));var x=r.getDerivedStateFromProps;(d=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&_c(t,a,s,c),Pt=!1,f=t.memoizedState,a.state=f,li(t,s,a,n);var y=t.memoizedState;l!==h||f!==y||Le.current||Pt?(typeof x=="function"&&(ra(t,r,x,s),y=t.memoizedState),(u=Pt||bc(t,r,u,s,f,y,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(s,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(s,y,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=y),a.props=s,a.state=y,a.context=c,s=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),s=!1)}return oa(e,t,r,s,i,n)}function oa(e,t,r,s,n,i){Yd(e,t);var a=(t.flags&128)!==0;if(!s&&!a)return n&&fc(t,r,!1),Nt(e,t,i);s=t.stateNode,Zm.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&a?(t.child=Yr(t,e.child,null,i),t.child=Yr(t,null,l,i)):Ee(e,t,l,i),t.memoizedState=s.state,n&&fc(t,r,!0),t.child}function Xd(e){var t=e.stateNode;t.pendingContext?hc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hc(e,t.context,!1),ol(e,t.containerInfo)}function Tc(e,t,r,s,n){return Qr(),el(n),t.flags|=256,Ee(e,t,r,s),t.child}var aa={dehydrated:null,treeContext:null,retryLane:0};function la(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zd(e,t,r){var s=t.pendingProps,n=ie.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(n&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),ee(ie,n&1),e===null)return ea(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=s.children,e=s.fallback,i?(s=t.mode,i=t.child,a={mode:"hidden",children:a},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ai(a,s,0,null),e=cr(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=la(r),t.memoizedState=aa,e):ml(t,a));if(n=e.memoizedState,n!==null&&(l=n.dehydrated,l!==null))return ep(e,t,a,s,l,n,r);if(i){i=s.fallback,a=t.mode,n=e.child,l=n.sibling;var c={mode:"hidden",children:s.children};return!(a&1)&&t.child!==n?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=qt(n,c),s.subtreeFlags=n.subtreeFlags&14680064),l!==null?i=qt(l,i):(i=cr(i,a,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,a=e.child.memoizedState,a=a===null?la(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=aa,s}return i=e.child,e=i.sibling,s=qt(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function ml(e,t){return t=Ai({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function kn(e,t,r,s){return s!==null&&el(s),Yr(t,e.child,null,r),e=ml(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ep(e,t,r,s,n,i,a){if(r)return t.flags&256?(t.flags&=-257,s=mo(Error(P(422))),kn(e,t,a,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,n=t.mode,s=Ai({mode:"visible",children:s.children},n,0,null),i=cr(i,n,a,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Yr(t,e.child,null,a),t.child.memoizedState=la(a),t.memoizedState=aa,i);if(!(t.mode&1))return kn(e,t,a,null);if(n.data==="$!"){if(s=n.nextSibling&&n.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(P(419)),s=mo(i,s,void 0),kn(e,t,a,s)}if(l=(a&e.childLanes)!==0,$e||l){if(s=ge,s!==null){switch(a&-a){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(s.suspendedLanes|a)?0:n,n!==0&&n!==i.retryLane&&(i.retryLane=n,kt(e,n),at(s,e,n,-1))}return wl(),s=mo(Error(P(421))),kn(e,t,a,s)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=fp.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,Me=Mt(n.nextSibling),Fe=t,ne=!0,nt=null,e!==null&&(He[We++]=vt,He[We++]=wt,He[We++]=hr,vt=e.id,wt=e.overflow,hr=t),t=ml(t,s.children),t.flags|=4096,t)}function Pc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ta(e.return,t,r)}function po(e,t,r,s,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=n)}function eh(e,t,r){var s=t.pendingProps,n=s.revealOrder,i=s.tail;if(Ee(e,t,s.children,r),s=ie.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Pc(e,r,t);else if(e.tag===19)Pc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ee(ie,s),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&ci(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),po(t,!1,n,r,i);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&ci(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}po(t,!0,r,null,i);break;case"together":po(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Fn(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(P(153));if(t.child!==null){for(e=t.child,r=qt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=qt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function tp(e,t,r){switch(t.tag){case 3:Xd(t),Qr();break;case 5:Sd(t);break;case 1:Ue(t.type)&&si(t);break;case 4:ol(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;ee(oi,s._currentValue),s._currentValue=n;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ee(ie,ie.current&1),t.flags|=128,null):r&t.child.childLanes?Zd(e,t,r):(ee(ie,ie.current&1),e=Nt(e,t,r),e!==null?e.sibling:null);ee(ie,ie.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return eh(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ee(ie,ie.current),s)break;return null;case 22:case 23:return t.lanes=0,Qd(e,t,r)}return Nt(e,t,r)}var th,ca,rh,sh;th=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ca=function(){};rh=function(e,t,r,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,ar(mt.current);var i=null;switch(r){case"input":n=Ao(e,n),s=Ao(e,s),i=[];break;case"select":n=ae({},n,{value:void 0}),s=ae({},s,{value:void 0}),i=[];break;case"textarea":n=Oo(e,n),s=Oo(e,s),i=[];break;default:typeof n.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ti)}Lo(r,s);var a;r=null;for(u in n)if(!s.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var l=n[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Os.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=n!=null?n[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Os.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&te("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};sh=function(e,t,r,s){r!==s&&(t.flags|=4)};function ms(e,t){if(!ne)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function _e(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags&14680064,s|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function rp(e,t,r){var s=t.pendingProps;switch(Za(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(t),null;case 1:return Ue(t.type)&&ri(),_e(t),null;case 3:return s=t.stateNode,Xr(),re(Le),re(ke),ll(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(_n(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nt!==null&&(ya(nt),nt=null))),ca(e,t),_e(t),null;case 5:al(t);var n=ar(Ws.current);if(r=t.type,e!==null&&t.stateNode!=null)rh(e,t,r,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(P(166));return _e(t),null}if(e=ar(mt.current),_n(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[ht]=t,s[qs]=i,e=(t.mode&1)!==0,r){case"dialog":te("cancel",s),te("close",s);break;case"iframe":case"object":case"embed":te("load",s);break;case"video":case"audio":for(n=0;n<ws.length;n++)te(ws[n],s);break;case"source":te("error",s);break;case"img":case"image":case"link":te("error",s),te("load",s);break;case"details":te("toggle",s);break;case"input":Dl(s,i),te("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},te("invalid",s);break;case"textarea":Fl(s,i),te("invalid",s)}Lo(r,i),n=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&bn(s.textContent,l,e),n=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&bn(s.textContent,l,e),n=["children",""+l]):Os.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&te("scroll",s)}switch(r){case"input":fn(s),Ml(s,i,!0);break;case"textarea":fn(s),Bl(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=ti)}s=n,t.updateQueue=s,s!==null&&(t.flags|=4)}else{a=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Au(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=a.createElement(r,{is:s.is}):(e=a.createElement(r),r==="select"&&(a=e,s.multiple?a.multiple=!0:s.size&&(a.size=s.size))):e=a.createElementNS(e,r),e[ht]=t,e[qs]=s,th(e,t,!1,!1),t.stateNode=e;e:{switch(a=Uo(r,s),r){case"dialog":te("cancel",e),te("close",e),n=s;break;case"iframe":case"object":case"embed":te("load",e),n=s;break;case"video":case"audio":for(n=0;n<ws.length;n++)te(ws[n],e);n=s;break;case"source":te("error",e),n=s;break;case"img":case"image":case"link":te("error",e),te("load",e),n=s;break;case"details":te("toggle",e),n=s;break;case"input":Dl(e,s),n=Ao(e,s),te("invalid",e);break;case"option":n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=ae({},s,{value:void 0}),te("invalid",e);break;case"textarea":Fl(e,s),n=Oo(e,s),te("invalid",e);break;default:n=s}Lo(r,n),l=n;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ou(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Iu(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&$s(e,c):typeof c=="number"&&$s(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Os.hasOwnProperty(i)?c!=null&&i==="onScroll"&&te("scroll",e):c!=null&&za(e,i,c,a))}switch(r){case"input":fn(e),Ml(e,s,!1);break;case"textarea":fn(e),Bl(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Ht(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?Fr(e,!!s.multiple,i,!1):s.defaultValue!=null&&Fr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=ti)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _e(t),null;case 6:if(e&&t.stateNode!=null)sh(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(P(166));if(r=ar(Ws.current),ar(mt.current),_n(t)){if(s=t.stateNode,r=t.memoizedProps,s[ht]=t,(i=s.nodeValue!==r)&&(e=Fe,e!==null))switch(e.tag){case 3:bn(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bn(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[ht]=t,t.stateNode=s}return _e(t),null;case 13:if(re(ie),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ne&&Me!==null&&t.mode&1&&!(t.flags&128))bd(),Qr(),t.flags|=98560,i=!1;else if(i=_n(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(P(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(P(317));i[ht]=t}else Qr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;_e(t),i=!1}else nt!==null&&(ya(nt),nt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||ie.current&1?fe===0&&(fe=3):wl())),t.updateQueue!==null&&(t.flags|=4),_e(t),null);case 4:return Xr(),ca(e,t),e===null&&Bs(t.stateNode.containerInfo),_e(t),null;case 10:return sl(t.type._context),_e(t),null;case 17:return Ue(t.type)&&ri(),_e(t),null;case 19:if(re(ie),i=t.memoizedState,i===null)return _e(t),null;if(s=(t.flags&128)!==0,a=i.rendering,a===null)if(s)ms(i,!1);else{if(fe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=ci(e),a!==null){for(t.flags|=128,ms(i,!1),s=a.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ee(ie,ie.current&1|2),t.child}e=e.sibling}i.tail!==null&&ue()>es&&(t.flags|=128,s=!0,ms(i,!1),t.lanes=4194304)}else{if(!s)if(e=ci(a),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ms(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ne)return _e(t),null}else 2*ue()-i.renderingStartTime>es&&r!==1073741824&&(t.flags|=128,s=!0,ms(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ue(),t.sibling=null,r=ie.current,ee(ie,s?r&1|2:r&1),t):(_e(t),null);case 22:case 23:return vl(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?De&1073741824&&(_e(t),t.subtreeFlags&6&&(t.flags|=8192)):_e(t),null;case 24:return null;case 25:return null}throw Error(P(156,t.tag))}function sp(e,t){switch(Za(t),t.tag){case 1:return Ue(t.type)&&ri(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xr(),re(Le),re(ke),ll(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return al(t),null;case 13:if(re(ie),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(P(340));Qr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return re(ie),null;case 4:return Xr(),null;case 10:return sl(t.type._context),null;case 22:case 23:return vl(),null;case 24:return null;default:return null}}var Nn=!1,je=!1,np=typeof WeakSet=="function"?WeakSet:Set,$=null;function Dr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){le(e,t,s)}else r.current=null}function ua(e,t,r){try{r()}catch(s){le(e,t,s)}}var Ac=!1;function ip(e,t){if(Jo=Xn,e=ld(),Ya(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var n=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var x;h!==r||n!==0&&h.nodeType!==3||(l=a+n),h!==i||s!==0&&h.nodeType!==3||(c=a+s),h.nodeType===3&&(a+=h.nodeValue.length),(x=h.firstChild)!==null;)f=h,h=x;for(;;){if(h===e)break t;if(f===r&&++u===n&&(l=a),f===i&&++d===s&&(c=a),(x=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=x}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Go={focusedElem:e,selectionRange:r},Xn=!1,$=t;$!==null;)if(t=$,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$=e;else for(;$!==null;){t=$;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,S=y.memoizedState,m=t.stateNode,p=m.getSnapshotBeforeUpdate(t.elementType===t.type?_:tt(t.type,_),S);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(j){le(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,$=e;break}$=t.return}return y=Ac,Ac=!1,y}function Es(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var n=s=s.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,i!==void 0&&ua(t,r,i)}n=n.next}while(n!==s)}}function Ti(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function da(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function nh(e){var t=e.alternate;t!==null&&(e.alternate=null,nh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ht],delete t[qs],delete t[Yo],delete t[Fm],delete t[Bm])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ih(e){return e.tag===5||e.tag===3||e.tag===4}function Ic(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ih(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ha(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ti));else if(s!==4&&(e=e.child,e!==null))for(ha(e,t,r),e=e.sibling;e!==null;)ha(e,t,r),e=e.sibling}function fa(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(fa(e,t,r),e=e.sibling;e!==null;)fa(e,t,r),e=e.sibling}var ye=null,rt=!1;function Ct(e,t,r){for(r=r.child;r!==null;)oh(e,t,r),r=r.sibling}function oh(e,t,r){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(bi,r)}catch{}switch(r.tag){case 5:je||Dr(r,t);case 6:var s=ye,n=rt;ye=null,Ct(e,t,r),ye=s,rt=n,ye!==null&&(rt?(e=ye,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ye.removeChild(r.stateNode));break;case 18:ye!==null&&(rt?(e=ye,r=r.stateNode,e.nodeType===8?ao(e.parentNode,r):e.nodeType===1&&ao(e,r),Ds(e)):ao(ye,r.stateNode));break;case 4:s=ye,n=rt,ye=r.stateNode.containerInfo,rt=!0,Ct(e,t,r),ye=s,rt=n;break;case 0:case 11:case 14:case 15:if(!je&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){n=s=s.next;do{var i=n,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&ua(r,t,a),n=n.next}while(n!==s)}Ct(e,t,r);break;case 1:if(!je&&(Dr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){le(r,t,l)}Ct(e,t,r);break;case 21:Ct(e,t,r);break;case 22:r.mode&1?(je=(s=je)||r.memoizedState!==null,Ct(e,t,r),je=s):Ct(e,t,r);break;default:Ct(e,t,r)}}function Rc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new np),t.forEach(function(s){var n=mp.bind(null,e,s);r.has(s)||(r.add(s),s.then(n,n))})}}function Ze(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var n=r[s];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:ye=l.stateNode,rt=!1;break e;case 3:ye=l.stateNode.containerInfo,rt=!0;break e;case 4:ye=l.stateNode.containerInfo,rt=!0;break e}l=l.return}if(ye===null)throw Error(P(160));oh(i,a,n),ye=null,rt=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(u){le(n,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ah(t,e),t=t.sibling}function ah(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ze(t,e),ut(e),s&4){try{Es(3,e,e.return),Ti(3,e)}catch(_){le(e,e.return,_)}try{Es(5,e,e.return)}catch(_){le(e,e.return,_)}}break;case 1:Ze(t,e),ut(e),s&512&&r!==null&&Dr(r,r.return);break;case 5:if(Ze(t,e),ut(e),s&512&&r!==null&&Dr(r,r.return),e.flags&32){var n=e.stateNode;try{$s(n,"")}catch(_){le(e,e.return,_)}}if(s&4&&(n=e.stateNode,n!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Tu(n,i),Uo(l,a);var u=Uo(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?Ou(n,h):d==="dangerouslySetInnerHTML"?Iu(n,h):d==="children"?$s(n,h):za(n,d,h,u)}switch(l){case"input":Io(n,i);break;case"textarea":Pu(n,i);break;case"select":var f=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Fr(n,!!i.multiple,x,!1):f!==!!i.multiple&&(i.defaultValue!=null?Fr(n,!!i.multiple,i.defaultValue,!0):Fr(n,!!i.multiple,i.multiple?[]:"",!1))}n[qs]=i}catch(_){le(e,e.return,_)}}break;case 6:if(Ze(t,e),ut(e),s&4){if(e.stateNode===null)throw Error(P(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(_){le(e,e.return,_)}}break;case 3:if(Ze(t,e),ut(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ds(t.containerInfo)}catch(_){le(e,e.return,_)}break;case 4:Ze(t,e),ut(e);break;case 13:Ze(t,e),ut(e),n=e.child,n.flags&8192&&(i=n.memoizedState!==null,n.stateNode.isHidden=i,!i||n.alternate!==null&&n.alternate.memoizedState!==null||(yl=ue())),s&4&&Rc(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(je=(u=je)||d,Ze(t,e),je=u):Ze(t,e),ut(e),s&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for($=e,d=e.child;d!==null;){for(h=$=d;$!==null;){switch(f=$,x=f.child,f.tag){case 0:case 11:case 14:case 15:Es(4,f,f.return);break;case 1:Dr(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){s=f,r=f.return;try{t=s,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(_){le(s,r,_)}}break;case 5:Dr(f,f.return);break;case 22:if(f.memoizedState!==null){$c(h);continue}}x!==null?(x.return=f,$=x):$c(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{n=h.stateNode,u?(i=n.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ru("display",a))}catch(_){le(e,e.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){le(e,e.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ze(t,e),ut(e),s&4&&Rc(e);break;case 21:break;default:Ze(t,e),ut(e)}}function ut(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ih(r)){var s=r;break e}r=r.return}throw Error(P(160))}switch(s.tag){case 5:var n=s.stateNode;s.flags&32&&($s(n,""),s.flags&=-33);var i=Ic(e);fa(e,i,n);break;case 3:case 4:var a=s.stateNode.containerInfo,l=Ic(e);ha(e,l,a);break;default:throw Error(P(161))}}catch(c){le(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function op(e,t,r){$=e,lh(e)}function lh(e,t,r){for(var s=(e.mode&1)!==0;$!==null;){var n=$,i=n.child;if(n.tag===22&&s){var a=n.memoizedState!==null||Nn;if(!a){var l=n.alternate,c=l!==null&&l.memoizedState!==null||je;l=Nn;var u=je;if(Nn=a,(je=c)&&!u)for($=n;$!==null;)a=$,c=a.child,a.tag===22&&a.memoizedState!==null?Lc(n):c!==null?(c.return=a,$=c):Lc(n);for(;i!==null;)$=i,lh(i),i=i.sibling;$=n,Nn=l,je=u}Oc(e)}else n.subtreeFlags&8772&&i!==null?(i.return=n,$=i):Oc(e)}}function Oc(e){for(;$!==null;){var t=$;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:je||Ti(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!je)if(r===null)s.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:tt(t.type,r.memoizedProps);s.componentDidUpdate(n,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&xc(t,i,s);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}xc(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Ds(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}je||t.flags&512&&da(t)}catch(f){le(t,t.return,f)}}if(t===e){$=null;break}if(r=t.sibling,r!==null){r.return=t.return,$=r;break}$=t.return}}function $c(e){for(;$!==null;){var t=$;if(t===e){$=null;break}var r=t.sibling;if(r!==null){r.return=t.return,$=r;break}$=t.return}}function Lc(e){for(;$!==null;){var t=$;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ti(4,t)}catch(c){le(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var n=t.return;try{s.componentDidMount()}catch(c){le(t,n,c)}}var i=t.return;try{da(t)}catch(c){le(t,i,c)}break;case 5:var a=t.return;try{da(t)}catch(c){le(t,a,c)}}}catch(c){le(t,t.return,c)}if(t===e){$=null;break}var l=t.sibling;if(l!==null){l.return=t.return,$=l;break}$=t.return}}var ap=Math.ceil,hi=St.ReactCurrentDispatcher,pl=St.ReactCurrentOwner,Ge=St.ReactCurrentBatchConfig,W=0,ge=null,de=null,xe=0,De=0,Mr=Kt(0),fe=0,Qs=null,mr=0,Pi=0,gl=0,Ts=null,Re=null,yl=0,es=1/0,gt=null,fi=!1,ma=null,Bt=null,Sn=!1,Lt=null,mi=0,Ps=0,pa=null,Bn=-1,Vn=0;function Te(){return W&6?ue():Bn!==-1?Bn:Bn=ue()}function Vt(e){return e.mode&1?W&2&&xe!==0?xe&-xe:qm.transition!==null?(Vn===0&&(Vn=Wu()),Vn):(e=K,e!==0||(e=window.event,e=e===void 0?16:Zu(e.type)),e):1}function at(e,t,r,s){if(50<Ps)throw Ps=0,pa=null,Error(P(185));sn(e,r,s),(!(W&2)||e!==ge)&&(e===ge&&(!(W&2)&&(Pi|=r),fe===4&&Rt(e,xe)),ze(e,s),r===1&&W===0&&!(t.mode&1)&&(es=ue()+500,Si&&Qt()))}function ze(e,t){var r=e.callbackNode;qf(e,t);var s=Yn(e,e===ge?xe:0);if(s===0)r!==null&&Hl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Hl(r),t===1)e.tag===0?Vm(Uc.bind(null,e)):xd(Uc.bind(null,e)),Dm(function(){!(W&6)&&Qt()}),r=null;else{switch(Ju(s)){case 1:r=Va;break;case 4:r=qu;break;case 16:r=Qn;break;case 536870912:r=Hu;break;default:r=Qn}r=gh(r,ch.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ch(e,t){if(Bn=-1,Vn=0,W&6)throw Error(P(327));var r=e.callbackNode;if(Wr()&&e.callbackNode!==r)return null;var s=Yn(e,e===ge?xe:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=pi(e,s);else{t=s;var n=W;W|=2;var i=dh();(ge!==e||xe!==t)&&(gt=null,es=ue()+500,lr(e,t));do try{up();break}catch(l){uh(e,l)}while(1);rl(),hi.current=i,W=n,de!==null?t=0:(ge=null,xe=0,t=fe)}if(t!==0){if(t===2&&(n=Bo(e),n!==0&&(s=n,t=ga(e,n))),t===1)throw r=Qs,lr(e,0),Rt(e,s),ze(e,ue()),r;if(t===6)Rt(e,s);else{if(n=e.current.alternate,!(s&30)&&!lp(n)&&(t=pi(e,s),t===2&&(i=Bo(e),i!==0&&(s=i,t=ga(e,i))),t===1))throw r=Qs,lr(e,0),Rt(e,s),ze(e,ue()),r;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(P(345));case 2:rr(e,Re,gt);break;case 3:if(Rt(e,s),(s&130023424)===s&&(t=yl+500-ue(),10<t)){if(Yn(e,0)!==0)break;if(n=e.suspendedLanes,(n&s)!==s){Te(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Qo(rr.bind(null,e,Re,gt),t);break}rr(e,Re,gt);break;case 4:if(Rt(e,s),(s&4194240)===s)break;for(t=e.eventTimes,n=-1;0<s;){var a=31-ot(s);i=1<<a,a=t[a],a>n&&(n=a),s&=~i}if(s=n,s=ue()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*ap(s/1960))-s,10<s){e.timeoutHandle=Qo(rr.bind(null,e,Re,gt),s);break}rr(e,Re,gt);break;case 5:rr(e,Re,gt);break;default:throw Error(P(329))}}}return ze(e,ue()),e.callbackNode===r?ch.bind(null,e):null}function ga(e,t){var r=Ts;return e.current.memoizedState.isDehydrated&&(lr(e,t).flags|=256),e=pi(e,t),e!==2&&(t=Re,Re=r,t!==null&&ya(t)),e}function ya(e){Re===null?Re=e:Re.push.apply(Re,e)}function lp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var n=r[s],i=n.getSnapshot;n=n.value;try{if(!lt(i(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Rt(e,t){for(t&=~gl,t&=~Pi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),s=1<<r;e[r]=-1,t&=~s}}function Uc(e){if(W&6)throw Error(P(327));Wr();var t=Yn(e,0);if(!(t&1))return ze(e,ue()),null;var r=pi(e,t);if(e.tag!==0&&r===2){var s=Bo(e);s!==0&&(t=s,r=ga(e,s))}if(r===1)throw r=Qs,lr(e,0),Rt(e,t),ze(e,ue()),r;if(r===6)throw Error(P(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,rr(e,Re,gt),ze(e,ue()),null}function xl(e,t){var r=W;W|=1;try{return e(t)}finally{W=r,W===0&&(es=ue()+500,Si&&Qt())}}function pr(e){Lt!==null&&Lt.tag===0&&!(W&6)&&Wr();var t=W;W|=1;var r=Ge.transition,s=K;try{if(Ge.transition=null,K=1,e)return e()}finally{K=s,Ge.transition=r,W=t,!(W&6)&&Qt()}}function vl(){De=Mr.current,re(Mr)}function lr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,zm(r)),de!==null)for(r=de.return;r!==null;){var s=r;switch(Za(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ri();break;case 3:Xr(),re(Le),re(ke),ll();break;case 5:al(s);break;case 4:Xr();break;case 13:re(ie);break;case 19:re(ie);break;case 10:sl(s.type._context);break;case 22:case 23:vl()}r=r.return}if(ge=e,de=e=qt(e.current,null),xe=De=t,fe=0,Qs=null,gl=Pi=mr=0,Re=Ts=null,or!==null){for(t=0;t<or.length;t++)if(r=or[t],s=r.interleaved,s!==null){r.interleaved=null;var n=s.next,i=r.pending;if(i!==null){var a=i.next;i.next=n,s.next=a}r.pending=s}or=null}return e}function uh(e,t){do{var r=de;try{if(rl(),Dn.current=di,ui){for(var s=oe.memoizedState;s!==null;){var n=s.queue;n!==null&&(n.pending=null),s=s.next}ui=!1}if(fr=0,pe=he=oe=null,Cs=!1,Js=0,pl.current=null,r===null||r.return===null){fe=1,Qs=t,de=null;break}e:{var i=e,a=r.return,l=r,c=t;if(t=xe,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=kc(a);if(x!==null){x.flags&=-257,Nc(x,a,l,i,t),x.mode&1&&jc(i,u,t),t=x,c=u;var y=t.updateQueue;if(y===null){var _=new Set;_.add(c),t.updateQueue=_}else y.add(c);break e}else{if(!(t&1)){jc(i,u,t),wl();break e}c=Error(P(426))}}else if(ne&&l.mode&1){var S=kc(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),Nc(S,a,l,i,t),el(Zr(c,l));break e}}i=c=Zr(c,l),fe!==4&&(fe=2),Ts===null?Ts=[i]:Ts.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=Jd(i,c,t);yc(i,m);break e;case 1:l=c;var p=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Bt===null||!Bt.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=Gd(i,l,t);yc(i,j);break e}}i=i.return}while(i!==null)}fh(r)}catch(w){t=w,de===r&&r!==null&&(de=r=r.return);continue}break}while(1)}function dh(){var e=hi.current;return hi.current=di,e===null?di:e}function wl(){(fe===0||fe===3||fe===2)&&(fe=4),ge===null||!(mr&268435455)&&!(Pi&268435455)||Rt(ge,xe)}function pi(e,t){var r=W;W|=2;var s=dh();(ge!==e||xe!==t)&&(gt=null,lr(e,t));do try{cp();break}catch(n){uh(e,n)}while(1);if(rl(),W=r,hi.current=s,de!==null)throw Error(P(261));return ge=null,xe=0,fe}function cp(){for(;de!==null;)hh(de)}function up(){for(;de!==null&&!$f();)hh(de)}function hh(e){var t=ph(e.alternate,e,De);e.memoizedProps=e.pendingProps,t===null?fh(e):de=t,pl.current=null}function fh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=sp(r,t),r!==null){r.flags&=32767,de=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fe=6,de=null;return}}else if(r=rp(r,t,De),r!==null){de=r;return}if(t=t.sibling,t!==null){de=t;return}de=t=e}while(t!==null);fe===0&&(fe=5)}function rr(e,t,r){var s=K,n=Ge.transition;try{Ge.transition=null,K=1,dp(e,t,r,s)}finally{Ge.transition=n,K=s}return null}function dp(e,t,r,s){do Wr();while(Lt!==null);if(W&6)throw Error(P(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(P(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Hf(e,i),e===ge&&(de=ge=null,xe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sn||(Sn=!0,gh(Qn,function(){return Wr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ge.transition,Ge.transition=null;var a=K;K=1;var l=W;W|=4,pl.current=null,ip(e,r),ah(r,e),Am(Go),Xn=!!Jo,Go=Jo=null,e.current=r,op(r),Lf(),W=l,K=a,Ge.transition=i}else e.current=r;if(Sn&&(Sn=!1,Lt=e,mi=n),i=e.pendingLanes,i===0&&(Bt=null),Df(r.stateNode),ze(e,ue()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],s(n.value,{componentStack:n.stack,digest:n.digest});if(fi)throw fi=!1,e=ma,ma=null,e;return mi&1&&e.tag!==0&&Wr(),i=e.pendingLanes,i&1?e===pa?Ps++:(Ps=0,pa=e):Ps=0,Qt(),null}function Wr(){if(Lt!==null){var e=Ju(mi),t=Ge.transition,r=K;try{if(Ge.transition=null,K=16>e?16:e,Lt===null)var s=!1;else{if(e=Lt,Lt=null,mi=0,W&6)throw Error(P(331));var n=W;for(W|=4,$=e.current;$!==null;){var i=$,a=i.child;if($.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for($=u;$!==null;){var d=$;switch(d.tag){case 0:case 11:case 15:Es(8,d,i)}var h=d.child;if(h!==null)h.return=d,$=h;else for(;$!==null;){d=$;var f=d.sibling,x=d.return;if(nh(d),d===u){$=null;break}if(f!==null){f.return=x,$=f;break}$=x}}}var y=i.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var S=_.sibling;_.sibling=null,_=S}while(_!==null)}}$=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,$=a;else e:for(;$!==null;){if(i=$,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Es(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,$=m;break e}$=i.return}}var p=e.current;for($=p;$!==null;){a=$;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,$=g;else e:for(a=p;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ti(9,l)}}catch(w){le(l,l.return,w)}if(l===a){$=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,$=j;break e}$=l.return}}if(W=n,Qt(),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(bi,e)}catch{}s=!0}return s}finally{K=r,Ge.transition=t}}return!1}function zc(e,t,r){t=Zr(r,t),t=Jd(e,t,1),e=Ft(e,t,1),t=Te(),e!==null&&(sn(e,1,t),ze(e,t))}function le(e,t,r){if(e.tag===3)zc(e,e,r);else for(;t!==null;){if(t.tag===3){zc(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Bt===null||!Bt.has(s))){e=Zr(r,e),e=Gd(t,e,1),t=Ft(t,e,1),e=Te(),t!==null&&(sn(t,1,e),ze(t,e));break}}t=t.return}}function hp(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Te(),e.pingedLanes|=e.suspendedLanes&r,ge===e&&(xe&r)===r&&(fe===4||fe===3&&(xe&130023424)===xe&&500>ue()-yl?lr(e,0):gl|=r),ze(e,t)}function mh(e,t){t===0&&(e.mode&1?(t=gn,gn<<=1,!(gn&130023424)&&(gn=4194304)):t=1);var r=Te();e=kt(e,t),e!==null&&(sn(e,t,r),ze(e,r))}function fp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),mh(e,r)}function mp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(P(314))}s!==null&&s.delete(t),mh(e,r)}var ph;ph=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Le.current)$e=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return $e=!1,tp(e,t,r);$e=!!(e.flags&131072)}else $e=!1,ne&&t.flags&1048576&&vd(t,ii,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Fn(e,t),e=t.pendingProps;var n=Kr(t,ke.current);Hr(t,r),n=ul(null,t,s,e,n,r);var i=dl();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ue(s)?(i=!0,si(t)):i=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,il(t),n.updater=Ei,t.stateNode=n,n._reactInternals=t,sa(t,s,e,r),t=oa(null,t,s,!0,i,r)):(t.tag=0,ne&&i&&Xa(t),Ee(null,t,n,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Fn(e,t),e=t.pendingProps,n=s._init,s=n(s._payload),t.type=s,n=t.tag=gp(s),e=tt(s,e),n){case 0:t=ia(null,t,s,e,r);break e;case 1:t=Ec(null,t,s,e,r);break e;case 11:t=Sc(null,t,s,e,r);break e;case 14:t=Cc(null,t,s,tt(s.type,e),r);break e}throw Error(P(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:tt(s,n),ia(e,t,s,n,r);case 1:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:tt(s,n),Ec(e,t,s,n,r);case 3:e:{if(Xd(t),e===null)throw Error(P(387));s=t.pendingProps,i=t.memoizedState,n=i.element,Nd(e,t),li(t,s,null,r);var a=t.memoizedState;if(s=a.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){n=Zr(Error(P(423)),t),t=Tc(e,t,s,r,n);break e}else if(s!==n){n=Zr(Error(P(424)),t),t=Tc(e,t,s,r,n);break e}else for(Me=Mt(t.stateNode.containerInfo.firstChild),Fe=t,ne=!0,nt=null,r=jd(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Qr(),s===n){t=Nt(e,t,r);break e}Ee(e,t,s,r)}t=t.child}return t;case 5:return Sd(t),e===null&&ea(t),s=t.type,n=t.pendingProps,i=e!==null?e.memoizedProps:null,a=n.children,Ko(s,n)?a=null:i!==null&&Ko(s,i)&&(t.flags|=32),Yd(e,t),Ee(e,t,a,r),t.child;case 6:return e===null&&ea(t),null;case 13:return Zd(e,t,r);case 4:return ol(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Yr(t,null,s,r):Ee(e,t,s,r),t.child;case 11:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:tt(s,n),Sc(e,t,s,n,r);case 7:return Ee(e,t,t.pendingProps,r),t.child;case 8:return Ee(e,t,t.pendingProps.children,r),t.child;case 12:return Ee(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,i=t.memoizedProps,a=n.value,ee(oi,s._currentValue),s._currentValue=a,i!==null)if(lt(i.value,a)){if(i.children===n.children&&!Le.current){t=Nt(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=bt(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ta(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(P(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),ta(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ee(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,Hr(t,r),n=Qe(n),s=s(n),t.flags|=1,Ee(e,t,s,r),t.child;case 14:return s=t.type,n=tt(s,t.pendingProps),n=tt(s.type,n),Cc(e,t,s,n,r);case 15:return Kd(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:tt(s,n),Fn(e,t),t.tag=1,Ue(s)?(e=!0,si(t)):e=!1,Hr(t,r),Wd(t,s,n),sa(t,s,n,r),oa(null,t,s,!0,e,r);case 19:return eh(e,t,r);case 22:return Qd(e,t,r)}throw Error(P(156,t.tag))};function gh(e,t){return Vu(e,t)}function pp(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(e,t,r,s){return new pp(e,t,r,s)}function bl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gp(e){if(typeof e=="function")return bl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ma)return 11;if(e===Fa)return 14}return 2}function qt(e,t){var r=e.alternate;return r===null?(r=Je(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function qn(e,t,r,s,n,i){var a=2;if(s=e,typeof e=="function")bl(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Pr:return cr(r.children,n,i,t);case Da:a=8,n|=8;break;case Co:return e=Je(12,r,t,n|2),e.elementType=Co,e.lanes=i,e;case Eo:return e=Je(13,r,t,n),e.elementType=Eo,e.lanes=i,e;case To:return e=Je(19,r,t,n),e.elementType=To,e.lanes=i,e;case Su:return Ai(r,n,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ku:a=10;break e;case Nu:a=9;break e;case Ma:a=11;break e;case Fa:a=14;break e;case Tt:a=16,s=null;break e}throw Error(P(130,e==null?e:typeof e,""))}return t=Je(a,r,t,n),t.elementType=e,t.type=s,t.lanes=i,t}function cr(e,t,r,s){return e=Je(7,e,s,t),e.lanes=r,e}function Ai(e,t,r,s){return e=Je(22,e,s,t),e.elementType=Su,e.lanes=r,e.stateNode={isHidden:!1},e}function go(e,t,r){return e=Je(6,e,null,t),e.lanes=r,e}function yo(e,t,r){return t=Je(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function yp(e,t,r,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qi(0),this.expirationTimes=Qi(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qi(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function _l(e,t,r,s,n,i,a,l,c){return e=new yp(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Je(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},il(i),e}function xp(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function yh(e){if(!e)return Wt;e=e._reactInternals;e:{if(vr(e)!==e||e.tag!==1)throw Error(P(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ue(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(P(171))}if(e.tag===1){var r=e.type;if(Ue(r))return yd(e,r,t)}return t}function xh(e,t,r,s,n,i,a,l,c){return e=_l(r,s,!0,e,n,i,a,l,c),e.context=yh(null),r=e.current,s=Te(),n=Vt(r),i=bt(s,n),i.callback=t??null,Ft(r,i,n),e.current.lanes=n,sn(e,n,s),ze(e,s),e}function Ii(e,t,r,s){var n=t.current,i=Te(),a=Vt(n);return r=yh(r),t.context===null?t.context=r:t.pendingContext=r,t=bt(i,a),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Ft(n,t,a),e!==null&&(at(e,n,a,i),zn(e,n,a)),a}function gi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Dc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function jl(e,t){Dc(e,t),(e=e.alternate)&&Dc(e,t)}function vp(){return null}var vh=typeof reportError=="function"?reportError:function(e){console.error(e)};function kl(e){this._internalRoot=e}Ri.prototype.render=kl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(P(409));Ii(e,t,null,null)};Ri.prototype.unmount=kl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pr(function(){Ii(null,e,null,null)}),t[jt]=null}};function Ri(e){this._internalRoot=e}Ri.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<It.length&&t!==0&&t<It[r].priority;r++);It.splice(r,0,e),r===0&&Xu(e)}};function Nl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Oi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Mc(){}function wp(e,t,r,s,n){if(n){if(typeof s=="function"){var i=s;s=function(){var u=gi(a);i.call(u)}}var a=xh(t,s,e,0,null,!1,!1,"",Mc);return e._reactRootContainer=a,e[jt]=a.current,Bs(e.nodeType===8?e.parentNode:e),pr(),a}for(;n=e.lastChild;)e.removeChild(n);if(typeof s=="function"){var l=s;s=function(){var u=gi(c);l.call(u)}}var c=_l(e,0,!1,null,null,!1,!1,"",Mc);return e._reactRootContainer=c,e[jt]=c.current,Bs(e.nodeType===8?e.parentNode:e),pr(function(){Ii(t,c,r,s)}),c}function $i(e,t,r,s,n){var i=r._reactRootContainer;if(i){var a=i;if(typeof n=="function"){var l=n;n=function(){var c=gi(a);l.call(c)}}Ii(t,a,e,n)}else a=wp(r,t,e,n,s);return gi(a)}Gu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=vs(t.pendingLanes);r!==0&&(qa(t,r|1),ze(t,ue()),!(W&6)&&(es=ue()+500,Qt()))}break;case 13:pr(function(){var s=kt(e,1);if(s!==null){var n=Te();at(s,e,1,n)}}),jl(e,1)}};Ha=function(e){if(e.tag===13){var t=kt(e,134217728);if(t!==null){var r=Te();at(t,e,134217728,r)}jl(e,134217728)}};Ku=function(e){if(e.tag===13){var t=Vt(e),r=kt(e,t);if(r!==null){var s=Te();at(r,e,t,s)}jl(e,t)}};Qu=function(){return K};Yu=function(e,t){var r=K;try{return K=e,t()}finally{K=r}};Do=function(e,t,r){switch(t){case"input":if(Io(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var n=Ni(s);if(!n)throw Error(P(90));Eu(s),Io(s,n)}}}break;case"textarea":Pu(e,r);break;case"select":t=r.value,t!=null&&Fr(e,!!r.multiple,t,!1)}};Uu=xl;zu=pr;var bp={usingClientEntryPoint:!1,Events:[on,Or,Ni,$u,Lu,xl]},ps={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_p={bundleType:ps.bundleType,version:ps.version,rendererPackageName:ps.rendererPackageName,rendererConfig:ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:St.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fu(e),e===null?null:e.stateNode},findFiberByHostInstance:ps.findFiberByHostInstance||vp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cn=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cn.isDisabled&&Cn.supportsFiber)try{bi=Cn.inject(_p),ft=Cn}catch{}}Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bp;Ve.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nl(t))throw Error(P(200));return xp(e,t,null,r)};Ve.createRoot=function(e,t){if(!Nl(e))throw Error(P(299));var r=!1,s="",n=vh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=_l(e,1,!1,null,null,r,!1,s,n),e[jt]=t.current,Bs(e.nodeType===8?e.parentNode:e),new kl(t)};Ve.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(P(188)):(e=Object.keys(e).join(","),Error(P(268,e)));return e=Fu(t),e=e===null?null:e.stateNode,e};Ve.flushSync=function(e){return pr(e)};Ve.hydrate=function(e,t,r){if(!Oi(t))throw Error(P(200));return $i(null,e,t,!0,r)};Ve.hydrateRoot=function(e,t,r){if(!Nl(e))throw Error(P(405));var s=r!=null&&r.hydratedSources||null,n=!1,i="",a=vh;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=xh(t,null,e,1,r??null,n,!1,i,a),e[jt]=t.current,Bs(e),s)for(e=0;e<s.length;e++)r=s[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new Ri(t)};Ve.render=function(e,t,r){if(!Oi(t))throw Error(P(200));return $i(null,e,t,!1,r)};Ve.unmountComponentAtNode=function(e){if(!Oi(e))throw Error(P(40));return e._reactRootContainer?(pr(function(){$i(null,null,e,!1,function(){e._reactRootContainer=null,e[jt]=null})}),!0):!1};Ve.unstable_batchedUpdates=xl;Ve.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Oi(r))throw Error(P(200));if(e==null||e._reactInternals===void 0)throw Error(P(38));return $i(e,t,r,!1,s)};Ve.version="18.3.1-next-f1338f8080-20240426";function wh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wh)}catch(e){console.error(e)}}wh(),wu.exports=Ve;var jp=wu.exports,Fc=jp;No.createRoot=Fc.createRoot,No.hydrateRoot=Fc.hydrateRoot;const kp="modulepreload",Np=function(e){return"/"+e},Bc={},ln=function(t,r,s){if(!r||r.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=Np(i),i in Bc)return;Bc[i]=!0;const a=i.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!s)for(let d=n.length-1;d>=0;d--){const h=n[d];if(h.href===i&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":kp,a||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),a)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},Sp=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ln(()=>Promise.resolve().then(()=>os),void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)};class Sl extends Error{constructor(t,r="FunctionsError",s){super(t),this.name=r,this.context=s}}class Cp extends Sl{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ep extends Sl{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Tp extends Sl{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var xa;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(xa||(xa={}));var Pp=globalThis&&globalThis.__awaiter||function(e,t,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};class Ap{constructor(t,{headers:r={},customFetch:s,region:n=xa.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=Sp(s)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var s;return Pp(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:a}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;a&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(l["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(l["Content-Type"]="application/json",u=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${t}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),n),body:u}).catch(y=>{throw new Cp(y)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Ep(d);if(!d.ok)throw new Tp(d);let f=((s=d.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),x;return f==="application/json"?x=yield d.json():f==="application/octet-stream"?x=yield d.blob():f==="text/event-stream"?x=d:f==="multipart/form-data"?x=yield d.formData():x=yield d.text(),{data:x,error:null}}catch(n){return{data:null,error:n}}})}}var Oe={},Cl={},Li={},cn={},Ui={},zi={},Ip=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ts=Ip();const Rp=ts.fetch,bh=ts.fetch.bind(ts),_h=ts.Headers,Op=ts.Request,$p=ts.Response,os=Object.freeze(Object.defineProperty({__proto__:null,Headers:_h,Request:Op,Response:$p,default:bh,fetch:Rp},Symbol.toStringTag,{value:"Module"})),Lp=Qh(os);var Di={};Object.defineProperty(Di,"__esModule",{value:!0});let Up=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Di.default=Up;var jh=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zi,"__esModule",{value:!0});const zp=jh(Lp),Dp=jh(Di);let Mp=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=zp.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const s=this.fetch;let n=s(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let u=null,d=null,h=null,f=i.status,x=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=m:d=JSON.parse(m))}const _=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),S=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");_&&S&&S.length>1&&(h=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,x="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const _=await i.text();try{u=JSON.parse(_),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,x="OK")}catch{i.status===404&&_===""?(f=204,x="No Content"):u={message:_}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,x="OK"),u&&this.shouldThrowOnError)throw new Dp.default(u)}return{error:u,data:d,count:h,status:f,statusText:x}});return this.shouldThrowOnError||(n=n.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,r)}returns(){return this}overrideTypes(){return this}};zi.default=Mp;var Fp=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ui,"__esModule",{value:!0});const Bp=Fp(zi);let Vp=class extends Bp.default{select(t){let r=!1;const s=(t??"*").split("").map(n=>/\s/.test(n)&&!r?"":(n==='"'&&(r=!r),n)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:s=r}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,r,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ui.default=Vp;var qp=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cn,"__esModule",{value:!0});const Hp=qp(Ui);let Wp=class extends Hp.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const s=Array.from(new Set(r)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const a=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${i}fts${a}.${r}`),this}match(t){return Object.entries(t).forEach(([r,s])=>{this.url.searchParams.append(r,`eq.${s}`)}),this}not(t,r,s){return this.url.searchParams.append(t,`not.${r}.${s}`),this}or(t,{foreignTable:r,referencedTable:s=r}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,r,s){return this.url.searchParams.append(t,`${r}.${s}`),this}};cn.default=Wp;var Jp=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Li,"__esModule",{value:!0});const gs=Jp(cn);let Gp=class{constructor(t,{headers:r={},schema:s,fetch:n}){this.url=t,this.headers=r,this.schema=s,this.fetch=n}select(t,{head:r=!1,count:s}={}){const n=r?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),s&&(this.headers.Prefer=`count=${s}`),new gs.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:s=!0}={}){const n="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),s||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new gs.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${s?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new gs.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const s="PATCH",n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),r&&n.push(`count=${r}`),this.headers.Prefer=n.join(","),new gs.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",s=[];return t&&s.push(`count=${t}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new gs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Li.default=Gp;var Mi={},Fi={};Object.defineProperty(Fi,"__esModule",{value:!0});Fi.version=void 0;Fi.version="0.0.0-automated";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.DEFAULT_HEADERS=void 0;const Kp=Fi;Mi.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Kp.version}`};var kh=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Cl,"__esModule",{value:!0});const Qp=kh(Li),Yp=kh(cn),Xp=Mi;let Zp=class Nh{constructor(t,{headers:r={},schema:s,fetch:n}={}){this.url=t,this.headers=Object.assign(Object.assign({},Xp.DEFAULT_HEADERS),r),this.schemaName=s,this.fetch=n}from(t){const r=new URL(`${this.url}/${t}`);return new Qp.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Nh(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:s=!1,get:n=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;s||n?(a=s?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(a="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Yp.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Cl.default=Zp;var as=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.PostgrestError=Oe.PostgrestBuilder=Oe.PostgrestTransformBuilder=Oe.PostgrestFilterBuilder=Oe.PostgrestQueryBuilder=Oe.PostgrestClient=void 0;const Sh=as(Cl);Oe.PostgrestClient=Sh.default;const Ch=as(Li);Oe.PostgrestQueryBuilder=Ch.default;const Eh=as(cn);Oe.PostgrestFilterBuilder=Eh.default;const Th=as(Ui);Oe.PostgrestTransformBuilder=Th.default;const Ph=as(zi);Oe.PostgrestBuilder=Ph.default;const Ah=as(Di);Oe.PostgrestError=Ah.default;var eg=Oe.default={PostgrestClient:Sh.default,PostgrestQueryBuilder:Ch.default,PostgrestFilterBuilder:Eh.default,PostgrestTransformBuilder:Th.default,PostgrestBuilder:Ph.default,PostgrestError:Ah.default};const{PostgrestClient:tg,PostgrestQueryBuilder:ex,PostgrestFilterBuilder:tx,PostgrestTransformBuilder:rx,PostgrestBuilder:sx,PostgrestError:nx}=eg;let va;typeof window>"u"?va=require("ws"):va=window.WebSocket;const rg=va,sg="2.11.10",ng={"X-Client-Info":`realtime-js/${sg}`},ig="1.0.0",Ih=1e4,og=1e3;var Jr;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Jr||(Jr={}));var Ce;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ce||(Ce={}));var st;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(st||(st={}));var wa;(function(e){e.websocket="websocket"})(wa||(wa={}));var nr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(nr||(nr={}));class ag{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),s=new TextDecoder;return this._decodeBroadcast(t,r,s)}_decodeBroadcast(t,r,s){const n=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=s.decode(t.slice(a,a+n));a=a+n;const c=s.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(s.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Rh{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Z;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Z||(Z={}));const Vc=(e,t,r={})=>{var s;const n=(s=r.skipTypes)!==null&&s!==void 0?s:[];return Object.keys(t).reduce((i,a)=>(i[a]=lg(a,e,t,n),i),{})},lg=(e,t,r,s)=>{const n=t.find(l=>l.name===e),i=n==null?void 0:n.type,a=r[e];return i&&!s.includes(i)?Oh(i,a):ba(a)},Oh=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return hg(t,r)}switch(e){case Z.bool:return cg(t);case Z.float4:case Z.float8:case Z.int2:case Z.int4:case Z.int8:case Z.numeric:case Z.oid:return ug(t);case Z.json:case Z.jsonb:return dg(t);case Z.timestamp:return fg(t);case Z.abstime:case Z.date:case Z.daterange:case Z.int4range:case Z.int8range:case Z.money:case Z.reltime:case Z.text:case Z.time:case Z.timestamptz:case Z.timetz:case Z.tsrange:case Z.tstzrange:return ba(t);default:return ba(t)}},ba=e=>e,cg=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},ug=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},dg=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},hg=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,s=e[r];if(e[0]==="{"&&s==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>Oh(t,l))}return e},fg=e=>typeof e=="string"?e.replace(" ","T"):e,$h=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class xo{constructor(t,r,s={},n=Ih){this.channel=t,this.event=r,this.payload=s,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var s;return this._hasReceived(t)&&r((s=this.receivedResp)===null||s===void 0?void 0:s.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(s=>s.status===t).forEach(s=>s.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var qc;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(qc||(qc={}));class As{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=As.syncState(this.state,n,i,a),this.pendingDiffs.forEach(c=>{this.state=As.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(s.diff,{},n=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=As.syncDiff(this.state,n,i,a),l())}),this.onJoin((n,i,a)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:a})}),this.onLeave((n,i,a)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,s,n){const i=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(S=>S.presence_ref),x=h.map(S=>S.presence_ref),y=d.filter(S=>x.indexOf(S.presence_ref)<0),_=h.filter(S=>f.indexOf(S.presence_ref)<0);y.length>0&&(l[u]=y),_.length>0&&(c[u]=_)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},s,n)}static syncDiff(t,r,s,n){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return s||(s=()=>{}),n||(n=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(x=>x.presence_ref),f=d.filter(x=>h.indexOf(x.presence_ref)<0);t[l].unshift(...f)}s(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,n(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(s=>r(s,t[s]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,s)=>{const n=t[s];return"metas"in n?r[s]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[s]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Hc;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Hc||(Hc={}));var Wc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Wc||(Wc={}));var yt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(yt||(yt={}));class El{constructor(t,r={config:{}},s){this.topic=t,this.params=r,this.socket=s,this.bindings={},this.state=Ce.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new xo(this,st.join,this.params,this.timeout),this.rejoinTimer=new Rh(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ce.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ce.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ce.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new As(this),this.broadcastEndpointURL=$h(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var s,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:l}}=this.params;this._onError(d=>t==null?void 0:t(yt.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(yt.CLOSED));const c={},u={broadcast:i,presence:a,postgres_changes:(n=(s=this.bindings.postgres_changes)===null||s===void 0?void 0:s.map(d=>d.filter))!==null&&n!==void 0?n:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(yt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,x=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,y=[];for(let _=0;_<x;_++){const S=f[_],{filter:{event:m,schema:p,table:g,filter:j}}=S,w=d&&d[_];if(w&&w.event===m&&w.schema===p&&w.table===g&&w.filter===j)y.push(Object.assign(Object.assign({},S),{id:w.id}));else{this.unsubscribe(),this.state=Ce.errored,t==null||t(yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(yt.SUBSCRIBED);return}}).receive("error",d=>{this.state=Ce.errored,t==null||t(yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,s){return this._on(t,r,s)}async send(t,r={}){var s,n;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ce.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(s=>{const n=new xo(this,st.leave,{},t);n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,s){const n=new AbortController,i=setTimeout(()=>n.abort(),s),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),a}_push(t,r,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new xo(this,t,r,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(t,r,s){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,s){var n,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=st;if(s&&[l,c,u,d].indexOf(a)>=0&&s!==this._joinRef())return;let f=this._onMessage(a,r,s);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(x=>{var y,_,S;return((y=x.filter)===null||y===void 0?void 0:y.event)==="*"||((S=(_=x.filter)===null||_===void 0?void 0:_.event)===null||S===void 0?void 0:S.toLocaleLowerCase())===a}).map(x=>x.callback(f,s)):(i=this.bindings[a])===null||i===void 0||i.filter(x=>{var y,_,S,m,p,g;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in x){const j=x.id,w=(y=x.filter)===null||y===void 0?void 0:y.event;return j&&((_=r.ids)===null||_===void 0?void 0:_.includes(j))&&(w==="*"||(w==null?void 0:w.toLocaleLowerCase())===((S=r.data)===null||S===void 0?void 0:S.type.toLocaleLowerCase()))}else{const j=(p=(m=x==null?void 0:x.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return j==="*"||j===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===a}).map(x=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:_,table:S,commit_timestamp:m,type:p,errors:g}=y;f=Object.assign(Object.assign({},{schema:_,table:S,commit_timestamp:m,eventType:p,new:{},old:{},errors:g}),this._getPayloadRecords(y))}x.callback(f,s)})}_isClosed(){return this.state===Ce.closed}_isJoined(){return this.state===Ce.joined}_isJoining(){return this.state===Ce.joining}_isLeaving(){return this.state===Ce.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,s){const n=t.toLocaleLowerCase(),i={type:n,filter:r,callback:s};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===s&&El.isEqual(n.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const s in t)if(t[s]!==r[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(st.close,{},t)}_onError(t){this._on(st.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ce.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Vc(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Vc(t.columns,t.old_record)),r}}const Jc=()=>{},mg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class pg{constructor(t,r){var s;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=ng,this.params={},this.timeout=Ih,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Jc,this.ref=0,this.logger=Jc,this.conn=null,this.sendBuffer=[],this.serializer=new ag,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...l)=>ln(()=>Promise.resolve().then(()=>os),void 0).then(({default:c})=>c(...l)):a=fetch,(...l)=>a(...l)},this.endPoint=`${t}/${wa.websocket}`,this.httpEndpoint=$h(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const n=(s=r==null?void 0:r.params)===null||s===void 0?void 0:s.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,a)=>a(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Rh(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=rg),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new gg(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ig}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(s=>s.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels=this.channels.filter(s=>s._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,s){this.logger(t,r,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Jr.connecting:return nr.Connecting;case Jr.open:return nr.Open;case Jr.closing:return nr.Closing;default:return nr.Closed}}isConnected(){return this.connectionState()===nr.Open}channel(t,r={config:{}}){const s=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===s);if(n)return n;{const i=new El(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:s,payload:n,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${s} (${i})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(s=>{r&&s.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),s.joinedOnce&&s._isJoined()&&s._push(st.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(og,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(s=>s.topic===t&&(s._isJoined()||s._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:s,event:n,payload:i,ref:a}=r;s==="phoenix"&&n==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${s} ${n} ${a&&"("+a+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(s)).forEach(l=>l._trigger(n,i,a)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(st.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const s=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${s}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const s=new Blob([mg],{type:"application/javascript"});r=URL.createObjectURL(s)}return r}}class gg{constructor(t,r,s){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Jr.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=s.close}}class Tl extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function me(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class yg extends Tl{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class _a extends Tl{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var xg=globalThis&&globalThis.__awaiter||function(e,t,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};const Lh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ln(()=>Promise.resolve().then(()=>os),void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},vg=()=>xg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ln(()=>Promise.resolve().then(()=>os),void 0)).Response:Response}),ja=e=>{if(Array.isArray(e))return e.map(r=>ja(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,s])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=ja(s)}),t};var wr=globalThis&&globalThis.__awaiter||function(e,t,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};const vo=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wg=(e,t,r)=>wr(void 0,void 0,void 0,function*(){const s=yield vg();e instanceof s&&!(r!=null&&r.noResolveJson)?e.json().then(n=>{t(new yg(vo(n),e.status||500))}).catch(n=>{t(new _a(vo(n),n))}):t(new _a(vo(e),e))}),bg=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s&&(n.body=JSON.stringify(s)),Object.assign(Object.assign({},n),r))};function un(e,t,r,s,n,i){return wr(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,bg(t,s,n,i)).then(c=>{if(!c.ok)throw c;return s!=null&&s.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>wg(c,l,s))})})}function yi(e,t,r,s){return wr(this,void 0,void 0,function*(){return un(e,"GET",t,r,s)})}function At(e,t,r,s,n){return wr(this,void 0,void 0,function*(){return un(e,"POST",t,s,n,r)})}function _g(e,t,r,s,n){return wr(this,void 0,void 0,function*(){return un(e,"PUT",t,s,n,r)})}function jg(e,t,r,s){return wr(this,void 0,void 0,function*(){return un(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}function Uh(e,t,r,s,n){return wr(this,void 0,void 0,function*(){return un(e,"DELETE",t,s,n,r)})}var Ie=globalThis&&globalThis.__awaiter||function(e,t,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};const kg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ng{constructor(t,r={},s,n){this.url=t,this.headers=r,this.bucketId=s,this.fetch=Lh(n)}uploadOrUpdate(t,r,s,n){return Ie(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Gc),n);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&s instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",s)):typeof FormData<"u"&&s instanceof FormData?(i=s,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=s,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),n!=null&&n.headers&&(l=Object.assign(Object.assign({},l),n.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield h.json();return h.ok?{data:{path:u,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(me(i))return{data:null,error:i};throw i}})}upload(t,r,s){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,s)})}uploadToSignedUrl(t,r,s,n){return Ie(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Gc.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&s instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",s)):typeof FormData<"u"&&s instanceof FormData?(c=s,c.append("cacheControl",u.cacheControl)):(c=s,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(me(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ie(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t);const n=Object.assign({},this.headers);r!=null&&r.upsert&&(n["x-upsert"]="true");const i=yield At(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:n}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Tl("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}update(t,r,s){return Ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,s)})}move(t,r,s){return Ie(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}copy(t,r,s){return Ie(this,void 0,void 0,function*(){try{return{data:{path:(yield At(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:s==null?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}createSignedUrl(t,r,s){return Ie(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield At(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},s!=null&&s.transform?{transform:s.transform}:{}),{headers:this.headers});const a=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}createSignedUrls(t,r,s){return Ie(this,void 0,void 0,function*(){try{const n=yield At(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:n.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}download(t,r){return Ie(this,void 0,void 0,function*(){const n=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield yi(this.fetch,`${this.url}/${n}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(me(l))return{data:null,error:l};throw l}})}info(t){return Ie(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const s=yield yi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ja(s),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}exists(t){return Ie(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield jg(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(me(s)&&s instanceof _a){const n=s.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:s}}throw s}})}getPublicUrl(t,r){const s=this._getFinalPath(t),n=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&n.push(c);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}remove(t){return Ie(this,void 0,void 0,function*(){try{return{data:yield Uh(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}list(t,r,s){return Ie(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},kg),r),{prefix:t||""});return{data:yield At(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},s),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const Sg="2.7.1",Cg={"X-Client-Info":`storage-js/${Sg}`};var kr=globalThis&&globalThis.__awaiter||function(e,t,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};class Eg{constructor(t,r={},s){this.url=t,this.headers=Object.assign(Object.assign({},Cg),r),this.fetch=Lh(s)}listBuckets(){return kr(this,void 0,void 0,function*(){try{return{data:yield yi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(me(t))return{data:null,error:t};throw t}})}getBucket(t){return kr(this,void 0,void 0,function*(){try{return{data:yield yi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return kr(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return kr(this,void 0,void 0,function*(){try{return{data:yield _g(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}emptyBucket(t){return kr(this,void 0,void 0,function*(){try{return{data:yield At(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}deleteBucket(t){return kr(this,void 0,void 0,function*(){try{return{data:yield Uh(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}}class Tg extends Eg{constructor(t,r={},s){super(t,r,s)}from(t){return new Ng(this.url,this.headers,t,this.fetch)}}const Pg="2.50.0";let bs="";typeof Deno<"u"?bs="deno":typeof document<"u"?bs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bs="react-native":bs="node";const Ag={"X-Client-Info":`supabase-js-${bs}/${Pg}`},Ig={headers:Ag},Rg={schema:"public"},Og={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$g={};var Lg=globalThis&&globalThis.__awaiter||function(e,t,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};const Ug=e=>{let t;return e?t=e:typeof fetch>"u"?t=bh:t=fetch,(...r)=>t(...r)},zg=()=>typeof Headers>"u"?_h:Headers,Dg=(e,t,r)=>{const s=Ug(r),n=zg();return(i,a)=>Lg(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new n(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),s(i,Object.assign(Object.assign({},a),{headers:u}))})};var Mg=globalThis&&globalThis.__awaiter||function(e,t,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};function Fg(e){return e.endsWith("/")?e:e+"/"}function Bg(e,t){var r,s;const{db:n,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),n),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(s=l==null?void 0:l.headers)!==null&&s!==void 0?s:{})}),accessToken:()=>Mg(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const zh="2.70.0",Er=30*1e3,ka=3,wo=ka*Er,Vg="http://localhost:9999",qg="supabase.auth.token",Hg={"X-Client-Info":`gotrue-js/${zh}`},Na="X-Supabase-Api-Version",Dh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Wg=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Jg=6e5;class Pl extends Error{constructor(t,r,s){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=s}}function F(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Gg extends Pl{constructor(t,r,s){super(t,r,s),this.name="AuthApiError",this.status=r,this.code=s}}function Kg(e){return F(e)&&e.name==="AuthApiError"}class Mh extends Pl{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Yt extends Pl{constructor(t,r,s,n){super(t,s,n),this.name=r,this.status=s}}class Et extends Yt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Qg(e){return F(e)&&e.name==="AuthSessionMissingError"}class En extends Yt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Tn extends Yt{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Pn extends Yt{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Yg(e){return F(e)&&e.name==="AuthImplicitGrantRedirectError"}class Kc extends Yt{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sa extends Yt{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function bo(e){return F(e)&&e.name==="AuthRetryableFetchError"}class Qc extends Yt{constructor(t,r,s){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=s}}class Is extends Yt{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const xi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Yc=` 	
\r=`.split(""),Xg=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Yc.length;t+=1)e[Yc[t].charCodeAt(0)]=-2;for(let t=0;t<xi.length;t+=1)e[xi[t].charCodeAt(0)]=t;return e})();function Xc(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(xi[s]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const s=t.queue>>t.queuedBits-6&63;r(xi[s]),t.queuedBits-=6}}function Fh(e,t,r){const s=Xg[e];if(s>-1)for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(s===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Zc(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},s={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=a=>{t0(a,s,r)};for(let a=0;a<e.length;a+=1)Fh(e.charCodeAt(a),n,i);return t.join("")}function Zg(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function e0(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const n=(s-55296)*1024&65535;s=(e.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}Zg(s,t)}}function t0(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let s=1;s<6;s+=1)if(!(e>>7-s&1)){t.utf8seq=s;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function r0(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};for(let n=0;n<e.length;n+=1)Fh(e.charCodeAt(n),r,s);return new Uint8Array(t)}function s0(e){const t=[];return e0(e,r=>t.push(r)),new Uint8Array(t)}function n0(e){const t=[],r={queue:0,queuedBits:0},s=n=>{t.push(n)};return e.forEach(n=>Xc(n,r,s)),Xc(null,r,s),t.join("")}function i0(e){return Math.round(Date.now()/1e3)+e}function o0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const et=()=>typeof window<"u"&&typeof document<"u",er={tested:!1,writable:!1},Rs=()=>{if(!et())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(er.tested)return er.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),er.tested=!0,er.writable=!0}catch{er.tested=!0,er.writable=!1}return er.writable};function a0(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return r.searchParams.forEach((s,n)=>{t[n]=s}),t}const Bh=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>ln(()=>Promise.resolve().then(()=>os),void 0).then(({default:s})=>s(...r)):t=fetch,(...r)=>t(...r)},l0=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Vh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},An=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},In=async(e,t)=>{await e.removeItem(t)};class Bi{constructor(){this.promise=new Bi.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Bi.promiseConstructor=Promise;function _o(e){const t=e.split(".");if(t.length!==3)throw new Is("Invalid JWT structure");for(let s=0;s<t.length;s++)if(!Wg.test(t[s]))throw new Is("JWT not in base64url format");return{header:JSON.parse(Zc(t[0])),payload:JSON.parse(Zc(t[1])),signature:r0(t[2]),raw:{header:t[0],payload:t[1]}}}async function c0(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function u0(e,t){return new Promise((s,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){s(a);return}}catch(a){if(!t(i,a)){n(a);return}}})()})}function d0(e){return("0"+e.toString(16)).substr(-2)}function h0(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*s));return n}return crypto.getRandomValues(t),Array.from(t,d0).join("")}async function f0(e){const r=new TextEncoder().encode(e),s=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(s);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function m0(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await f0(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Nr(e,t,r=!1){const s=h0();let n=s;r&&(n+="/PASSWORD_RECOVERY"),await Vh(e,`${t}-code-verifier`,n);const i=await m0(s);return[i,s===i?"plain":"s256"]}const p0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function g0(e){const t=e.headers.get(Na);if(!t||!t.match(p0))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function y0(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function x0(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const v0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sr(e){if(!v0.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var w0=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r};const sr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),b0=[502,503,504];async function eu(e){var t;if(!l0(e))throw new Sa(sr(e),0);if(b0.includes(e.status))throw new Sa(sr(e),e.status);let r;try{r=await e.json()}catch(i){throw new Mh(sr(i),i)}let s;const n=g0(e);if(n&&n.getTime()>=Dh["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?s=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(s=r.error_code),s){if(s==="weak_password")throw new Qc(sr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(s==="session_not_found")throw new Et}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Qc(sr(r),e.status,r.weak_password.reasons);throw new Gg(sr(r),e.status||500,s)}const _0=(e,t,r,s)=>{const n={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(s),Object.assign(Object.assign({},n),r))};async function V(e,t,r,s){var n;const i=Object.assign({},s==null?void 0:s.headers);i[Na]||(i[Na]=Dh["2024-01-01"].name),s!=null&&s.jwt&&(i.Authorization=`Bearer ${s.jwt}`);const a=(n=s==null?void 0:s.query)!==null&&n!==void 0?n:{};s!=null&&s.redirectTo&&(a.redirect_to=s.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await j0(e,t,r+l,{headers:i,noResolveJson:s==null?void 0:s.noResolveJson},{},s==null?void 0:s.body);return s!=null&&s.xform?s==null?void 0:s.xform(c):{data:Object.assign({},c),error:null}}async function j0(e,t,r,s,n,i){const a=_0(t,s,n,i);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new Sa(sr(c),0)}if(l.ok||await eu(l),s!=null&&s.noResolveJson)return l;try{return await l.json()}catch(c){await eu(c)}}function pt(e){var t;let r=null;C0(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=i0(e.expires_in)));const s=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:s},error:null}}function tu(e){const t=pt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,s)=>r&&typeof s=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ot(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function k0(e){return{data:e,error:null}}function N0(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i}=e,a=w0(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:s,redirect_to:n,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function S0(e){return e}function C0(e){return e.access_token&&e.refresh_token&&e.expires_in}const jo=["global","local","others"];var E0=globalThis&&globalThis.__rest||function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]]);return r};class T0{constructor({url:t="",headers:r={},fetch:s}){this.url=t,this.headers=r,this.fetch=Bh(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=jo[0]){if(jo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${jo.join(", ")}`);try{return await V(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(s){if(F(s))return{data:null,error:s};throw s}}async inviteUserByEmail(t,r={}){try{return await V(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ot})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async generateLink(t){try{const{options:r}=t,s=E0(t,["options"]),n=Object.assign(Object.assign({},s),r);return"newEmail"in s&&(n.new_email=s==null?void 0:s.newEmail,delete n.newEmail),await V(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:N0,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(F(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await V(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ot})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,s,n,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await V(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(s=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:S0});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,x=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return x.length>0&&(x.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),S=JSON.parse(y.split(";")[1].split("=")[1]);u[`${S}Page`]=_}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(F(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Sr(t);try{return await V(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ot})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Sr(t);try{return await V(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ot})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async deleteUser(t,r=!1){Sr(t);try{return await V(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ot})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async _listFactors(t){Sr(t.userId);try{const{data:r,error:s}=await V(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:s}}catch(r){if(F(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Sr(t.userId),Sr(t.id);try{return{data:await V(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}}}const P0={getItem:e=>Rs()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Rs()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Rs()&&globalThis.localStorage.removeItem(e)}};function ru(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function A0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Cr={debug:!!(globalThis&&Rs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class qh extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class I0 extends qh{}async function R0(e,t,r){Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async n=>{if(n){Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}else{if(t===0)throw Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new I0(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Cr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}A0();const O0={url:Vg,storageKey:qg,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Hg,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function su(e,t,r){return await r()}class Ys{constructor(t){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ys.nextInstanceID,Ys.nextInstanceID+=1,this.instanceID>0&&et()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},O0),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new T0({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=Bh(n.fetch),this.lock=n.lock||su,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:et()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=R0:this.lock=su,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:Rs()?this.storage=P0:(this.memoryStorage={},this.storage=ru(this.memoryStorage)):(this.memoryStorage={},this.storage=ru(this.memoryStorage)),et()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${zh}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=a0(window.location.href);let s="none";if(this._isImplicitGrantCallback(r)?s="implicit":await this._isPKCECallback(r)&&(s="pkce"),et()&&this.detectSessionInUrl&&s!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,s);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Yg(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return F(r)?{error:r}:{error:new Mh("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,s,n;try{const i=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(s=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:pt}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(F(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,s,n;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let x=null,y=null;this.flowType==="pkce"&&([x,y]=await Nr(this.storage,this.storageKey)),i=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:x,code_challenge_method:y},xform:pt})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await V(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},channel:(n=f==null?void 0:f.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:pt})}else throw new Tn("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(F(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:l}=t;r=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tu})}else if("phone"in t){const{phone:i,password:a,options:l}=t;r=await V(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:tu})}else throw new Tn("You must provide either an email or phone number and a password");const{data:s,error:n}=r;return n?{data:{user:null,session:null},error:n}:!s||!s.session||!s.user?{data:{user:null,session:null},error:new En}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({user:s.user,session:s.session},s.weak_password?{weakPassword:s.weak_password}:null),error:n})}catch(r){if(F(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,s,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(s=t.options)===null||s===void 0?void 0:s.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,s,n,i,a,l,c,u,d,h,f,x;let y,_;if("message"in t)y=t.message,_=t.signature;else{const{chain:S,wallet:m,statement:p,options:g}=t;let j;if(et())if(typeof m=="object")j=m;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))j=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=m}const w=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const N=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:w.host,uri:w.href}),p?{statement:p}:null));let b;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")b=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)b=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in b&&"signature"in b&&(typeof b.signedMessage=="string"||b.signedMessage instanceof Uint8Array)&&b.signature instanceof Uint8Array)y=typeof b.signedMessage=="string"?b.signedMessage:new TextDecoder().decode(b.signedMessage),_=b.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${w.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${w.href}`,`Issued At: ${(n=(s=g==null?void 0:g.signInWithSolana)===null||s===void 0?void 0:s.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(b=>`- ${b}`)]:[]].join(`
`);const N=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=N}}try{const{data:S,error:m}=await V(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:n0(_)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:pt});if(m)throw m;return!S||!S.session||!S.user?{data:{user:null,session:null},error:new En}:(S.session&&(await this._saveSession(S.session),await this._notifyAllSubscribers("SIGNED_IN",S.session)),{data:Object.assign({},S),error:m})}catch(S){if(F(S))return{data:{user:null,session:null},error:S};throw S}}async _exchangeCodeForSession(t){const r=await An(this.storage,`${this.storageKey}-code-verifier`),[s,n]=(r??"").split("/");try{const{data:i,error:a}=await V(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:s},xform:pt});if(await In(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new En}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:a})}catch(i){if(F(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:s,token:n,access_token:i,nonce:a}=t,l=await V(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:n,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:pt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new En}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(F(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,s,n,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Nr(this.storage,this.storageKey));const{error:h}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(s=c==null?void 0:c.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await V(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Tn("You must provide either an email or phone number.")}catch(l){if(F(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,s;try{let n,i;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(s=t.options)===null||s===void 0?void 0:s.captchaToken);const{data:a,error:l}=await V(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:pt});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(n){if(F(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var r,s,n;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Nr(this.storage,this.storageKey)),await V(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&s!==void 0?s:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:k0})}catch(i){if(F(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:s}=t;if(s)throw s;if(!r)throw new Et;const{error:n}=await V(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(F(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:s,type:n,options:i}=t,{error:a}=await V(this.fetch,"POST",r,{headers:this.headers,body:{email:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:s,type:n,options:i}=t,{data:a,error:l}=await V(this.fetch,"POST",r,{headers:this.headers,body:{phone:s,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Tn("You must provide either an email or phone number and a type")}catch(r){if(F(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const s=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await s,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const s=r();for(this.pendingInLock.push((async()=>{try{await s}catch{}})()),await s;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await s}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await An(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const s=t.expires_at?t.expires_at*1e3-Date.now()<wo:!1;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",t.expires_at),!s){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ot}):await this._useSession(async r=>{var s,n,i;const{data:a,error:l}=r;if(l)throw l;return!(!((s=a.session)===null||s===void 0)&&s.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Et}:await V(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:Ot})})}catch(r){if(F(r))return Qg(r)&&(await this._removeSession(),await In(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async s=>{const{data:n,error:i}=s;if(i)throw i;if(!n.session)throw new Et;const a=n.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Nr(this.storage,this.storageKey));const{data:u,error:d}=await V(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Ot});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(s){if(F(s))return{data:{user:null},error:s};throw s}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Et;const r=Date.now()/1e3;let s=r,n=!0,i=null;const{payload:a}=_o(t.access_token);if(a.exp&&(s=a.exp,n=s<=r),n){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:s-r,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(F(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var s;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(s=a.session)!==null&&s!==void 0?s:void 0}if(!(t!=null&&t.refresh_token))throw new Et;const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(F(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!et())throw new Pn("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Pn(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Kc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Kc("No code detected.");const{data:p,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:s,provider_refresh_token:n,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new Pn("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const x=f-d;x*1e3<=Er&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:_,error:S}=await this._getUser(i);if(S)throw S;const m={provider_token:s,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(s){if(F(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await An(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{error:i};const a=(s=n.session)===null||s===void 0?void 0:s.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(Kg(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await In(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=o0(),s={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,s),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:s}}}async _emitInitialSession(t){return await this._useSession(async r=>{var s,n;try{const{data:{session:i},error:a}=r;if(a)throw a;await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let s=null,n=null;this.flowType==="pkce"&&([s,n]=await Nr(this.storage,this.storageKey,!0));try{return await V(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(F(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:s}=await this.getUser();if(s)throw s;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:s,error:n}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await V(this.fetch,"GET",x,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return et()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(s==null?void 0:s.url),{data:{provider:t.provider,url:s==null?void 0:s.url},error:null}}catch(s){if(F(s))return{data:{provider:t.provider,url:null},error:s};throw s}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var s,n;const{data:i,error:a}=r;if(a)throw a;return await V(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(s=i.session)===null||s===void 0?void 0:s.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(F(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const s=Date.now();return await u0(async n=>(n>0&&await c0(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await V(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:pt})),(n,i)=>{const a=200*Math.pow(2,n);return i&&bo(i)&&Date.now()+a-s<Er})}catch(s){if(this._debug(r,"error",s),F(s))return{data:{session:null,user:null},error:s};throw s}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const s=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",s),et()&&!r.skipBrowserRedirect&&window.location.assign(s),{data:{provider:t,url:s},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await An(this.storage,this.storageKey);if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const n=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<wo;if(this._debug(r,`session has${n?"":" not"} expired with margin of ${wo}s`),n){if(this.autoRefreshToken&&s.refresh_token){const{error:i}=await this._callRefreshToken(s.refresh_token);i&&(console.error(i),bo(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,s;if(!t)throw new Et;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Bi;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Et;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),F(i)){const a={session:null,error:i};return bo(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(s=this.refreshingDeferred)===null||s===void 0||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,s=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await Vh(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await In(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&et()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Er);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:s}}=r;if(!s||!s.refresh_token||!s.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((s.expires_at*1e3-t)/Er);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Er}ms, refresh threshold is ${ka} ticks`),n<=ka&&await this._callRefreshToken(s.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof qh)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!et()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,s){const n=[`provider=${encodeURIComponent(r)}`];if(s!=null&&s.redirectTo&&n.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),s!=null&&s.scopes&&n.push(`scopes=${encodeURIComponent(s.scopes)}`),this.flowType==="pkce"){const[i,a]=await Nr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});n.push(l.toString())}if(s!=null&&s.queryParams){const i=new URLSearchParams(s.queryParams);n.push(i.toString())}return s!=null&&s.skipBrowserRedirect&&n.push(`skip_http_redirect=${s.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await V(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(F(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var s,n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await V(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(s=i==null?void 0:i.session)===null||s===void 0?void 0:s.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((n=c==null?void 0:c.totp)===null||n===void 0)&&n.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(F(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:a,error:l}=await V(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(F(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var s;const{data:n,error:i}=r;return i?{data:null,error:i}:await V(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(s=n==null?void 0:n.session)===null||s===void 0?void 0:s.access_token})})}catch(r){if(F(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:s}=await this._challenge({factorId:t.factorId});return s?{data:null,error:s}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const s=(t==null?void 0:t.factors)||[],n=s.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=s.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:s,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,s;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=_o(n.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((s=(r=n.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let s=r.keys.find(a=>a.kid===t);if(s||(s=this.jwks.keys.find(a=>a.kid===t),s&&this.jwks_cached_at+Jg>Date.now()))return s;const{data:n,error:i}=await V(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!n.keys||n.keys.length===0)throw new Is("JWKS is empty");if(this.jwks=n,this.jwks_cached_at=Date.now(),s=n.keys.find(a=>a.kid===t),!s)throw new Is("No matching signing key found in JWKS");return s}async getClaims(t,r={keys:[]}){try{let s=t;if(!s){const{data:x,error:y}=await this.getSession();if(y||!x.session)return{data:null,error:y};s=x.session.access_token}const{header:n,payload:i,signature:a,raw:{header:l,payload:c}}=_o(s);if(y0(i.exp),!n.kid||n.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:x}=await this.getUser(s);if(x)throw x;return{data:{claims:i,header:n,signature:a},error:null}}const u=x0(n.alg),d=await this.fetchJwk(n.kid,r),h=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,a,s0(`${l}.${c}`)))throw new Is("Invalid JWT signature");return{data:{claims:i,header:n,signature:a},error:null}}catch(s){if(F(s))return{data:null,error:s};throw s}}}Ys.nextInstanceID=0;const $0=Ys;class L0 extends $0{constructor(t){super(t)}}var U0=globalThis&&globalThis.__awaiter||function(e,t,r,s){function n(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(s.next(d))}catch(h){a(h)}}function c(d){try{u(s.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):n(d.value).then(l,c)}u((s=s.apply(e,t||[])).next())})};class z0{constructor(t,r,s){var n,i,a;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=Fg(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:Rg,realtime:$g,auth:Object.assign(Object.assign({},Og),{storageKey:u}),global:Ig},h=Bg(s??{},d);this.storageKey=(n=h.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=Dg(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new tg(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Ap(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Tg(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},s={}){return this.rest.rpc(t,r,s)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return U0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:s}=yield this.auth.getSession();return(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:n,storageKey:i,flowType:a,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new L0({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:s,storage:n,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new pg(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,s)=>{this._handleTokenChanged(r,"CLIENT",s==null?void 0:s.access_token)})}_handleTokenChanged(t,r,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?this.changedAccessToken=s:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const D0=(e,t,r)=>new z0(e,t,r),M0="https://cprnseisgqidbkmracik.supabase.co",F0="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwcm5zZWlzZ3FpZGJrbXJhY2lrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzNjY3ODMsImV4cCI6MjA2NTk0Mjc4M30.5y0rMkUg1Ooyz5UXrANcDGnYSGnKfiUEeVzsLbIyiaM",B0=(e,t={})=>{const r=new AbortController,s=setTimeout(()=>r.abort(),12e4);return fetch(e,{...t,signal:r.signal}).finally(()=>{clearTimeout(s)})},O=D0(M0,F0,{auth:{storage:{getItem:e=>window.localStorage.getItem(e),setItem:(e,t)=>window.localStorage.setItem(e,t),removeItem:e=>window.localStorage.removeItem(e)},storageKey:"hoa-violations-auth",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{fetch:B0}}),Hh=E.createContext(void 0),nu="currentAssociationId",Hn=[],G=e=>{const t=new Date().toLocaleTimeString();Hn.unshift(`${t}: ${e}`),Hn.length>20&&Hn.pop(),console.log(e)};function V0({children:e}){const[t,r]=E.useState(null),[s,n]=E.useState(!0),[i,a]=E.useState(null),[l,c]=E.useState([]),[u,d]=E.useState(!1);E.useEffect(()=>{const N=setInterval(()=>{c([...Hn])},500);return()=>clearInterval(N)},[]);const h=async()=>{G("🧹 Clearing all authentication state...");try{return r(null),a(null),n(!1),await O.auth.signOut(),localStorage.clear(),sessionStorage.clear(),console.log("Authentication state cleared successfully"),!0}catch(N){return console.error("Error clearing auth state:",N),!1}},f=async N=>{var k,v,C;G(`👤 Loading profile for: ${N.email}`),n(!0),a(null);const b=setTimeout(()=>{G("⏰ ABSOLUTE TIMEOUT - clearing loading state"),n(!1),a("Authentication is taking too long. Please refresh the page and try again.")},15e3);try{G("👤 Querying user profile...");const I=O.from("user_profiles").select("*").eq("user_id",N.id).single(),z=new Promise((se,X)=>setTimeout(()=>X(new Error("Profile query timeout")),5e3)),L=await Promise.race([I,z]);if(L.error){clearTimeout(b),G(`👤 Profile error: ${L.error.message}`),n(!1),L.error.code==="PGRST116"?a("No user profile found. Please sign up or contact support."):a("Failed to load user profile. Please try again.");return}const T=L.data;if(!T){clearTimeout(b),G("👤 No profile data returned"),n(!1),a("No user profile found. Please sign up or contact support.");return}G(`👤 Profile loaded: ${T.first_name} ${T.last_name}`),G("👤 Loading associations...");const R=O.from("user_association_memberships").select(`
          id,
          association_id,
          is_active,
          joined_at,
          created_at,
          associations!inner (
            id,
            name,
            created_at
          )
        `).eq("user_id",N.id).eq("is_active",!0),D=new Promise((se,X)=>setTimeout(()=>X(new Error("Associations query timeout")),5e3)),ce=await Promise.race([R,D]);if(ce.error){clearTimeout(b),G(`👤 Associations error: ${ce.error.message}`),n(!1),a("Failed to load your associations. Please try again.");return}const A=ce.data;if(!A||A.length===0){clearTimeout(b),G("👤 No associations found"),n(!1),a("No associations found for your account. Contact support.");return}G(`👤 Found ${A.length} associations`);const U=A.map(se=>se.associations),M=A.map(se=>({id:se.id,user_id:N.id,association_id:se.association_id,is_active:se.is_active,joined_at:se.joined_at,created_at:se.created_at}));let J=U[0];const Q=localStorage.getItem(nu);if(Q){const se=U.find(X=>X.id===Q);se&&(J=se)}G("👤 Loading roles...");const Y=O.from("user_role_assignments").select(`
          role_id,
          roles!inner (
            id,
            name,
            description,
            permissions,
            is_system_role,
            association_id
          )
        `).eq("user_id",N.id),Se=new Promise((se,X)=>setTimeout(()=>X(new Error("Roles query timeout")),5e3));let Xe=[];try{const se=await Promise.race([Y,Se]);!se.error&&se.data&&(Xe=se.data.map(X=>X.roles))}catch(se){G(`👤 Roles loading failed (continuing without roles): ${se}`)}G(`👤 Loaded ${Xe.length} roles`);const H=Array.from(new Set(Xe.flatMap(se=>se.permissions))),we={id:N.id,email:N.email,profile:T,associations:U,currentAssociation:J,memberships:M,roles:Xe,permissions:H};clearTimeout(b),G(`✅ SUCCESS! User loaded: ${we.email}`),r(we),a(null),n(!1)}catch(I){clearTimeout(b),G(`❌ Profile loading error: ${I.message}`),n(!1),(k=I.message)!=null&&k.includes("timeout")?a("Connection timeout. This may be due to slow internet or server issues. Please check your connection and try again."):(v=I.message)!=null&&v.includes("network")||(C=I.message)!=null&&C.includes("fetch")?a("Network connection error. Please check your internet connection and try again."):a("Failed to load user profile. Please try refreshing the page.")}};E.useEffect(()=>{if(u)return;let N=!0;(async()=>{var C;G("🔄 Starting auth initialization...");const v=setTimeout(()=>{N&&(G("⏰ Auth initialization timeout"),a(null))},1e4);try{const I=O.auth.getSession(),z=new Promise((D,ce)=>setTimeout(()=>ce(new Error("Session check timeout")),8e3)),L=await Promise.race([I,z]),{data:{session:T},error:R}=L;if(clearTimeout(v),!N)return;if(R){G(`❌ Session error: ${R.message}`),n(!1),d(!0);return}T!=null&&T.user?(G(`🔑 Found session for: ${T.user.email}`),await f(T.user)):(G("❌ No session found"),n(!1)),d(!0)}catch(I){clearTimeout(v),G(`❌ Auth init error: ${I.message}`),N&&(n(!1),d(!0),(C=I.message)!=null&&C.includes("timeout")&&a("Connection timeout during startup. Please refresh the page."))}})();const{data:{subscription:k}}=O.auth.onAuthStateChange(async(v,C)=>{u&&(G(`🔄 Auth event: ${v}`),N&&(v==="SIGNED_IN"&&(C!=null&&C.user)?(G("✅ User signed in"),await f(C.user)):v==="SIGNED_OUT"&&(G("👋 User signed out"),r(null),a(null),n(!1),d(!1))))});return()=>{N=!1,k.unsubscribe()}},[u]);const x=async()=>{try{const{data:{user:N}}=await O.auth.getUser();N&&await f(N)}catch(N){console.error("Error refetching user:",N),a("Unable to refresh user data.")}},y=()=>{a(null)},_=async N=>{if(!t)return;const b=t.associations.find(k=>k.id===N);if(!b){console.error("Association not found:",N);return}localStorage.setItem(nu,N),r(k=>k?{...k,currentAssociation:b}:null),console.log("Switched to association:",b.name)},S=N=>t?t.roles.filter(v=>v.is_system_role||v.association_id===t.currentAssociation.id).flatMap(v=>v.permissions).includes(N):!1,w={user:t,loading:s,profileLoadError:i,debugInfo:l,signIn:async(N,b)=>{try{G(`🔑 Signing in: ${N}`),a(null);const{error:k}=await O.auth.signInWithPassword({email:N,password:b});return k?(G(`🔑 Sign in error: ${k.message}`),k.message.includes("Invalid login credentials")?{error:"Invalid email or password. Please check your credentials and try again."}:{error:k.message}):(G("🔑 Sign in successful"),{error:null})}catch(k){return G(`🔑 Sign in exception: ${k.message}`),{error:"An unexpected error occurred"}}},signUp:async(N,b,k,v,C)=>{try{console.log("Starting sign up process for:",N),a(null);const{data:I,error:z}=await O.auth.signUp({email:N,password:b,options:{data:{full_name:`${k} ${v}`.trim()}}});if(z)return console.error("Auth signup error:",z),{error:z.message};if(!I.user)return{error:"Failed to create user account"};const{data:L,error:T}=await O.rpc("create_user_and_membership",{p_user_id:I.user.id,p_association_id:C,p_first_name:k,p_last_name:v}).single();return T?(console.error("Profile creation error:",T),{error:`Failed to create user profile: ${T.message}`}):L&&!L.success?{error:L.error||"Failed to create user profile"}:{error:null}}catch(I){return console.error("Unexpected signup error:",I),{error:"An unexpected error occurred"}}},signOut:async()=>{try{console.log("Signing out user"),await h()}catch(N){console.error("Error signing out:",N),await h()}},hasPermission:S,hasAnyPermission:N=>N.some(b=>S(b)),refetchUser:x,clearProfileLoadError:y,clearAuthState:h,switchAssociation:_};return o.jsx(Hh.Provider,{value:w,children:e})}function Ne(){const e=E.useContext(Hh);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}var q0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const H0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W0=(e,t)=>{const r=E.forwardRef(({color:s="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:l,...c},u)=>E.createElement("svg",{ref:u,...q0,width:n,height:n,stroke:s,strokeWidth:a?Number(i)*24/Number(n):i,className:`lucide lucide-${H0(e)}`,...c},[...t.map(([d,h])=>E.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${e}`,r};var B=W0;const Xs=B("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ca=B("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),J0=B("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),iu=B("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ou=B("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),G0=B("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),K0=B("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),it=B("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Zs=B("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Vi=B("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),rs=B("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Q0=B("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Jt=B("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Y0=B("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),X0=B("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Wh=B("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Al=B("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ea=B("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Ta=B("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),en=B("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Z0=B("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),au=B("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),gr=B("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),Pa=B("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ey=B("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),vi=B("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ur=B("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),br=B("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),lu=B("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),yr=B("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),qi=B("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),tn=B("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Wn=B("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),_r=B("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),ty=B("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ct=B("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Aa=B("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Jh=B("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Xt=B("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);async function ry(){const e=[];console.log("🔍 Starting comprehensive database credentials test..."),console.log("Test 1: Checking environment variables...");const t=performance.now();try{const c="https://cprnseisgqidbkmracik.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwcm5zZWlzZ3FpZGJrbXJhY2lrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzNjY3ODMsImV4cCI6MjA2NTk0Mjc4M30.5y0rMkUg1Ooyz5UXrANcDGnYSGnKfiUEeVzsLbIyiaM";try{new URL(c)}catch{return e.push({success:!1,test:"Environment Variables",message:"Invalid Supabase URL format",duration:performance.now()-t,error:`URL: ${c}`}),e}e.push({success:!0,test:"Environment Variables",message:"Environment variables are present and valid",duration:performance.now()-t})}catch(c){e.push({success:!1,test:"Environment Variables",message:"Error checking environment variables",duration:performance.now()-t,error:String(c)})}console.log("Test 2: Basic connection test...");const r=performance.now();try{const c=await fetch("https://cprnseisgqidbkmracik.supabase.co/rest/v1/",{headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwcm5zZWlzZ3FpZGJrbXJhY2lrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzNjY3ODMsImV4cCI6MjA2NTk0Mjc4M30.5y0rMkUg1Ooyz5UXrANcDGnYSGnKfiUEeVzsLbIyiaM"}});c.ok?e.push({success:!0,test:"Basic Connection",message:"Successfully connected to Supabase REST API",duration:performance.now()-r}):e.push({success:!1,test:"Basic Connection",message:"Failed to connect to Supabase REST API",duration:performance.now()-r,error:`HTTP ${c.status}: ${c.statusText}`})}catch(c){e.push({success:!1,test:"Basic Connection",message:"Network error connecting to Supabase",duration:performance.now()-r,error:String(c)})}console.log("Test 3: Testing auth endpoint...");const s=performance.now();try{const{error:c}=await O.auth.getSession();c?e.push({success:!1,test:"Auth Endpoint",message:"Auth endpoint returned an error",duration:performance.now()-s,error:c.message}):e.push({success:!0,test:"Auth Endpoint",message:"Auth endpoint is working correctly",duration:performance.now()-s})}catch(c){e.push({success:!1,test:"Auth Endpoint",message:"Error accessing auth endpoint",duration:performance.now()-s,error:String(c)})}console.log("Test 4: Testing database query...");const n=performance.now();try{const{error:c}=await O.from("associations").select("count").limit(1);c?e.push({success:!1,test:"Database Query",message:"Database query failed",duration:performance.now()-n,error:c.message}):e.push({success:!0,test:"Database Query",message:"Successfully queried database",duration:performance.now()-n})}catch(c){e.push({success:!1,test:"Database Query",message:"Error executing database query",duration:performance.now()-n,error:String(c)})}console.log("Test 5: Testing network latency...");const i=performance.now();try{const c=[];for(let d=0;d<3;d++){const h=performance.now();await fetch("https://cprnseisgqidbkmracik.supabase.co/rest/v1/",{method:"HEAD",headers:{apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwcm5zZWlzZ3FpZGJrbXJhY2lrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzNjY3ODMsImV4cCI6MjA2NTk0Mjc4M30.5y0rMkUg1Ooyz5UXrANcDGnYSGnKfiUEeVzsLbIyiaM"}});const f=performance.now();c.push(f-h)}const u=c.reduce((d,h)=>d+h,0)/c.length;e.push({success:!0,test:"Network Latency",message:`Average latency: ${u.toFixed(2)}ms`,duration:performance.now()-i})}catch(c){e.push({success:!1,test:"Network Latency",message:"Failed to measure network latency",duration:performance.now()-i,error:String(c)})}const a=e.filter(c=>c.success).length,l=e.length;return console.log(`
📊 Database Credentials Test Results:`),console.log(`Tests passed: ${a}/${l}`),console.log(`Overall success rate: ${(a/l*100).toFixed(1)}%`),e.forEach(c=>{const u=c.success?"✅":"❌",d=c.duration?` (${c.duration.toFixed(0)}ms)`:"";console.log(`${u} ${c.test}: ${c.message}${d}`),c.error&&console.log(`   Error: ${c.error}`)}),e}async function sy(){console.log("🚀 runDatabaseTest function started");try{const e=await ry();console.log("📊 testDatabaseCredentials completed, results count:",e.length);const t=e.filter(n=>n.success).length,r=e.length;let s=`Database Credentials Test Report
`;return s+=`=====================================
`,s+=`Tests passed: ${t}/${r}
`,s+=`Success rate: ${(t/r*100).toFixed(1)}%

`,e.forEach(n=>{const i=n.success?"✅":"❌",a=n.duration?` (${n.duration.toFixed(0)}ms)`:"";s+=`${i} ${n.test}: ${n.message}${a}
`,n.error&&(s+=`   Error: ${n.error}
`)}),console.log("📝 Report generated, length:",s.length),console.log("✅ runDatabaseTest function completed successfully"),s}catch(e){return console.error("❌ runDatabaseTest function failed:",e),`Error running database test: ${e}`}}function ny(){const[e,t]=E.useState(!1),[r,s]=E.useState(null),[n,i]=E.useState(!1);console.log("DatabaseTestButton render - isRunning:",e,"testResult exists:",!!r,"showResult:",n);const a=async u=>{if(u.preventDefault(),!e){console.log("handleRunTest called - starting test"),t(!0),console.log("setIsRunning(true) called"),s(null),i(!1),console.log("State reset complete, calling runDatabaseTest...");try{const d=await sy();console.log("runDatabaseTest completed, result length:",(d==null?void 0:d.length)||0),console.log("Setting testResult and showResult..."),s(d),i(!0),console.log("testResult and showResult set")}catch(d){console.error("Error in handleRunTest:",d),s(`Error: ${d}`),i(!0)}finally{console.log("Setting isRunning to false"),t(!1),console.log("handleRunTest complete")}}},l=()=>{if(e)return o.jsx(Al,{className:"h-4 w-4 animate-spin"});if(!r)return o.jsx(Ea,{className:"h-4 w-4"});const u=r.includes("100.0%")?100:r.includes("80.0%")||r.includes("60.0%")?80:0;return u===100?o.jsx(rs,{className:"h-4 w-4 text-green-600"}):u>=60?o.jsx(rs,{className:"h-4 w-4 text-yellow-600"}):o.jsx(Jh,{className:"h-4 w-4 text-red-600"})},c=()=>{if(e)return"text-blue-600";if(!r)return"text-stone-50 hover:text-stone-800";const u=r.includes("100.0%")?100:r.includes("80.0%")||r.includes("60.0%")?80:0;return u===100?"text-green-600 hover:text-green-800":u>=60?"text-yellow-600 hover:text-yellow-800":"text-red-600 hover:text-red-800"};return o.jsxs("div",{className:"space-y-4 flex flex-col items-center",children:[o.jsxs("a",{href:"#",onClick:a,className:`${c()} underline transition-colors inline-flex items-center space-x-2 text-sm ${e?"opacity-50 pointer-events-none":""}`,children:[l(),o.jsx("span",{children:e?"Testing Database...":"Test Database Credentials"})]}),n&&r&&o.jsxs("div",{className:"bg-white rounded-lg border shadow-sm",children:[o.jsx("div",{className:"p-4 border-b",children:o.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center space-x-2",children:[o.jsx(Ea,{className:"h-5 w-5"}),o.jsx("span",{children:"Database Test Results"})]})}),o.jsx("div",{className:"p-4",children:o.jsx("pre",{className:"text-sm text-gray-700 whitespace-pre-wrap font-mono bg-gray-50 p-3 rounded border overflow-x-auto",children:r})}),o.jsx("div",{className:"p-4 border-t bg-gray-50 text-sm text-gray-600",children:o.jsx("p",{children:"This test checks your Supabase connection, credentials, and network latency. If you see failures, verify your .env file and network connection."})})]})]})}function iy({mode:e,onModeChange:t,onForgotPassword:r,showDatabaseTestButton:s,onShowAccessTest:n}){const{signIn:i,signUp:a,profileLoadError:l,clearProfileLoadError:c,debugInfo:u}=Ne(),[d,h]=E.useState({email:"",password:"",firstName:"",lastName:"",associationId:""}),[f,x]=E.useState([]),[y,_]=E.useState(!1),[S,m]=E.useState(!1),[p,g]=E.useState(!1),[j,w]=E.useState(""),[N,b]=E.useState(!1);E.useEffect(()=>{e==="signup"&&k()},[e]);const k=async()=>{try{_(!0),console.log("Loading available associations...");const{data:R,error:D}=await O.from("associations").select("id, name, zip_code").order("name");if(D){console.error("Error loading associations:",D),w("Failed to load available associations. Please try again.");return}console.log("Associations loaded:",R),x(R||[])}catch(R){console.error("Error loading associations:",R),w("Failed to load available associations. Please try again.")}finally{_(!1)}},v=async R=>{R.preventDefault(),g(!0),w(""),c(),console.log("📝 FORM SUBMIT START");try{if(e==="signin"){console.log("📝 ATTEMPTING SIGNIN:",d.email);const{error:D}=await i(d.email,d.password);console.log("📝 SIGNIN RESULT:",D?"ERROR":"SUCCESS"),D?(console.error("Sign in error:",D),console.error("📝 SIGNIN ERROR:",D),g(!1)):console.log("📝 SIGNIN SUCCESS - auth context should handle loading")}else{if(console.log("📝 ATTEMPTING SIGNUP:",d.email),!d.associationId){w("Please select an association to continue."),g(!1);return}if(!d.firstName.trim()){w("Please enter your first name."),g(!1);return}const{error:D}=await a(d.email,d.password,d.firstName.trim(),d.lastName.trim(),d.associationId);D?(console.error("📝 SIGNUP ERROR:",D),w(D)):(console.log("📝 SIGNUP SUCCESS"),w("Account created successfully! Please check your email to verify your account.")),g(!1)}}catch(D){console.error("📝 UNEXPECTED ERROR:",D),w("An unexpected error occurred"),g(!1)}},C=R=>{h(D=>({...D,[R.target.name]:R.target.value}))},I=l||j;let z=I,L=j.includes("successfully"),T=!1;return I&&I.includes("User already registered")&&(z="An account with this email address already exists.",T=!0,L=!1),o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[o.jsx(gr,{className:"h-32 w-32 text-blue-600"}),o.jsx("h1",{className:"text-center text-2xl font-bold text-gray-900",children:"HOA Homeowner Violation Tracking System"})]}),o.jsx("h2",{className:"mt-4 text-center text-xl font-semibold text-gray-800",children:e==="signin"?"Sign in to your account":"Create your account"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:e==="signin"?o.jsxs(o.Fragment,{children:["Don't have an account?"," ",o.jsx("button",{onClick:()=>t("signup"),className:"font-medium text-blue-600 hover:text-blue-500",children:"Register"})]}):o.jsxs(o.Fragment,{children:["Already have an account?"," ",o.jsx("button",{onClick:()=>t("signin"),className:"font-medium text-blue-600 hover:text-blue-500",children:"Sign in"})]})})]}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:v,children:[o.jsxs("div",{className:"space-y-4",children:[e==="signup"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name *"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:d.firstName,onChange:C,className:"pl-10 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"John"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"lastName",name:"lastName",type:"text",value:d.lastName,onChange:C,className:"pl-10 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Doe"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"associationId",className:"block text-sm font-medium text-gray-700",children:"Association *"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsxs("select",{id:"associationId",name:"associationId",required:!0,value:d.associationId,onChange:C,disabled:y,className:"pl-10 pr-10 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed appearance-none",children:[o.jsx("option",{value:"",children:y?"Loading associations...":"Select your association"}),f.map(R=>o.jsxs("option",{value:R.id,children:[R.name,R.zip_code?` (${R.zip_code})`:""]},R.id))]}),o.jsx(Jt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]}),f.length===0&&!y&&o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"No associations available. Please contact your administrator to set up your association."})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(vi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:d.email,onChange:C,className:"pl-10 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"john@example.com"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(Pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"password",name:"password",type:S?"text":"password",autoComplete:e==="signin"?"current-password":"new-password",required:!0,value:d.password,onChange:C,className:"pl-10 pr-10 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"••••••••"}),o.jsx("button",{type:"button",onClick:()=>m(!S),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:S?o.jsx(Ta,{className:"h-5 w-5"}):o.jsx(en,{className:"h-5 w-5"})})]})]})]}),e==="signin"&&o.jsx("div",{className:"flex items-center justify-end",children:o.jsx("button",{type:"button",onClick:r,className:"text-sm text-blue-600 hover:text-blue-500",children:"Forgot your password?"})}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:p||e==="signup"&&(y||f.length===0),className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:p?o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),e==="signin"?"Signing in...":"Creating account..."]}):e==="signin"?"Sign In":"Register"})}),z&&o.jsxs("div",{className:`text-sm p-3 rounded-md ${L?"text-green-700 bg-green-50 border border-green-200":"text-red-700 bg-red-50 border border-red-200"}`,children:[z,T&&o.jsx("div",{className:"mt-2",children:o.jsx("button",{type:"button",onClick:()=>t("signin"),className:"font-medium text-blue-600 hover:text-blue-500 underline",children:"Sign in to your existing account instead"})}),l&&!T&&o.jsx("div",{className:"mt-2 text-xs",children:"If you continue to experience issues, please try signing up again or contact support."})]}),s&&o.jsxs("div",{className:"mt-4",children:[o.jsx(ny,{}),n&&o.jsxs("div",{className:"mt-2",children:[o.jsx("button",{type:"button",onClick:n,className:"w-full text-center text-stone-50 hover:text-green-200 underline transition-colors text-sm",children:"Run User Access Test"}),o.jsxs("button",{type:"button",onClick:()=>b(!N),className:"w-full text-center text-stone-50 hover:text-blue-200 underline transition-colors text-sm mt-1",children:[N?"Hide":"Show"," Debug Logs"]})]})]}),N&&o.jsxs("div",{className:"mt-4 bg-gray-50 border rounded-lg p-3",children:[o.jsx("h4",{className:"font-semibold text-gray-700 mb-2 text-sm",children:"Debug Logs:"}),o.jsx("div",{className:"text-xs space-y-1 max-h-32 overflow-y-auto",children:u.length>0?u.map((R,D)=>o.jsx("div",{className:"text-gray-600 font-mono break-all",children:R},D)):o.jsx("div",{className:"text-gray-500",children:"No debug info yet..."})})]})]})]})})}function oy({onBack:e}){const[t,r]=E.useState(""),[s,n]=E.useState(!1),[i,a]=E.useState(!1),[l,c]=E.useState(""),u=async d=>{d.preventDefault(),n(!0),c("");try{const h="https://hoa-violation-tracker.netlify.app?type=recovery",{error:f}=await O.auth.resetPasswordForEmail(t,{redirectTo:h});f?c(f.message):a(!0)}catch{c("An unexpected error occurred")}finally{n(!1)}};return i?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{className:"text-center",children:[o.jsx(rs,{className:"mx-auto h-12 w-12 text-green-600"}),o.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Check your email"}),o.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["We've sent a password reset link to ",o.jsx("strong",{children:t})]}),o.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Click the link in the email to reset your password. If you don't see the email, check your spam folder."})]}),o.jsx("div",{className:"mt-8",children:o.jsxs("button",{onClick:e,className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(iu,{className:"h-4 w-4 mr-2"}),"Back to Sign In"]})})]})}):o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Reset your password"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your email address and we'll send you a link to reset your password."})]}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:u,children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(vi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:d=>r(d.target.value),className:"pl-10 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"john@example.com"})]})]}),l&&o.jsx("div",{className:"text-sm text-red-600",children:l}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("button",{type:"submit",disabled:s,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Sending...":"Send Reset Link"}),o.jsxs("button",{type:"button",onClick:e,className:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[o.jsx(iu,{className:"h-4 w-4 mr-2"}),"Back to Sign In"]})]})]})]})})}function ay({onComplete:e}){const[t,r]=E.useState({password:"",confirmPassword:""}),[s,n]=E.useState(!1),[i,a]=E.useState(!1),[l,c]=E.useState(!1),[u,d]=E.useState(!1),[h,f]=E.useState("");E.useEffect(()=>{(async()=>{const{data:{session:S}}=await O.auth.getSession();S||e()})()},[e]);const x=async _=>{if(_.preventDefault(),c(!0),f(""),t.password!==t.confirmPassword){f("Passwords do not match"),c(!1);return}if(t.password.length<6){f("Password must be at least 6 characters long"),c(!1);return}try{const{error:S}=await O.auth.updateUser({password:t.password});S?f(S.message):(d(!0),setTimeout(()=>{e()},2e3))}catch{f("An unexpected error occurred")}finally{c(!1)}},y=_=>{r(S=>({...S,[_.target.name]:_.target.value}))};return u?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsx("div",{className:"max-w-md w-full space-y-8",children:o.jsxs("div",{className:"text-center",children:[o.jsx(rs,{className:"mx-auto h-12 w-12 text-green-600"}),o.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Password Updated"}),o.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your password has been successfully updated. You will be redirected shortly."})]})})}):o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Update your password"}),o.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your new password below."})]}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(Pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"new-password",required:!0,value:t.password,onChange:y,className:"pl-10 pr-10 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"••••••••"}),o.jsx("button",{type:"button",onClick:()=>n(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?o.jsx(Ta,{className:"h-5 w-5"}):o.jsx(en,{className:"h-5 w-5"})})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(Pa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:i?"text":"password",autoComplete:"new-password",required:!0,value:t.confirmPassword,onChange:y,className:"pl-10 pr-10 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"••••••••"}),o.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?o.jsx(Ta,{className:"h-5 w-5"}):o.jsx(en,{className:"h-5 w-5"})})]})]})]}),h&&o.jsx("div",{className:"text-sm text-red-600",children:h}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Updating...":"Update Password"})})]})]})})}function ly({user:e,onComplete:t}){var S,m,p,g,j,w,N,b;const{refetchUser:r}=Ne(),[s,n]=E.useState({firstName:((m=(S=e.user_metadata)==null?void 0:S.full_name)==null?void 0:m.split(" ")[0])||((g=(p=e.user_metadata)==null?void 0:p.name)==null?void 0:g.split(" ")[0])||"",lastName:((w=(j=e.user_metadata)==null?void 0:j.full_name)==null?void 0:w.split(" ").slice(1).join(" "))||((b=(N=e.user_metadata)==null?void 0:N.name)==null?void 0:b.split(" ").slice(1).join(" "))||"",associationId:""}),[i,a]=E.useState([]),[l,c]=E.useState(!1),[u,d]=E.useState(!0),[h,f]=E.useState("");E.useEffect(()=>{x()},[]);const x=async()=>{try{d(!0),console.log("Loading available associations...");const{data:k,error:v}=await O.from("associations").select("id, name").order("name");if(v){console.error("Error loading associations:",v),f("Failed to load available associations. Please try again.");return}console.log("Associations loaded:",k),a(k||[])}catch(k){console.error("Error loading associations:",k),f("Failed to load available associations. Please try again.")}finally{d(!1)}},y=async k=>{k.preventDefault(),c(!0),f("");try{if(!s.associationId){f("Please select an association to continue."),c(!1);return}if(!s.firstName.trim()){f("Please enter your first name."),c(!1);return}console.log("Creating profile for OAuth user...");const{data:v,error:C}=await O.from("associations").select("id, name").eq("id",s.associationId).single();if(C||!v){console.error("Association verification error:",C),f("Selected association not found. Please refresh the page and try again."),c(!1);return}console.log("Association verified:",v.name);const{error:I}=await O.auth.updateUser({data:{full_name:`${s.firstName.trim()} ${s.lastName.trim()}`.trim(),display_name:`${s.firstName.trim()} ${s.lastName.trim()}`.trim()}});I&&console.error("Error updating user metadata:",I);const{error:z}=await O.from("user_profiles").insert({user_id:e.id,association_id:s.associationId,first_name:s.firstName.trim(),last_name:s.lastName.trim()});if(z){console.error("Profile creation error:",z),z.message.includes("duplicate key")?f("A profile already exists for this account. Please contact support."):f("Failed to create user profile. Please try again."),c(!1);return}console.log("User profile created successfully"),await r(),t()}catch(v){console.error("Unexpected error creating profile:",v),f("An unexpected error occurred. Please try again."),c(!1)}},_=k=>{n(v=>({...v,[k.target.name]:k.target.value}))};return o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"max-w-md w-full space-y-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[o.jsx(gr,{className:"h-12 w-12 text-blue-600"}),o.jsx("h1",{className:"text-center text-2xl font-bold text-gray-900",children:"Complete Your Profile"})]}),o.jsx("p",{className:"mt-4 text-center text-sm text-gray-600",children:"Welcome! Please complete your profile to access the HOA Violations Tracker."})]}),o.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y,children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:"First Name *"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"firstName",name:"firstName",type:"text",required:!0,value:s.firstName,onChange:_,className:"pl-10 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"John"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:"Last Name"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsx("input",{id:"lastName",name:"lastName",type:"text",value:s.lastName,onChange:_,className:"pl-10 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Doe"})]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"associationId",className:"block text-sm font-medium text-gray-700",children:"Association *"}),o.jsxs("div",{className:"mt-1 relative",children:[o.jsx(gr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),o.jsxs("select",{id:"associationId",name:"associationId",required:!0,value:s.associationId,onChange:_,disabled:u,className:"pl-10 pr-10 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 disabled:opacity-50 disabled:cursor-not-allowed appearance-none",children:[o.jsx("option",{value:"",children:u?"Loading associations...":"Select your association"}),i.map(k=>o.jsx("option",{value:k.id,children:k.name},k.id))]}),o.jsx(Jt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]}),i.length===0&&!u&&o.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"No associations available. Please contact your administrator to set up your association."})]})]}),h&&o.jsx("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 p-3 rounded-md",children:h}),o.jsx("div",{children:o.jsx("button",{type:"submit",disabled:l||u||i.length===0,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating profile..."]}):"Complete Setup"})})]})]})})}function cy(){const{user:e,hasPermission:t}=Ne(),[r,s]=E.useState([]),[n,i]=E.useState([]),[a,l]=E.useState(!0),[c,u]=E.useState(null);E.useEffect(()=>{e&&t("manage_roles")?(d(),h()):e&&l(!1)},[e]);const d=async()=>{if(e)try{const{data:m,error:p}=await O.from("roles").select("*").or(`association_id.eq.${e.currentAssociation.id},is_system_role.eq.true`).order("is_system_role",{ascending:!1}).order("name");if(p){u(p.message);return}s(m||[])}catch{u("Failed to load roles")}},h=async()=>{if(e)try{const{data:m,error:p}=await O.from("user_role_assignments").select(`
          *,
          roles (*)
        `).in("user_id",[e.id]);if(p){u(p.message);return}i(m||[])}catch{u("Failed to load user role assignments")}finally{l(!1)}};return{roles:r,userRoleAssignments:n,loading:a,error:c,createRole:async m=>{if(!e||!t("manage_roles"))throw new Error("Insufficient permissions");try{const{data:p,error:g}=await O.from("roles").insert({name:m.name,description:m.description,permissions:m.permissions,association_id:e.currentAssociation.id,is_system_role:!1}).select().single();if(g)throw g;return s(j=>[...j,p]),p}catch{throw new Error("Failed to create role")}},updateRole:async(m,p)=>{if(!e||!t("manage_roles"))throw new Error("Insufficient permissions");try{const{data:g,error:j}=await O.from("roles").update({...p,updated_at:new Date().toISOString()}).eq("id",m).eq("association_id",e.currentAssociation.id).eq("is_system_role",!1).select().single();if(j)throw j;return s(w=>w.map(N=>N.id===m?g:N)),g}catch{throw new Error("Failed to update role")}},deleteRole:async m=>{if(!e||!t("manage_roles"))throw new Error("Insufficient permissions");try{const{error:p}=await O.from("roles").delete().eq("id",m).eq("association_id",e.currentAssociation.id).eq("is_system_role",!1);if(p)throw p;s(g=>g.filter(j=>j.id!==m))}catch{throw new Error("Failed to delete role")}},assignRoleToUser:async(m,p)=>{if(!e||!t("manage_users"))throw new Error("Insufficient permissions");try{const{data:g,error:j}=await O.from("user_role_assignments").insert({user_id:m,role_id:p,assigned_by:e.id}).select(`
          *,
          roles (*)
        `).single();if(j)throw j;return i(w=>[...w,g]),g}catch{throw new Error("Failed to assign role to user")}},removeRoleFromUser:async(m,p)=>{if(!e||!t("manage_users"))throw new Error("Insufficient permissions");try{const{error:g}=await O.from("user_role_assignments").delete().eq("user_id",m).eq("role_id",p);if(g)throw g;i(j=>j.filter(w=>!(w.user_id===m&&w.role_id===p)))}catch{throw new Error("Failed to remove role from user")}},refetch:()=>{d(),h()}}}const uy={manage_users:"Create, edit, and delete user accounts and assign roles",manage_roles:"Create, edit, and delete custom roles and permissions",manage_violations:"Create, edit, delete, and update violation records",view_violations:"View violation records and details",create_violations:"Create new violation reports",manage_company:"Edit association settings and information",view_reports:"Access reports and analytics",manage_settings:"Configure system settings and preferences"};function dy(){const{hasPermission:e}=Ne(),{roles:t,loading:r,createRole:s,updateRole:n,deleteRole:i}=cy(),[a,l]=E.useState(!1),[c,u]=E.useState(null),[d,h]=E.useState({name:"",description:"",permissions:[]});if(!e("manage_roles"))return o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"text-center text-gray-500",children:[o.jsx(tn,{size:48,className:"mx-auto mb-4 text-gray-400"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),o.jsx("p",{children:"You don't have permission to manage roles."})]})});const f=async m=>{m.preventDefault();try{c?(await n(c.id,d),u(null)):(await s(d),l(!1)),h({name:"",description:"",permissions:[]})}catch(p){console.error("Error saving role:",p)}},x=m=>{u(m),h({name:m.name,description:m.description||"",permissions:m.permissions}),l(!0)},y=async m=>{if(window.confirm("Are you sure you want to delete this role?"))try{await i(m)}catch(p){console.error("Error deleting role:",p)}},_=()=>{l(!1),u(null),h({name:"",description:"",permissions:[]})},S=m=>{h(p=>({...p,permissions:p.permissions.includes(m)?p.permissions.filter(g=>g!==m):[...p.permissions,m]}))};return r?o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),o.jsx("p",{className:"text-center mt-4 text-gray-600",children:"Loading roles..."})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(tn,{className:"h-6 w-6 text-blue-600"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Role Management"})]}),o.jsxs("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(yr,{size:16}),o.jsx("span",{children:"Create Role"})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map(m=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-gray-800",children:m.name}),m.description&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.description})]}),!m.is_system_role&&o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("button",{onClick:()=>x(m),className:"text-blue-600 hover:text-blue-800 transition-colors",children:o.jsx(br,{size:16})}),o.jsx("button",{onClick:()=>y(m.id),className:"text-red-600 hover:text-red-800 transition-colors",children:o.jsx(_r,{size:16})})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(Aa,{size:14,className:"mr-1"}),o.jsxs("span",{children:[m.permissions.length," permissions"]})]}),m.is_system_role&&o.jsx("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:"System Role"})]}),o.jsxs("div",{className:"mt-3",children:[o.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Permissions:"}),o.jsxs("div",{className:"flex flex-wrap gap-1",children:[m.permissions.slice(0,7).map(p=>o.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:p.replace("_"," ")},p)),m.permissions.length>7&&o.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:["+",m.permissions.length-5," more"]})]})]})]},m.id))})]}),a&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:c?"Edit Role":"Create New Role"}),o.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Xt,{size:24})})]}),o.jsxs("form",{onSubmit:f,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role Name *"}),o.jsx("input",{type:"text",value:d.name,onChange:m=>h(p=>({...p,name:m.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter role name"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),o.jsx("textarea",{value:d.description,onChange:m=>h(p=>({...p,description:m.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe this role's purpose and responsibilities"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permissions"}),o.jsx("div",{className:"space-y-3",children:Object.entries(uy).map(([m,p])=>o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx("button",{type:"button",onClick:()=>S(m),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${d.permissions.includes(m)?"bg-blue-600 border-blue-600 text-white":"border-gray-300 hover:border-blue-400"}`,children:d.permissions.includes(m)&&o.jsx(Q0,{size:12})}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-800",children:m.replace(/_/g," ").replace(/\b\w/g,g=>g.toUpperCase())}),o.jsx("div",{className:"text-sm text-gray-600",children:p})]})]},m))})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:o.jsxs("span",{children:[c?"Update":"Create"," Role"]})})]})]})]})})]})}function hy(){const{user:e,hasPermission:t}=Ne(),[r,s]=E.useState([]),[n,i]=E.useState([]),[a,l]=E.useState([]),[c,u]=E.useState(!0),[d,h]=E.useState(null);E.useEffect(()=>{e&&t("manage_users")?f():e&&u(!1)},[e]);const f=async()=>{try{u(!0),h(null),await Promise.all([x(),y(),_()])}catch(k){console.error("Error loading user management data:",k),h(k.message||"Failed to load data")}finally{u(!1)}},x=async()=>{const{data:k,error:v}=await O.from("user_profiles").select("*").order("created_at",{ascending:!1});if(v)throw v;if(!k){s([]);return}const C=k.map(Y=>Y.user_id),{data:I,error:z}=await O.from("user_association_memberships").select(`
        id,
        user_id,
        association_id,
        is_active,
        joined_at,
        associations!inner (
          id,
          name,
          address,
          city,
          state,
          zip_code,
          phone,
          email,
          website,
          created_at
        )
      `).in("user_id",C).eq("is_active",!0);z&&console.warn("Could not load user memberships:",z);const L=[...new Set(k.map(Y=>Y.association_id).filter(Y=>Y!=null))],{data:T,error:R}=await O.from("associations").select("*").in("id",L);R&&console.warn("Could not load associations:",R);const A=await fetch("https://cprnseisgqidbkmracik.supabase.co/functions/v1/list-users",{headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwcm5zZWlzZ3FpZGJrbXJhY2lrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzNjY3ODMsImV4cCI6MjA2NTk0Mjc4M30.5y0rMkUg1Ooyz5UXrANcDGnYSGnKfiUEeVzsLbIyiaM","Content-Type":"application/json"}});let U=[];A.ok?U=(await A.json()).users||[]:console.warn("Could not load auth users via edge function, using profile data only");const{data:M,error:J}=await O.from("user_role_assignments").select(`
        user_id,
        roles (
          id,
          name,
          description,
          permissions,
          is_system_role,
          association_id,
          created_at,
          updated_at
        )
      `).in("user_id",C);J&&console.warn("Could not load role assignments:",J);const Q=k.map(Y=>{const Se=U.find(X=>X.id===Y.user_id),H=((M==null?void 0:M.filter(X=>X.user_id===Y.user_id))||[]).flatMap(X=>X.roles?X.roles:[]),we=(I==null?void 0:I.filter(X=>X.user_id===Y.user_id))||[],se=(T==null?void 0:T.find(X=>X.id===Y.association_id))||n[0];return{id:Y.user_id,email:(Se==null?void 0:Se.email)||"Contact user directly",profile:{id:Y.id,primary_association_id:Y.association_id,first_name:Y.first_name,last_name:Y.last_name,created_at:Y.created_at},memberships:we.map(X=>({id:X.id,association_id:X.association_id,is_active:X.is_active,joined_at:X.joined_at,association:X.associations})),primaryAssociation:se,roles:H}});s(Q)},y=async()=>{const{data:k,error:v}=await O.from("associations").select("*").order("name");if(v)throw v;i(k||[])},_=async()=>{const{data:k,error:v}=await O.from("roles").select("*").order("name");if(v)throw v;l(k||[])},S=async k=>{if(!e||!t("manage_users"))throw new Error("Insufficient permissions");console.log("Creating user with data:",k);try{const v="https://cprnseisgqidbkmracik.supabase.co/functions/v1/create-user",C={Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwcm5zZWlzZ3FpZGJrbXJhY2lrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzNjY3ODMsImV4cCI6MjA2NTk0Mjc4M30.5y0rMkUg1Ooyz5UXrANcDGnYSGnKfiUEeVzsLbIyiaM","Content-Type":"application/json"};console.log("Making request to:",v);const I=await fetch(v,{method:"POST",headers:C,body:JSON.stringify({email:k.email,password:k.password,firstName:k.firstName,lastName:k.lastName,associationId:k.associationId})});console.log("Response status:",I.status);const z=await I.json();if(console.log("Response result:",z),!I.ok)throw console.error("HTTP error creating user:",I.status,z),new Error(z.error||"Failed to create user");if(!z.success)throw console.error("API error creating user:",z),new Error(z.error||"Failed to create user");console.log("User created successfully, reloading users..."),await x()}catch(v){throw console.error("Error creating user:",v),new Error(v.message)}},m=async(k,v)=>{var C,I,z;if(!e||!t("manage_users"))throw new Error("Insufficient permissions");try{const L={};v.firstName!==void 0&&(L.first_name=v.firstName),v.lastName!==void 0&&(L.last_name=v.lastName),console.log("Updating user:",k,"with data:",L),console.log("Current user roles:",(C=e.roles)==null?void 0:C.map(U=>U.name)),console.log("Current user permissions:",e.permissions);const{data:T,error:R}=await O.from("user_profiles").select("*").eq("user_id",k);if(R)throw console.error("Error fetching user profile:",R),new Error(`Failed to fetch user profile: ${R.message}`);if(!T||T.length===0)throw new Error("User profile not found");console.log("Existing profile:",T[0]);const D=(I=e.roles)==null?void 0:I.some(U=>U.name==="Super Admin"&&U.is_system_role===!0);if(console.log("Is Super Admin?",D),!D&&k!==e.id)throw new Error("Only Super Admins can update other users' profiles");if(Object.keys(L).length===0){console.log("No profile changes to make"),v.associationId!==void 0&&await p(k,v.associationId);return}const{data:ce,error:A}=await O.from("user_profiles").update(L).eq("user_id",k).select();if(A)throw console.error("Supabase update error:",A),console.error("Update error code:",A.code),console.error("Update error details:",A.details),console.error("Update error hint:",A.hint),A.code==="PGRST301"||(z=A.message)!=null&&z.includes("permission denied")?new Error("Permission denied: You may not have the required role to update user profiles. Please ensure you have Super Admin privileges."):A.code==="PGRST116"?new Error("User profile not found or no changes made"):new Error(`Database update failed: ${A.message}`);if(!ce||ce.length===0)throw new Error("No user profile was updated. This may be due to insufficient permissions or the profile not existing.");console.log("User updated successfully:",ce[0]),v.associationId!==void 0&&await p(k,v.associationId),await x()}catch(L){throw console.error("Error in updateUser:",L),L instanceof Error?L:new Error("Failed to update user: "+String(L))}},p=async(k,v)=>{try{console.log("Handling association change for user:",k,"to association:",v);const{data:C,error:I}=await O.from("user_association_memberships").select("id").eq("user_id",k).eq("association_id",v).single();if(I&&I.code!=="PGRST116")throw console.error("Error checking existing membership:",I),new Error("Failed to check association membership");if(C){console.log("User already has membership in this association");return}const{error:z}=await O.from("user_association_memberships").insert({user_id:k,association_id:v,is_active:!0});if(z)throw console.error("Error creating association membership:",z),new Error("Failed to update user association");console.log("Successfully added user to new association")}catch(C){throw console.error("Error in handleAssociationChange:",C),C}};return{users:r,associations:n,roles:a,loading:c,error:d,createUser:S,updateUser:m,deleteUser:async k=>{if(!e||!t("manage_users"))throw new Error("Insufficient permissions");try{const I=await fetch("https://cprnseisgqidbkmracik.supabase.co/functions/v1/delete-user",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNwcm5zZWlzZ3FpZGJrbXJhY2lrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzNjY3ODMsImV4cCI6MjA2NTk0Mjc4M30.5y0rMkUg1Ooyz5UXrANcDGnYSGnKfiUEeVzsLbIyiaM","Content-Type":"application/json"},body:JSON.stringify({userId:k})}),z=await I.json();if(!I.ok)throw new Error(z.error||"Failed to delete user");await x()}catch(v){throw console.error("Error deleting user:",v),new Error(v.message)}},assignRole:async(k,v)=>{if(!e||!t("manage_users"))throw new Error("Insufficient permissions");try{const{error:C}=await O.from("user_role_assignments").insert({user_id:k,role_id:v,assigned_by:e.id});if(C)throw C;await x()}catch(C){throw new Error("Failed to assign role: "+C.message)}},removeRole:async(k,v)=>{if(!e||!t("manage_users"))throw new Error("Insufficient permissions");try{const{error:C}=await O.from("user_role_assignments").delete().eq("user_id",k).eq("role_id",v);if(C)throw C;await x()}catch(C){throw new Error("Failed to remove role: "+C.message)}},addUserToAssociation:async(k,v)=>{if(!e||!t("manage_users"))throw new Error("Insufficient permissions");try{const{data:C,error:I}=await O.from("user_association_memberships").select("id").eq("user_id",k).eq("association_id",v).single();if(I&&I.code!=="PGRST116")throw I;if(C)throw new Error("User is already a member of this association");const{error:z}=await O.from("user_association_memberships").insert({user_id:k,association_id:v,is_active:!0});if(z)throw z;await x()}catch(C){throw new Error("Failed to add user to association: "+C.message)}},removeUserFromAssociation:async k=>{if(!e||!t("manage_users"))throw new Error("Insufficient permissions");try{const{error:v}=await O.from("user_association_memberships").update({is_active:!1}).eq("id",k);if(v)throw v;await x()}catch(v){throw new Error("Failed to remove user from association: "+v.message)}},refetch:f}}function fy(){const{hasPermission:e}=Ne(),{users:t,associations:r,loading:s,createUser:n,updateUser:i,deleteUser:a,addUserToAssociation:l,removeUserFromAssociation:c}=hy(),[u,d]=E.useState(!1),[h,f]=E.useState(null),[x,y]=E.useState(null),[_,S]=E.useState(""),[m,p]=E.useState(""),[g,j]=E.useState({email:"",password:"",firstName:"",lastName:"",selectedAssociations:[]});if(!e("manage_users"))return o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"text-center text-gray-500",children:[o.jsx(tn,{size:48,className:"mx-auto mb-4 text-gray-400"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),o.jsx("p",{children:"You don't have permission to manage users."})]})});const w=async T=>{T.preventDefault();try{h?(console.log("Attempting to update user:",h.id,"with data:",g),await i(h.id,g),f(null),alert("User updated successfully!")):(console.log("Attempting to create user with data:",g),await n({email:g.email,password:g.password,firstName:g.firstName,lastName:g.lastName,associationId:g.selectedAssociations[0]}),d(!1),alert("User created successfully!")),j({email:"",password:"",firstName:"",lastName:"",selectedAssociations:[]})}catch(R){console.error("Error saving user:",R);const D=R instanceof Error?R.message:"Unknown error occurred";alert(`Failed to save user: ${D}`)}},N=T=>{var D;f(T);const R=((D=T.memberships)==null?void 0:D.map(ce=>ce.association_id))||[];console.log("Setting up edit form for user:",T.email,"with associations:",R),j({email:T.email,password:"",firstName:T.profile.first_name,lastName:T.profile.last_name,selectedAssociations:R}),d(!0)},b=async T=>{if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await a(T)}catch(R){console.error("Error deleting user:",R),alert("Failed to delete user. Please try again.")}},k=()=>{d(!1),f(null),y(null),j({email:"",password:"",firstName:"",lastName:"",selectedAssociations:[]})},v=T=>{j(R=>({...R,selectedAssociations:R.selectedAssociations.includes(T)?R.selectedAssociations.filter(D=>D!==T):[...R.selectedAssociations,T]}))},C=T=>{y(T)},I=async(T,R)=>{try{await l(T,R)}catch(D){console.error("Error adding association:",D),alert("Failed to add association: "+D.message)}},z=async T=>{if(window.confirm("Are you sure you want to remove this user from this association?"))try{await c(T)}catch(R){console.error("Error removing association:",R),alert("Failed to remove association: "+R.message)}},L=t.filter(T=>{const R=T.email.toLowerCase().includes(_.toLowerCase())||(T.profile.first_name&&T.profile.last_name?`${T.profile.first_name} ${T.profile.last_name}`.toLowerCase().includes(_.toLowerCase()):!1),D=!m||T.profile.primary_association_id===m||T.memberships.some(ce=>ce.association_id===m);return R&&D});return s?o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),o.jsx("p",{className:"text-center mt-4 text-gray-600",children:"Loading users..."})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Aa,{className:"h-6 w-6 text-blue-600"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"User Management"})]}),o.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(yr,{size:16}),o.jsx("span",{children:"Create User"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx(qi,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",value:_,onChange:T=>S(T.target.value),placeholder:"Search users by name or email...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{value:m,onChange:T=>p(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[o.jsx("option",{value:"",children:"All Associations"}),r.map(T=>o.jsx("option",{value:T.id,children:T.name},T.id))]}),o.jsx(Jt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Primary Association"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"All Associations"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roles"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L.map(T=>{var R;return o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(ct,{className:"h-8 w-8 text-gray-400 bg-gray-100 rounded-full p-1"}),o.jsxs("div",{className:"ml-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.profile.first_name&&T.profile.last_name?`${T.profile.first_name} ${T.profile.last_name}`.trim():"No name set"}),o.jsx("div",{className:"text-sm text-gray-500",children:T.email})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:((R=T.primaryAssociation)==null?void 0:R.name)||"No primary association"})}),o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{className:"flex flex-wrap gap-1 max-w-xs",children:[T.memberships.map(D=>o.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded flex items-center",children:[o.jsx(it,{className:"h-3 w-3 mr-1"}),D.association.name]},D.id)),T.memberships.length===0&&o.jsx("span",{className:"text-sm text-gray-500",children:"No associations"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"flex flex-wrap gap-1",children:T.roles.map(D=>o.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:D.name},D.id))})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(T.profile.created_at).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>N(T),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit user",children:o.jsx(br,{size:16})}),o.jsx("button",{onClick:()=>C(T),className:"text-green-600 hover:text-green-800 transition-colors",title:"Manage associations",children:o.jsx(it,{size:16})}),T.id!==(T==null?void 0:T.id)&&o.jsx("button",{onClick:()=>b(T.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete user",children:o.jsx(_r,{size:16})})]})})]},T.id)})})]})}),L.length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Aa,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),o.jsx("p",{className:"text-gray-600",children:_||m?"Try adjusting your search or filter criteria.":"Create your first user to get started."})]})]})}),u&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:h?"Edit User":"Create New User"}),o.jsx("button",{onClick:k,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"×"})]}),o.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),o.jsx("input",{type:"text",value:g.firstName,onChange:T=>j(R=>({...R,firstName:T.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),o.jsx("input",{type:"text",value:g.lastName,onChange:T=>j(R=>({...R,lastName:T.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Doe"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),o.jsx("input",{type:"email",value:g.email,onChange:T=>j(R=>({...R,email:T.target.value})),required:!0,disabled:!!h,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100",placeholder:"john@example.com"})]}),!h&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password *"}),o.jsx("input",{type:"password",value:g.password,onChange:T=>j(R=>({...R,password:T.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h?"Associations *":"Primary Association *"}),h?o.jsxs("div",{children:[o.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-gray-200 rounded-md p-3 bg-gray-50",children:r.map(T=>o.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer hover:bg-white rounded p-2 transition-colors",children:[o.jsx("input",{type:"checkbox",checked:g.selectedAssociations.includes(T.id),onChange:()=>v(T.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),o.jsx("span",{className:"text-sm text-gray-700 font-medium",children:T.name})]},T.id))}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Check the associations this user should have access to. Users can belong to multiple associations."})]}):o.jsxs("select",{value:g.selectedAssociations[0]||"",onChange:T=>j(R=>({...R,selectedAssociations:T.target.value?[T.target.value]:[]})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:"Select an association"}),r.map(T=>o.jsx("option",{value:T.id,children:T.name},T.id))]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:o.jsxs("span",{children:[h?"Update":"Create"," User"]})})]})]})]})}),x&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Manage Associations for ",x.profile.first_name," ",x.profile.last_name]}),o.jsx("button",{onClick:k,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"×"})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Current Associations"}),o.jsxs("div",{className:"space-y-3",children:[x.memberships.map(T=>o.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(it,{className:"h-5 w-5 text-blue-600"}),o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-gray-900",children:T.association.name}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Joined: ",new Date(T.joined_at).toLocaleDateString(),T.association_id===x.profile.primary_association_id&&o.jsx("span",{className:"ml-2 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:"Primary"})]})]})]}),o.jsx("button",{onClick:()=>z(T.id),className:"text-red-600 hover:text-red-800 transition-colors p-1",title:"Remove from association",children:o.jsx(Xt,{size:16})})]},T.id)),x.memberships.length===0&&o.jsxs("div",{className:"text-center py-8 text-gray-500",children:[o.jsx(it,{size:48,className:"mx-auto mb-4 text-gray-300"}),o.jsx("p",{children:"No association memberships"})]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Add to Association"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:r.filter(T=>!x.memberships.some(R=>R.association_id===T.id)).map(T=>o.jsxs("button",{onClick:()=>I(x.id,T.id),className:"flex items-center space-x-2 p-3 border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-400 transition-colors",children:[o.jsx(ty,{size:16,className:"text-blue-600"}),o.jsx("span",{className:"text-gray-800",children:T.name})]},T.id))}),r.filter(T=>!x.memberships.some(R=>R.association_id===T.id)).length===0&&o.jsx("p",{className:"text-gray-500 text-center py-4",children:"User is already a member of all associations"})]})]}),o.jsx("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:o.jsx("button",{onClick:k,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Close"})})]})})]})}function my(){const{user:e,hasPermission:t}=Ne(),[r,s]=E.useState([]),[n,i]=E.useState(!0),[a,l]=E.useState(null),[c,u]=E.useState(!1),[d,h]=E.useState(null),[f,x]=E.useState(""),[y,_]=E.useState({name:"",abbreviation:"",address:"",city:"",state:"",zip_code:"",phone:"",email:"",website:""});E.useEffect(()=>{e&&t("manage_company")?S():e&&i(!1)},[e]);const S=async()=>{try{i(!0),l(null);const{data:b,error:k}=await O.from("associations").select("*").eq("is_active",!0).order("name");if(k)throw k;s(b||[])}catch(b){console.error("Error loading associations:",b),l(b.message||"Failed to load associations")}finally{i(!1)}},m=async b=>{b.preventDefault(),l(null);try{if(d){const{error:k}=await O.from("associations").update({name:y.name,abbreviation:y.abbreviation||null,address:y.address||null,city:y.city||null,state:y.state||null,zip_code:y.zip_code||null,phone:y.phone||null,email:y.email||null,website:y.website||null}).eq("id",d.id);if(k)throw k;alert("Association updated successfully!")}else{const{error:k}=await O.from("associations").insert({name:y.name,abbreviation:y.abbreviation||null,address:y.address||null,city:y.city||null,state:y.state||null,zip_code:y.zip_code||null,phone:y.phone||null,email:y.email||null,website:y.website||null});if(k)throw k;alert("Association created successfully!")}u(!1),h(null),_({name:"",abbreviation:"",address:"",city:"",state:"",zip_code:"",phone:"",email:"",website:""}),await S()}catch(k){console.error("Error saving association:",k),l(k.message||"Failed to save association")}},p=b=>{h(b),_({name:b.name,abbreviation:b.abbreviation||"",address:b.address||"",city:b.city||"",state:b.state||"",zip_code:b.zip_code||"",phone:b.phone||"",email:b.email||"",website:b.website||""}),u(!0)},g=async b=>{if(window.confirm("Are you sure you want to delete this association? This action cannot be undone."))try{const{error:k}=await O.from("associations").update({is_active:!1}).eq("id",b);if(k)throw k;await S(),alert("Association deleted successfully!")}catch(k){console.error("Error deleting association:",k),l(k.message||"Failed to delete association")}},j=()=>{u(!1),h(null),_({name:"",abbreviation:"",address:"",city:"",state:"",zip_code:"",phone:"",email:"",website:""})},w=b=>{_(k=>({...k,[b.target.name]:b.target.value}))},N=r.filter(b=>b.name.toLowerCase().includes(f.toLowerCase())||b.city&&b.city.toLowerCase().includes(f.toLowerCase())||b.state&&b.state.toLowerCase().includes(f.toLowerCase()));return t("manage_company")?n?o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),o.jsx("p",{className:"text-center mt-4 text-gray-600",children:"Loading associations..."})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(it,{className:"h-6 w-6 text-blue-600"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Association Management"})]}),o.jsxs("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(yr,{size:16}),o.jsx("span",{children:"Create Association"})]})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(qi,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",value:f,onChange:b=>x(b.target.value),placeholder:"Search associations by name, city, or state...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),a&&o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-md mb-6",children:[o.jsx("p",{className:"font-medium",children:"Error:"}),o.jsx("p",{children:a})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Association"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abbreviation"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Abbreviation"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(b=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(it,{className:"h-8 w-8 text-blue-600 bg-blue-100 rounded-full p-1"}),o.jsx("div",{className:"ml-4",children:o.jsx("div",{className:"text-sm font-medium text-gray-900",children:b.name})})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:b.abbreviation||o.jsx("span",{className:"text-gray-400 italic",children:"No abbreviation"})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-900",children:[b.address&&o.jsxs("div",{className:"flex items-center mb-1",children:[o.jsx(ur,{size:12,className:"mr-1 text-gray-400"}),b.address]}),(b.city||b.state||b.zip_code)&&o.jsx("div",{className:"text-sm text-gray-500",children:[b.city,b.state,b.zip_code].filter(Boolean).join(", ")}),!b.address&&!b.city&&!b.state&&o.jsx("span",{className:"text-sm text-gray-400",children:"No location info"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"text-sm text-gray-900 space-y-1",children:[b.email&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(vi,{size:12,className:"mr-1 text-gray-400"}),o.jsx("a",{href:`mailto:${b.email}`,className:"text-blue-600 hover:text-blue-800",children:b.email})]}),b.phone&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(lu,{size:12,className:"mr-1 text-gray-400"}),o.jsx("a",{href:`tel:${b.phone}`,className:"text-blue-600 hover:text-blue-800",children:b.phone})]}),b.website&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(au,{size:12,className:"mr-1 text-gray-400"}),o.jsx("a",{href:b.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"Website"})]}),!b.email&&!b.phone&&!b.website&&o.jsx("span",{className:"text-sm text-gray-400",children:"No contact info"})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(b.created_at).toLocaleDateString()}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>p(b),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit association",children:o.jsx(br,{size:16})}),o.jsx("button",{onClick:()=>g(b.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete association",children:o.jsx(_r,{size:16})})]})})]},b.id))})]})}),N.length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx(it,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No associations found"}),o.jsx("p",{className:"text-gray-600",children:f?"Try adjusting your search criteria.":"Create your first association to get started."})]})]})}),c&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:d?"Edit Association":"Create New Association"}),o.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Xt,{size:24})})]}),o.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Association Name *"}),o.jsx("input",{type:"text",name:"name",value:y.name,onChange:w,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Oakwood Community HOA"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assoc. Abbreviation *"}),o.jsx("input",{type:"text",name:"abbreviation",value:y.abbreviation,onChange:w,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., OCHOA"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(ur,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",name:"address",value:y.address,onChange:w,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"123 Main Street"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),o.jsx("input",{type:"text",name:"city",value:y.city,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Anytown"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State"}),o.jsx("input",{type:"text",name:"state",value:y.state,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"CA",maxLength:2})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zip Code"}),o.jsx("input",{type:"text",name:"zip_code",value:y.zip_code,onChange:w,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"90210"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(lu,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"tel",name:"phone",value:y.phone,onChange:w,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(555) 123-4567"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(vi,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"email",name:"email",value:y.email,onChange:w,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"info@oakwoodhoa.com"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),o.jsxs("div",{className:"relative",children:[o.jsx(au,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"url",name:"website",value:y.website,onChange:w,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://www.oakwoodhoa.com"})]})]}),a&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 p-3 rounded-md",children:a}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:o.jsxs("span",{children:[d?"Update":"Create"," Association"]})})]})]})]})})]}):o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"text-center text-gray-500",children:[o.jsx(it,{size:48,className:"mx-auto mb-4 text-gray-400"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),o.jsx("p",{children:"You don't have permission to manage associations."})]})})}function py(){const{user:e,hasPermission:t}=Ne(),[r,s]=E.useState([]),[n,i]=E.useState(!0),[a,l]=E.useState(null);E.useEffect(()=>{e&&(t("manage_violations")||t("manage_company"))?c():e&&i(!1)},[e]);const c=async()=>{if(e)try{i(!0),l(null);const{data:x,error:y}=await O.from("violation_categories").select("*").or(`association_id.eq.${e.currentAssociation.id},is_system_category.eq.true`).order("is_system_category",{ascending:!1}).order("sort_order").order("name");if(y)throw y;s(x||[])}catch(x){console.error("Error loading violation categories:",x),l(x.message||"Failed to load violation categories")}finally{i(!1)}};return{categories:r,loading:n,error:a,createCategory:async x=>{if(!e||!(t("manage_violations")||t("manage_company")))throw new Error("Insufficient permissions");try{const{data:y,error:_}=await O.from("violation_categories").insert({name:x.name,description:x.description||null,color:x.color,sort_order:x.sort_order,association_id:e.currentAssociation.id,is_system_category:!1,is_active:!0}).select().single();if(_)throw _;return s(S=>[...S,y].sort((m,p)=>m.is_system_category!==p.is_system_category?m.is_system_category?-1:1:m.sort_order-p.sort_order)),y}catch(y){throw new Error("Failed to create category: "+y.message)}},updateCategory:async(x,y)=>{if(!e||!(t("manage_violations")||t("manage_company")))throw new Error("Insufficient permissions");try{const{data:_,error:S}=await O.from("violation_categories").update({...y,updated_at:new Date().toISOString()}).eq("id",x).eq("is_system_category",!1).select().single();if(S)throw S;return s(m=>m.map(p=>p.id===x?_:p)),_}catch(_){throw new Error("Failed to update category: "+_.message)}},deleteCategory:async x=>{if(!e||!(t("manage_violations")||t("manage_company")))throw new Error("Insufficient permissions");try{const{error:y}=await O.from("violation_categories").update({is_active:!1}).eq("id",x).eq("is_system_category",!1);if(y)throw y;s(_=>_.filter(S=>S.id!==x))}catch(y){throw new Error("Failed to delete category: "+y.message)}},reorderCategories:async x=>{if(!e||!(t("manage_violations")||t("manage_company")))throw new Error("Insufficient permissions");try{const y=x.map(_=>O.from("violation_categories").update({sort_order:_.sort_order}).eq("id",_.id).eq("is_system_category",!1));await Promise.all(y),await c()}catch(y){throw new Error("Failed to reorder categories: "+y.message)}},refetch:c}}const gy=["#6B7280","#EF4444","#F97316","#EAB308","#22C55E","#06B6D4","#3B82F6","#8B5CF6","#EC4899","#F43F5E"];function yy(){const{hasPermission:e}=Ne(),{categories:t,loading:r,error:s,createCategory:n,updateCategory:i,deleteCategory:a,reorderCategories:l}=py(),[c,u]=E.useState(!1),[d,h]=E.useState(null),[f,x]=E.useState(""),[y,_]=E.useState({name:"",description:"",color:"#6B7280"});if(!e("manage_violations")&&!e("manage_company"))return o.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:o.jsxs("div",{className:"text-center text-gray-500",children:[o.jsx(Wn,{size:48,className:"mx-auto mb-4 text-gray-400"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),o.jsx("p",{children:"You don't have permission to manage violation categories."})]})});const S=async v=>{v.preventDefault();try{if(d)await i(d.id,{name:y.name,description:y.description||void 0,color:y.color}),h(null),alert("Category updated successfully!");else{const C=Math.max(...t.filter(I=>!I.is_system_category).map(I=>I.sort_order),-1);await n({name:y.name,description:y.description||void 0,color:y.color,sort_order:C+1}),alert("Category created successfully!")}u(!1),_({name:"",description:"",color:"#6B7280"})}catch(C){console.error("Error saving category:",C),alert("Failed to save category: "+C.message)}},m=v=>{h(v),_({name:v.name,description:v.description||"",color:v.color}),u(!0)},p=async v=>{if(window.confirm("Are you sure you want to delete this category? This action cannot be undone."))try{await a(v),alert("Category deleted successfully!")}catch(C){console.error("Error deleting category:",C),alert("Failed to delete category: "+C.message)}},g=()=>{u(!1),h(null),_({name:"",description:"",color:"#6B7280"})},j=async v=>{const C=t.filter(L=>!L.is_system_category).sort((L,T)=>L.sort_order-T.sort_order),I=C.findIndex(L=>L.id===v.id);if(I<=0)return;const z=C[I-1];try{await l([{id:v.id,sort_order:z.sort_order},{id:z.id,sort_order:v.sort_order}])}catch(L){console.error("Error reordering categories:",L),alert("Failed to reorder categories: "+L.message)}},w=async v=>{const C=t.filter(L=>!L.is_system_category).sort((L,T)=>L.sort_order-T.sort_order),I=C.findIndex(L=>L.id===v.id);if(I>=C.length-1)return;const z=C[I+1];try{await l([{id:v.id,sort_order:z.sort_order},{id:z.id,sort_order:v.sort_order}])}catch(L){console.error("Error reordering categories:",L),alert("Failed to reorder categories: "+L.message)}},N=t.filter(v=>v.name.toLowerCase().includes(f.toLowerCase())||v.description&&v.description.toLowerCase().includes(f.toLowerCase())),b=N.filter(v=>v.is_system_category),k=N.filter(v=>!v.is_system_category).sort((v,C)=>v.sort_order-C.sort_order);return r?o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),o.jsx("p",{className:"text-center mt-4 text-gray-600",children:"Loading categories..."})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(Wn,{className:"h-6 w-6 text-blue-600"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Violation Categories"})]}),o.jsxs("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(yr,{size:16}),o.jsx("span",{children:"Create Category"})]})]}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative",children:[o.jsx(qi,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",value:f,onChange:v=>x(v.target.value),placeholder:"Search categories by name or description...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),s&&o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-4 rounded-md mb-6",children:[o.jsx("p",{className:"font-medium",children:"Error:"}),o.jsx("p",{children:s})]}),b.length>0&&o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"System Categories"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(v=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:v.color}}),o.jsx("h4",{className:"font-medium text-gray-800",children:v.name})]}),o.jsx("span",{className:"px-2 py-1 bg-gray-200 text-gray-600 text-xs rounded",children:"System"})]}),v.description&&o.jsx("p",{className:"text-sm text-gray-600",children:v.description})]},v.id))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Custom Categories"}),k.length===0?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Wn,{size:48,className:"mx-auto text-gray-400 mb-4"}),o.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No custom categories"}),o.jsx("p",{className:"text-gray-600 mb-4",children:f?"No categories match your search criteria.":"Create your first custom violation category to get started."}),!f&&o.jsxs("button",{onClick:()=>u(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center space-x-2",children:[o.jsx(yr,{size:16}),o.jsx("span",{children:"Create First Category"})]})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Color"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map((v,C)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 flex-shrink-0",style:{backgroundColor:v.color}}),o.jsx("span",{className:"text-sm font-medium text-gray-900",children:v.name})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("div",{className:"text-sm text-gray-900 max-w-xs",children:v.description||o.jsx("span",{className:"text-gray-400 italic",children:"No description"})})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:v.color}}),o.jsx("span",{className:"text-sm text-gray-600 font-mono",children:v.color})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{className:"text-sm text-gray-600",children:v.sort_order}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("button",{onClick:()=>j(v),disabled:C===0,className:"text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move up",children:o.jsx(G0,{size:12})}),o.jsx("button",{onClick:()=>w(v),disabled:C===k.length-1,className:"text-gray-400 hover:text-gray-600 disabled:opacity-30 disabled:cursor-not-allowed",title:"Move down",children:o.jsx(J0,{size:12})})]})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>m(v),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit category",children:o.jsx(br,{size:16})}),o.jsx("button",{onClick:()=>p(v.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete category",children:o.jsx(_r,{size:16})})]})})]},v.id))})]})})]})]})}),c&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:d?"Edit Category":"Create New Category"}),o.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Xt,{size:24})})]}),o.jsxs("form",{onSubmit:S,className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Name *"}),o.jsx("input",{type:"text",value:y.name,onChange:v=>_(C=>({...C,name:v.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Pool Area"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),o.jsx("textarea",{value:y.description,onChange:v=>_(C=>({...C,description:v.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe what violations fall under this category..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 rounded border border-gray-300 flex-shrink-0",style:{backgroundColor:y.color}}),o.jsx("input",{type:"color",value:y.color,onChange:v=>_(C=>({...C,color:v.target.value})),className:"w-16 h-8 border border-gray-300 rounded cursor-pointer"}),o.jsx("input",{type:"text",value:y.color,onChange:v=>_(C=>({...C,color:v.target.value})),className:"flex-1 px-3 py-1 border border-gray-300 rounded font-mono text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"#6B7280"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:gy.map(v=>o.jsx("button",{type:"button",onClick:()=>_(C=>({...C,color:v})),className:`w-6 h-6 rounded border-2 transition-all ${y.color===v?"border-gray-800 scale-110":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:v},title:v},v))})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:o.jsxs("span",{children:[d?"Update":"Create"," Category"]})})]})]})]})})]})}function xy({onAddViolation:e}){const{user:t,signOut:r,hasPermission:s,clearAuthState:n,switchAssociation:i}=Ne(),[a,l]=E.useState(!1),[c,u]=E.useState(!1),[d,h]=E.useState(!1),[f,x]=E.useState(!1),[y]=E.useState(!1),[_,S]=E.useState(!1),m=async()=>{if(window.confirm("This will clear all authentication data and log you out. Continue?")){console.log("Clearing auth state from header debug menu...");const p=await n();console.log("Auth state cleared:",p),console.log("Forcing navigation to login..."),setTimeout(()=>{window.location.href=window.location.origin},100)}};return o.jsxs(o.Fragment,{children:[o.jsx("header",{className:"bg-white shadow-sm border-b",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex justify-between items-center py-6",children:[o.jsx("button",{onClick:r,className:"p-0, border-none, bg-transparent",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(gr,{className:"h-8 w-8 text-blue-600"}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"HOA Violations Tracker"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Manage and track community violations"})]})]})}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>S(!_),className:"flex items-center space-x-2 text-sm text-gray-600 hover:text-gray-800 transition-colors",title:"Switch Association",children:[o.jsx(it,{className:"h-5 w-5"}),o.jsx("span",{children:t==null?void 0:t.currentAssociation.name}),t&&t.associations&&t.associations.length>1&&o.jsx(Jt,{className:"h-4 w-4"})]}),_&&t&&t.associations&&t.associations.length>1&&o.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-md shadow-lg border z-50",children:o.jsx("div",{className:"py-1",children:t.associations.map(p=>o.jsx("button",{onClick:()=>{i(p.id),S(!1)},className:`w-full text-left px-4 py-2 text-sm transition-colors ${p.id===t.currentAssociation.id?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(it,{className:"h-6 w-6 mr-2"}),o.jsx("span",{children:p.name})]})},p.id))})})]}),o.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[o.jsx(ct,{className:"h-4 w-4"}),o.jsx("span",{children:t!=null&&t.profile.first_name?`${t.profile.first_name} ${t.profile.last_name}`.trim():t==null?void 0:t.email}),(t==null?void 0:t.roles.length)&&o.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded",children:t.roles[0].name})]}),(s("create_violations")||s("manage_violations"))&&o.jsx("button",{onClick:e,className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition-colors shadow-md",title:"Add Violation",children:o.jsx(yr,{className:"h-4 w-4"})}),s("manage_roles")&&o.jsx("button",{onClick:()=>l(!0),className:"text-gray-600 hover:text-gray-800 transition-colors flex items-center space-x-1",title:"Manage Roles",children:o.jsx(tn,{className:"h-4 w-4"})}),s("manage_users")&&o.jsx("button",{onClick:()=>u(!0),className:"text-gray-600 hover:text-gray-800 transition-colors flex items-center space-x-1",title:"Manage Users",children:o.jsx(ct,{className:"h-5 w-5"})}),(s("manage_violations")||s("manage_company"))&&o.jsx("button",{onClick:()=>x(!0),className:"text-gray-600 hover:text-gray-800 transition-colors flex items-center space-x-1",title:"Manage Categories",children:o.jsx(Wn,{className:"h-5 w-5"})}),s("manage_company")&&o.jsx("button",{onClick:()=>h(!0),className:"text-gray-600 hover:text-gray-800 transition-colors flex items-center space-x-1",title:"Manage Associations",children:o.jsx(it,{className:"h-5 w-5"})}),(t==null?void 0:t.roles.some(p=>p.name==="Super Admin"))&&o.jsx("div",{className:"relative",children:y&&o.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-md shadow-lg border z-50",children:o.jsx("button",{onClick:m,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Clear Auth State"})})})]}),o.jsx("button",{onClick:r,className:"text-gray-600 hover:text-gray-800 transition-colors flex items-center space-x-1",title:"Sign out",children:o.jsx(ey,{className:"h-5 w-5"})})]})})}),a&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Role Management"}),o.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:"×"})]}),o.jsx("div",{className:"p-6",children:o.jsx(dy,{})})]})}),c&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"User Management"}),o.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:"×"})]}),o.jsx("div",{className:"p-6",children:o.jsx(fy,{})})]})}),d&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Association Management"}),o.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:"×"})]}),o.jsx("div",{className:"p-6",children:o.jsx(my,{})})]})}),f&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-7xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Category Management"}),o.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:"×"})]}),o.jsx("div",{className:"p-6",children:o.jsx(yy,{})})]})})]})}function vy({violations:e}){const[t,r]=E.useState(!1),s={total:e.length,pending:e.filter(i=>i.status==="Pending").length,inProgress:e.filter(i=>i.status==="In Progress").length,resolved:e.filter(i=>i.status==="Resolved").length,highPriority:e.filter(i=>i.priority==="High").length},n=({title:i,value:a,icon:l,color:c,bgColor:u})=>o.jsx("div",{className:`${u} rounded-lg p-6 shadow-md`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-600",children:i}),o.jsx("p",{className:`text-3xl font-bold ${c}`,children:a})]}),o.jsx(l,{className:`h-8 w-8 ${c}`})]})});return o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Dashboard Overview"}),o.jsxs("button",{onClick:()=>r(!t),className:"flex items-center space-x-2 px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors","aria-label":t?"Expand dashboard":"Collapse dashboard",children:[o.jsxs("span",{className:"text-sm font-medium",children:[t?"Show":"Hide"," Stats"]}),t?o.jsx(Jt,{className:"h-4 w-4"}):o.jsx(Wh,{className:"h-4 w-4"})]})]}),!t&&o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[o.jsx(n,{title:"Total Violations",value:s.total,icon:K0,color:"text-blue-600",bgColor:"bg-blue-50"}),o.jsx(n,{title:"Pending",value:s.pending,icon:Al,color:"text-yellow-600",bgColor:"bg-yellow-50"}),o.jsx(n,{title:"In Progress",value:s.inProgress,icon:Ca,color:"text-orange-600",bgColor:"bg-orange-50"}),o.jsx(n,{title:"Resolved",value:s.resolved,icon:rs,color:"text-green-600",bgColor:"bg-green-50"}),o.jsx(n,{title:"High Priority",value:s.highPriority,icon:Ca,color:"text-red-600",bgColor:"bg-red-50"})]})]})}const wy=["All","Landscaping","Parking","Noise","Architectural","Pet","Trash/Recycling","Pool/Spa","Other"],by=["All","Pending","In Progress","Resolved","Dismissed"],_y=["All","Low","Medium","High"];function jy({filters:e,onFiltersChange:t,associations:r=[]}){const s=(n,i)=>{t({...e,[n]:i})};return o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Z0,{size:20,className:"text-gray-600 mr-2"}),o.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Filter Violations"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),o.jsxs("div",{className:"relative",children:[o.jsx(qi,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",value:e.search,onChange:n=>s("search",n.target.value),placeholder:"Search address, description...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),o.jsx("select",{value:e.category,onChange:n=>s("category",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:wy.map(n=>o.jsx("option",{value:n,children:n},n))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Association"}),o.jsxs("select",{value:e.association||"All",onChange:n=>s("association",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"All",children:"All Associations"}),r.map(n=>o.jsx("option",{value:n,children:n},n))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),o.jsx("select",{value:e.status,onChange:n=>s("status",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:by.map(n=>o.jsx("option",{value:n,children:n},n))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),o.jsx("select",{value:e.priority,onChange:n=>s("priority",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:_y.map(n=>o.jsx("option",{value:n,children:n},n))})]})]})]})}function Il({photos:e,isOpen:t,onClose:r,initialIndex:s=0}){const[n,i]=E.useState(s);if(!t||e.length===0)return null;const a=()=>{i(u=>u===0?e.length-1:u-1)},l=()=>{i(u=>u===e.length-1?0:u+1)},c=u=>{u.key==="Escape"&&r(),u.key==="ArrowLeft"&&a(),u.key==="ArrowRight"&&l()};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:r,onKeyDown:c,tabIndex:0,children:o.jsxs("div",{className:"relative max-w-4xl max-h-full p-4",onClick:u=>u.stopPropagation(),children:[o.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-white hover:text-gray-300 z-10",children:o.jsx(Xt,{size:32})}),o.jsx("img",{src:e[n],alt:`Photo ${n+1}`,className:"max-w-full max-h-full object-contain"}),e.length>1&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:a,className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white hover:text-gray-300 bg-black bg-opacity-50 rounded-full p-2",children:o.jsx(Y0,{size:24})}),o.jsx("button",{onClick:l,className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white hover:text-gray-300 bg-black bg-opacity-50 rounded-full p-2",children:o.jsx(X0,{size:24})}),o.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:e.map((u,d)=>o.jsx("button",{onClick:()=>i(d),className:`w-3 h-3 rounded-full ${d===n?"bg-white":"bg-white bg-opacity-50"}`},d))})]}),o.jsxs("div",{className:"absolute bottom-4 right-4 text-white text-sm bg-black bg-opacity-50 px-2 py-1 rounded",children:[n+1," / ",e.length]})]})})}const ky={Pending:"bg-yellow-100 text-yellow-800","In Progress":"bg-blue-100 text-blue-800",Resolved:"bg-green-100 text-green-800",Dismissed:"bg-gray-100 text-gray-800"},Ny={Low:"bg-green-100 text-green-800",Medium:"bg-yellow-100 text-yellow-800",High:"bg-red-100 text-red-800"},Sy={Landscaping:"bg-green-50 border-green-200",Parking:"bg-blue-50 border-blue-200",Noise:"bg-purple-50 border-purple-200",Architectural:"bg-orange-50 border-orange-200",Pet:"bg-pink-50 border-pink-200","Trash/Recycling":"bg-gray-50 border-gray-200","Pool/Spa":"bg-cyan-50 border-cyan-200",Other:"bg-slate-50 border-slate-200"};function Cy({violation:e,onEdit:t,onDelete:r}){const[s,n]=E.useState(!1),[i,a]=E.useState(0),l=u=>new Date(u).toLocaleDateString(),c=u=>{a(u),n(!0)};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`bg-white rounded-lg shadow-md border-l-4 ${Sy[e.category]} p-6 hover:shadow-lg transition-shadow`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:e.address}),o.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.description})]}),o.jsxs("div",{className:"flex space-x-2 ml-4",children:[o.jsx("button",{onClick:()=>t(e),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit violation",children:o.jsx(br,{size:18})}),o.jsx("button",{onClick:()=>r(e.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete violation",children:o.jsx(_r,{size:18})})]})]}),e.photos&&e.photos.length>0&&o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center mb-2",children:[o.jsx(Vi,{size:16,className:"text-gray-500 mr-1"}),o.jsxs("span",{className:"text-sm text-gray-600",children:[e.photos.length," photo",e.photos.length>1?"s":""]})]}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:e.photos.slice(0,3).map((u,d)=>o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:u,alt:`Violation photo ${d+1}`,className:"w-full h-16 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>c(d)}),d===2&&e.photos.length>3&&o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded flex items-center justify-center cursor-pointer",onClick:()=>c(d),children:o.jsxs("span",{className:"text-white text-sm font-medium",children:["+",e.photos.length-3]})})]},d))})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ky[e.status]}`,children:e.status}),o.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ny[e.priority]}`,children:[o.jsx(Xs,{size:12,className:"inline mr-1"}),e.priority]}),o.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium",children:e.category})]}),o.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Zs,{size:14,className:"mr-1"}),"Reported: ",l(e.dateReported)]}),e.dateResolved&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(Zs,{size:14,className:"mr-1"}),"Resolved: ",l(e.dateResolved)]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(ct,{size:14,className:"mr-1"}),e.reportedBy]})]}),e.notes&&o.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:o.jsxs("p",{className:"text-sm text-gray-700",children:[o.jsx("strong",{children:"Notes:"})," ",e.notes]})})]}),e.photos&&o.jsx(Il,{photos:e.photos,isOpen:s,onClose:()=>n(!1),initialIndex:i})]})}const Ey={Pending:"bg-yellow-100 text-yellow-800","In Progress":"bg-blue-100 text-blue-800",Resolved:"bg-green-100 text-green-800",Dismissed:"bg-gray-100 text-gray-800"},Ty={Low:"text-green-600",Medium:"text-yellow-600",High:"text-red-600"};function Py({violations:e,onView:t,onEdit:r,onDelete:s}){const[n,i]=E.useState(!1),[a,l]=E.useState([]),[c,u]=E.useState(0),[d,h]=E.useState("dateReported"),[f,x]=E.useState("desc"),y=w=>new Date(w).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"2-digit"}),_=(w,N,b=0)=>{w.stopPropagation(),l(N),u(b),i(!0)},S=w=>{d===w?f==="asc"?x("desc"):f==="desc"?(x(null),h("dateReported")):x("asc"):(h(w),x("asc"))},m=w=>d!==w?o.jsx(ou,{size:14,className:"text-gray-400"}):f==="asc"?o.jsx(Wh,{size:14,className:"text-blue-600"}):f==="desc"?o.jsx(Jt,{size:14,className:"text-blue-600"}):o.jsx(ou,{size:14,className:"text-gray-400"}),p=[...e].sort((w,N)=>{if(!d||!f)return new Date(N.dateReported).getTime()-new Date(w.dateReported).getTime();let b,k;switch(d){case"address":b=w.address.toLowerCase(),k=N.address.toLowerCase();break;case"description":b=w.description.toLowerCase(),k=N.description.toLowerCase();break;case"category":b=w.category.toLowerCase(),k=N.category.toLowerCase();break;case"association":b=w.association.toLowerCase(),k=N.association.toLowerCase();break;case"status":const v={Pending:1,"In Progress":2,Resolved:3,Dismissed:4};b=v[w.status],k=v[N.status];break;case"priority":const C={High:3,Medium:2,Low:1};b=C[w.priority],k=C[N.priority];break;case"dateReported":b=new Date(w.dateReported).getTime(),k=new Date(N.dateReported).getTime();break;case"reportedBy":b=w.reportedBy.toLowerCase(),k=N.reportedBy.toLowerCase();break;default:return 0}return b<k?f==="asc"?-1:1:b>k?f==="asc"?1:-1:0}),g=(w,N)=>w.length<=N?w:w.substring(0,N)+"...",j=({column:w,children:N})=>o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 transition-colors select-none",onClick:()=>S(w),children:o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("span",{children:N}),m(w)]})});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx(j,{column:"address",children:"Address"}),o.jsx(j,{column:"description",children:"Description"}),o.jsx(j,{column:"association",children:"Association"}),o.jsx(j,{column:"category",children:"Category"}),o.jsx(j,{column:"status",children:"Status"}),o.jsx(j,{column:"priority",children:"Priority"}),o.jsx(j,{column:"dateReported",children:"Reported"}),o.jsx(j,{column:"reportedBy",children:"Reported By"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Photos"}),o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((w,N)=>o.jsxs("tr",{className:`hover:bg-blue-50 cursor-pointer transition-colors ${N%2===0?"bg-white":"bg-gray-25"}`,onClick:()=>t(w),children:[o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(ur,{size:14,className:"text-gray-400 mr-2 flex-shrink-0"}),o.jsx("div",{className:"text-sm font-medium text-gray-900 max-w-xs",children:w.address})]})}),o.jsx("td",{className:"px-4 py-3",children:o.jsx("div",{className:"text-sm text-gray-900 max-w-xs",children:o.jsx("span",{title:w.description,children:g(w.description,60)})})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsx("div",{className:"text-sm text-gray-900",children:w.association})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs font-medium",children:w.category})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ey[w.status]}`,children:w.status})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsxs("div",{className:`flex items-center ${Ty[w.priority]}`,children:[o.jsx(Xs,{size:12,className:"mr-1"}),o.jsx("span",{className:"text-xs font-medium",children:w.priority})]})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(Zs,{size:12,className:"mr-1 text-gray-400"}),y(w.dateReported)]})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsxs("div",{className:"flex items-center text-sm text-gray-900 max-w-xs",children:[o.jsx(ct,{size:12,className:"mr-1 text-gray-400 flex-shrink-0"}),o.jsx("span",{className:"truncate",children:w.reportedBy})]})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:w.photos&&w.photos.length>0?o.jsxs("button",{onClick:b=>_(b,w.photos,0),className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800 transition-colors",children:[o.jsx(Vi,{size:14}),o.jsx("span",{className:"text-xs",children:w.photos.length}),o.jsx(en,{size:12})]}):o.jsx("span",{className:"text-xs text-gray-400",children:"None"})}),o.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:o.jsxs("div",{className:"flex space-x-2",onClick:b=>b.stopPropagation(),children:[o.jsx("button",{onClick:()=>r(w),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit violation",children:o.jsx(br,{size:14})}),o.jsx("button",{onClick:()=>s(w.id),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete violation",children:o.jsx(_r,{size:14})})]})})]},w.id))})]})}),e.length===0&&o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"text-gray-400 mb-4",children:o.jsx(Xs,{size:48,className:"mx-auto"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No violations found"}),o.jsx("p",{className:"text-gray-600",children:"No violations match your current filters."})]})]}),o.jsx(Il,{photos:a,isOpen:n,onClose:()=>i(!1),initialIndex:c})]})}function Ay(){const{user:e}=Ne(),[t,r]=E.useState([]),[s,n]=E.useState({}),[i,a]=E.useState(!0),[l,c]=E.useState(null);E.useEffect(()=>{e&&u()},[e]);const u=async()=>{if(e)try{a(!0),c(null),console.log("=== ADDRESS DATA LOADING ==="),console.log("User current association ID:",e.currentAssociation.id),console.log("User current association name:",e.currentAssociation.name),console.log("User ID:",e.id);const{data:f,error:x}=await O.from("association_streetnames").select("id, streetname").eq("association_id",e.currentAssociation.id).order("streetname");if(x)throw console.error("Error loading streets:",x),x;console.log("Raw streets from database:",(f==null?void 0:f.length)||0,f),console.log("Filtered streets:",(f||[]).length,f||[]),r(f||[]);const{data:y,error:_}=await O.from("association_unitinfo_with_types").select("id, association_streetname_id, unit_number, property_type_name").eq("is_active",!0).in("association_streetname_id",(f||[]).map(g=>g.id)).order("unit_number");if(_)throw console.error("Error loading units:",_),_;console.log("Raw units from database:",(y==null?void 0:y.length)||0);const S=(f||[]).map(g=>g.id),m=(y||[]).filter(g=>S.includes(g.association_streetname_id));console.log("Filtered units:",m.length);const p={};m.forEach(g=>{const j=g.association_streetname_id;p[j]||(p[j]=[]),p[j].push({id:g.id,unit_number:g.unit_number,property_type_name:g.property_type_name})}),console.log("Grouped units by street:",Object.keys(p).length,p),n(p),console.log("=== ADDRESS DATA LOADING COMPLETE ===")}catch(f){console.error("Error loading address data:",f),c(f.message||"Failed to load address data")}finally{a(!1)}};return{streetNames:t,unitsByStreet:s,loading:i,error:l,getUnitsForStreet:f=>s[f]||[],formatAddress:(f,x)=>`${x} ${f}`,refetch:u}}function Iy({value:e,onChange:t,required:r=!1}){const{streetNames:s,getUnitsForStreet:n,formatAddress:i,loading:a,error:l}=Ay(),[c,u]=E.useState(""),[d,h]=E.useState(""),{user:f}=Ne();ko.useEffect(()=>{var m,p;console.log("=== ADDRESS SELECTOR DEBUG ==="),console.log("Current user association:",(m=f==null?void 0:f.currentAssociation)==null?void 0:m.name,(p=f==null?void 0:f.currentAssociation)==null?void 0:p.id),console.log("Available street names:",s.length,s),console.log("Selected street ID:",c),console.log("Selected unit ID:",d),console.log("Current value:",e),console.log("=== END DEBUG ===")},[s]),ko.useEffect(()=>{if(e&&s.length>0)for(const m of s){const p=n(m.id);for(const g of p)if(i(m.streetname,g.unit_number)===e){u(m.id),h(g.id);return}}},[e,s]);const x=m=>{u(m),h(""),t("")},y=m=>{if(h(m),c&&m){const p=s.find(w=>w.id===c),j=n(c).find(w=>w.id===m);if(p&&j){const w=i(p.streetname,j.unit_number);t(w)}}},_=s.find(m=>m.id===c),S=c?n(c):[];return a?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Name *"}),o.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",children:o.jsx("span",{className:"text-gray-500",children:"Loading streets..."})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Number *"}),o.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50",children:o.jsx("span",{className:"text-gray-500",children:"Loading units..."})})]})]}):l?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-sm text-red-600 bg-red-50 border border-red-200 p-3 rounded-md",children:["Error loading address data: ",l]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Property Address *"}),o.jsxs("div",{className:"relative",children:[o.jsx(ur,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsx("input",{type:"text",value:e,onChange:m=>t(m.target.value),required:r,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"123 Main St"})]})]})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Name *"}),o.jsxs("div",{className:"relative",children:[o.jsx(ur,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsxs("select",{value:c,onChange:m=>x(m.target.value),required:r,className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none",children:[o.jsx("option",{value:"",children:"Select a street"}),s.map(m=>o.jsx("option",{value:m.id,children:m.streetname},m.id))]}),o.jsx(Jt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Number *"}),o.jsxs("div",{className:"relative",children:[o.jsx(gr,{size:18,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),o.jsxs("select",{value:d,onChange:m=>y(m.target.value),required:r,disabled:!c,className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent appearance-none disabled:bg-gray-50 disabled:cursor-not-allowed",children:[o.jsx("option",{value:"",children:c?"Select a unit":"Select a street first"}),S.map(m=>o.jsxs("option",{value:m.id,children:[m.unit_number," (",m.property_type_name,")"]},m.id))]}),o.jsx(Jt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400 pointer-events-none"})]}),c&&S.length===0&&o.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No units available for this street."})]}),_&&d&&o.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(ur,{size:16,className:"text-blue-600 mr-2"}),o.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["Selected Address: ",e]})]})})]})}function Ry({photos:e,onPhotosChange:t,maxPhotos:r=5}){const s=E.useRef(null),n=l=>{Array.from(l.target.files||[]).forEach(u=>{if(u.type.startsWith("image/")&&e.length<r){const d=new FileReader;d.onload=h=>{var x;const f=(x=h.target)==null?void 0:x.result;f&&e.length<r&&t([...e,f])},d.readAsDataURL(u)}}),s.current&&(s.current.value="")},i=l=>{const c=e.filter((u,d)=>d!==l);t(c)},a=()=>{var l;(l=s.current)==null||l.click()};return o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Photos (",e.length,"/",r,")"]}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[e.map((l,c)=>o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:l,alt:`Violation photo ${c+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-300"}),o.jsx("button",{type:"button",onClick:()=>i(c),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-opacity shadow-md hover:bg-red-600",children:o.jsx(Xt,{size:14})})]},c)),e.length<r&&o.jsxs("button",{type:"button",onClick:a,className:"w-full h-24 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center text-gray-500 hover:border-blue-400 hover:text-blue-500 transition-colors",children:[o.jsx(Vi,{size:20,className:"mb-1"}),o.jsx("span",{className:"text-xs",children:"Add Photo"})]})]}),o.jsx("input",{ref:s,type:"file",accept:"image/*",multiple:!0,onChange:n,className:"hidden"}),o.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Click to add photos. Maximum ",r," photos allowed."]})]})}const Oy=["Pending","In Progress","Resolved","Dismissed"],$y=["Low","Medium","High"];function Ly({onSubmit:e,onCancel:t,initialData:r,isEditing:s=!1,categories:n=[]}){const[i,a]=E.useState({address:(r==null?void 0:r.address)||"",description:(r==null?void 0:r.description)||"",categoryId:(r==null?void 0:r.categoryId)||"",status:(r==null?void 0:r.status)||"Pending",dateReported:(r==null?void 0:r.dateReported)||new Date().toISOString().split("T")[0],dateResolved:(r==null?void 0:r.dateResolved)||"",reportedBy:(r==null?void 0:r.reportedBy)||"",notes:(r==null?void 0:r.notes)||"",priority:(r==null?void 0:r.priority)||"Medium",photos:(r==null?void 0:r.photos)||[]}),l=h=>{if(h.preventDefault(),!i.categoryId){alert("Please select a violation category.");return}e({...i,dateResolved:i.dateResolved||void 0,notes:i.notes||void 0,photos:i.photos.length>0?i.photos:void 0})},c=h=>{a(f=>({...f,[h.target.name]:h.target.value}))},u=h=>{a(f=>({...f,address:h}))},d=h=>{a(f=>({...f,photos:h}))};return o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:s?"Edit Violation":"Add New Violation"}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Xt,{size:24})})]}),o.jsxs("form",{onSubmit:l,className:"p-6 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[o.jsx(Iy,{value:i.address,onChange:u,required:!0}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reported By *"}),o.jsx("input",{type:"text",name:"reportedBy",value:i.reportedBy,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"John Doe"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Violation Description *"}),o.jsx("textarea",{name:"description",value:i.description,onChange:c,required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe the violation..."})]}),o.jsx(Ry,{photos:i.photos,onPhotosChange:d,maxPhotos:5}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),o.jsxs("select",{name:"categoryId",value:i.categoryId,onChange:c,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[o.jsx("option",{value:"",children:"Select a category"}),n.map(h=>o.jsx("option",{value:h.id,children:h.name},h.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),o.jsx("select",{name:"status",value:i.status,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:Oy.map(h=>o.jsx("option",{value:h,children:h},h))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),o.jsx("select",{name:"priority",value:i.priority,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:$y.map(h=>o.jsx("option",{value:h,children:h},h))})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Reported"}),o.jsx("input",{type:"date",name:"dateReported",value:i.dateReported,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Resolved"}),o.jsx("input",{type:"date",name:"dateResolved",value:i.dateResolved,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),o.jsx("textarea",{name:"notes",value:i.notes,onChange:c,rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Any additional notes or comments..."})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),o.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(yr,{size:16}),o.jsxs("span",{children:[s?"Update":"Add"," Violation"]})]})]})]})]})})}const Uy={Pending:"bg-yellow-100 text-yellow-800","In Progress":"bg-blue-100 text-blue-800",Resolved:"bg-green-100 text-green-800",Dismissed:"bg-gray-100 text-gray-800"},zy={Low:"bg-green-100 text-green-800",Medium:"bg-yellow-100 text-yellow-800",High:"bg-red-100 text-red-800"},Dy={Landscaping:"bg-green-50 border-green-200",Parking:"bg-blue-50 border-blue-200",Noise:"bg-purple-50 border-purple-200",Architectural:"bg-orange-50 border-orange-200",Pet:"bg-pink-50 border-pink-200","Trash/Recycling":"bg-gray-50 border-gray-200","Pool/Spa":"bg-cyan-50 border-cyan-200",Other:"bg-slate-50 border-slate-200"};function My({violation:e,onEdit:t,onDelete:r,onClose:s}){const[n,i]=E.useState(!1),[a,l]=E.useState(0),c=h=>new Date(h).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),u=h=>{l(h),i(!0)},d=()=>{window.confirm("Are you sure you want to delete this violation?")&&r()};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(ur,{className:"h-6 w-6 text-blue-600"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Violation Details"})]}),o.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(Xt,{size:24})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:`rounded-lg border-l-4 ${Dy[e.category]} p-4`,children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:e.address}),o.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description})]}),o.jsxs("div",{className:"flex flex-wrap gap-3",children:[o.jsx("span",{className:`px-3 py-2 rounded-full text-sm font-medium ${Uy[e.status]}`,children:e.status}),o.jsxs("span",{className:`px-3 py-2 rounded-full text-sm font-medium ${zy[e.priority]}`,children:[o.jsx(Xs,{size:16,className:"inline mr-1"}),e.priority," Priority"]}),o.jsx("span",{className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium",children:e.category})]}),e.photos&&e.photos.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center mb-3",children:[o.jsx(Vi,{size:18,className:"text-gray-500 mr-2"}),o.jsxs("h4",{className:"font-medium text-gray-800",children:["Photos (",e.photos.length,")"]})]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:e.photos.map((h,f)=>o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:h,alt:`Violation photo ${f+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-300 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>u(f)}),o.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 rounded-lg transition-all flex items-center justify-center",children:o.jsx(en,{className:"text-white opacity-0 group-hover:opacity-100 transition-opacity",size:20})})]},f))})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Reporting Information"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Zs,{size:16,className:"mr-2 text-gray-400"}),o.jsx("span",{className:"text-gray-600",children:"Reported:"}),o.jsx("span",{className:"ml-2 font-medium",children:c(e.dateReported)})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx(ct,{size:16,className:"mr-2 text-gray-400"}),o.jsx("span",{className:"text-gray-600",children:"Reported by:"}),o.jsx("span",{className:"ml-2 font-medium",children:e.reportedBy})]}),e.dateResolved&&o.jsxs("div",{className:"flex items-center",children:[o.jsx(Zs,{size:16,className:"mr-2 text-gray-400"}),o.jsx("span",{className:"text-gray-600",children:"Resolved:"}),o.jsx("span",{className:"ml-2 font-medium",children:c(e.dateResolved)})]})]})]})}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Classification"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Category:"}),o.jsx("span",{className:"ml-2 font-medium",children:e.category})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Status:"}),o.jsx("span",{className:"ml-2 font-medium",children:e.status})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-600",children:"Priority:"}),o.jsx("span",{className:"ml-2 font-medium",children:e.priority})]})]})]})})]}),e.notes&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"Additional Notes"}),o.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:o.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:e.notes})})]})]}),o.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[o.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Close"}),o.jsxs("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[o.jsx(br,{size:16}),o.jsx("span",{children:"Edit"})]}),o.jsxs("button",{onClick:d,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors flex items-center space-x-2",children:[o.jsx(_r,{size:16}),o.jsx("span",{children:"Delete"})]})]})]})}),e.photos&&o.jsx(Il,{photos:e.photos,isOpen:n,onClose:()=>i(!1),initialIndex:a})]})}function Fy(){const{user:e}=Ne(),[t,r]=E.useState([]),[s,n]=E.useState(!0),[i,a]=E.useState(null);E.useEffect(()=>{e&&l()},[e]);const l=async()=>{if(e)try{n(!0);const{data:h,error:f}=await O.from("violations").select(`
          *,
          violation_categories (
            id,
            name,
            color
          ),
          associations (
            id,
            name
          )
        `).eq("association_id",e.currentAssociation.id).order("created_at",{ascending:!1});if(f){a(f.message);return}const x=h.map(y=>{var _,S;return{id:y.id,address:y.address,description:y.description,categoryId:y.category_id,category:((_=y.violation_categories)==null?void 0:_.name)||"Other",association:((S=y.associations)==null?void 0:S.name)||"Unknown Association",status:y.status,priority:y.priority,dateReported:y.date_reported,dateResolved:y.date_resolved||void 0,reportedBy:y.reported_by,notes:y.notes||void 0,photos:y.photos||void 0}});r(x)}catch{a("Failed to load violations")}finally{n(!1)}};return{violations:t,loading:s,error:i,addViolation:async h=>{if(e)try{const{data:f,error:x}=await O.from("violations").insert({association_id:e.currentAssociation.id,address:h.address,description:h.description,category_id:h.categoryId,status:h.status,priority:h.priority,date_reported:h.dateReported,date_resolved:h.dateResolved||null,reported_by:h.reportedBy,notes:h.notes||null,photos:h.photos||null,created_by:e.id}).select().single();if(x)throw x;const y={id:f.id,association:f.association,address:f.address,description:f.description,categoryId:f.category_id,category:"Other",status:f.status,priority:f.priority,dateReported:f.date_reported,dateResolved:f.date_resolved||void 0,reportedBy:f.reported_by,notes:f.notes||void 0,photos:f.photos||void 0};r(_=>[y,..._]),l()}catch{throw new Error("Failed to add violation")}},updateViolation:async(h,f)=>{if(e)try{const{error:x}=await O.from("violations").update({address:f.address,description:f.description,category_id:f.categoryId,status:f.status,priority:f.priority,date_reported:f.dateReported,date_resolved:f.dateResolved||null,reported_by:f.reportedBy,notes:f.notes||null,photos:f.photos||null,updated_at:new Date().toISOString()}).eq("id",h).eq("association_id",e.currentAssociation.id).select().single();if(x)throw x;l()}catch{throw new Error("Failed to update violation")}},deleteViolation:async h=>{if(e)try{const{error:f}=await O.from("violations").delete().eq("id",h).eq("association_id",e.currentAssociation.id);if(f)throw f;r(x=>x.filter(y=>y.id!==h))}catch{throw new Error("Failed to delete violation")}},refetch:l}}function By(){const{user:e}=Ne(),[t,r]=E.useState([]),[s,n]=E.useState(!0),[i,a]=E.useState(null);E.useEffect(()=>{e&&l()},[e]);const l=async()=>{if(e)try{n(!0),a(null);const{data:c,error:u}=await O.from("violation_categories").select("*").eq("is_active",!0).or(`association_id.eq.${e.currentAssociation.id},is_system_category.eq.true`).order("sort_order").order("name");if(u)throw u;r(c||[])}catch(c){console.error("Error loading violation categories:",c),a(c.message||"Failed to load violation categories")}finally{n(!1)}};return{categories:t,loading:s,error:i,refetch:l}}function Vy(e,t){return e.filter(r=>{const s=t.search===""||r.address.toLowerCase().includes(t.search.toLowerCase())||r.description.toLowerCase().includes(t.search.toLowerCase())||r.reportedBy.toLowerCase().includes(t.search.toLowerCase()),n=t.category==="All"||r.category===t.category,i=t.status==="All"||r.status===t.status,a=t.priority==="All"||r.priority===t.priority,l=!t.association||t.association==="All"||r.association===t.association;return s&&n&&i&&a&&l})}function qy(e){return[...e].sort((t,r)=>{const s={High:3,Medium:2,Low:1};return s[t.priority]!==s[r.priority]?s[r.priority]-s[t.priority]:new Date(r.dateReported).getTime()-new Date(t.dateReported).getTime()})}function Hy(){var _;const{user:e,signIn:t,signOut:r}=Ne(),[s,n]=E.useState(!1),[i,a]=E.useState([]),[l,c]=E.useState({email:"",password:""}),u=S=>{a(m=>[...m,S])},d=(S,m)=>{a(p=>p.map(g=>g.name===S?{...g,...m}:g))},h=async()=>{var g,j;n(!0),a([]);const S=performance.now();u({name:"Database Connection",status:"running",message:"Testing connection..."});try{const{error:w}=await O.auth.getSession();w?d("Database Connection",{status:"error",message:"Database connection failed",details:w.message,duration:performance.now()-S}):d("Database Connection",{status:"success",message:"Database connection successful",duration:performance.now()-S})}catch(w){d("Database Connection",{status:"error",message:"Database connection error",details:w.message,duration:performance.now()-S})}const m=performance.now();u({name:"Auth Service",status:"running",message:"Testing auth service..."});try{const{data:w,error:N}=await O.auth.getUser();d("Auth Service",{status:N?"warning":"success",message:N?"Auth service has issues":"Auth service healthy",details:(N==null?void 0:N.message)||(w.user?`Current user: ${w.user.email}`:"No current user"),duration:performance.now()-m})}catch(w){d("Auth Service",{status:"error",message:"Auth service error",details:w.message,duration:performance.now()-m})}const p=performance.now();u({name:"Associations Access",status:"running",message:"Testing associations table..."});try{const{data:w,error:N}=await O.from("associations").select("id, name").limit(5);d("Associations Access",{status:N?"error":"success",message:N?"Cannot access associations table":`Found ${(w==null?void 0:w.length)||0} associations`,details:(N==null?void 0:N.message)||(w?`First association: ${((g=w[0])==null?void 0:g.name)||"None"}`:"No data returned"),duration:performance.now()-p})}catch(w){d("Associations Access",{status:"error",message:"Associations table error",details:w.message,duration:performance.now()-p})}if(e){const w=performance.now();u({name:"User Profile Access",status:"running",message:"Testing user profile access..."});try{const{data:v,error:C}=await O.from("user_profiles").select("*").eq("user_id",e.id).single();d("User Profile Access",{status:C?"error":"success",message:C?"Cannot access user profile":"User profile accessible",details:(C==null?void 0:C.message)||`Profile: ${v==null?void 0:v.first_name} ${v==null?void 0:v.last_name}`,duration:performance.now()-w})}catch(v){d("User Profile Access",{status:"error",message:"User profile error",details:v.message,duration:performance.now()-w})}const N=performance.now();u({name:"User Memberships",status:"running",message:"Testing user memberships..."});try{const{data:v,error:C}=await O.from("user_association_memberships").select(`
            id,
            association_id,
            is_active,
            associations!inner (
              id,
              name
            )
          `).eq("user_id",e.id);d("User Memberships",{status:C?"error":"success",message:C?"Cannot access memberships":`User has ${(v==null?void 0:v.length)||0} memberships`,details:(C==null?void 0:C.message)||(v==null?void 0:v.map(I=>I.associations.name).join(", "))||"None",duration:performance.now()-N})}catch(v){d("User Memberships",{status:"error",message:"Memberships error",details:v.message,duration:performance.now()-N})}const b=performance.now();u({name:"User Roles",status:"running",message:"Testing user roles..."});try{const{data:v,error:C}=await O.from("user_role_assignments").select(`
            role_id,
            roles!inner (
              id,
              name,
              permissions,
              is_system_role
            )
          `).eq("user_id",e.id);d("User Roles",{status:C?"error":"success",message:C?"Cannot access roles":`User has ${(v==null?void 0:v.length)||0} roles`,details:(C==null?void 0:C.message)||(v==null?void 0:v.map(I=>I.roles.name).join(", "))||"None",duration:performance.now()-b})}catch(v){d("User Roles",{status:"error",message:"Roles error",details:v.message,duration:performance.now()-b})}const k=performance.now();u({name:"Violations Access",status:"running",message:"Testing violations access..."});try{const{data:v,error:C}=await O.from("violations").select("id, address, status").limit(5);d("Violations Access",{status:C?"error":"success",message:C?"Cannot access violations":`Found ${(v==null?void 0:v.length)||0} violations`,details:(C==null?void 0:C.message)||(v!=null&&v.length?`First violation: ${(j=v[0])==null?void 0:j.address}`:"No violations"),duration:performance.now()-k})}catch(v){d("Violations Access",{status:"error",message:"Violations error",details:v.message,duration:performance.now()-k})}}n(!1)},f=async()=>{if(!l.email||!l.password){u({name:"Sign In Test",status:"error",message:"Please provide email and password"});return}n(!0);const S=performance.now();u({name:"Sign In Test",status:"running",message:"Attempting sign in..."});try{const m=await t(l.email,l.password);d("Sign In Test",{status:m.error?"error":"success",message:m.error?"Sign in failed":"Sign in successful",details:m.error||"User authenticated successfully",duration:performance.now()-S})}catch(m){d("Sign In Test",{status:"error",message:"Sign in error",details:m.message,duration:performance.now()-S})}n(!1)},x=S=>{switch(S){case"running":return o.jsx(Al,{className:"h-5 w-5 text-blue-600 animate-spin"});case"success":return o.jsx(rs,{className:"h-5 w-5 text-green-600"});case"error":return o.jsx(Jh,{className:"h-5 w-5 text-red-600"});case"warning":return o.jsx(Ca,{className:"h-5 w-5 text-yellow-600"})}},y=S=>{switch(S){case"running":return"bg-blue-50 border-blue-200";case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200"}};return o.jsx("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[o.jsx(tn,{className:"h-8 w-8 text-blue-600"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Access Test Suite"})]}),e?o.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-blue-800",children:[o.jsx(ct,{className:"h-5 w-5"}),o.jsxs("span",{className:"font-medium",children:["Signed in as: ",e.email]})]}),o.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Current Association: ",((_=e.currentAssociation)==null?void 0:_.name)||"None"]})]}):o.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("h3",{className:"font-medium text-gray-800",children:"Sign In Test"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsx("input",{type:"email",placeholder:"Email",value:l.email,onChange:S=>c(m=>({...m,email:S.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("input",{type:"password",placeholder:"Password",value:l.password,onChange:S=>c(m=>({...m,password:S.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsx("button",{onClick:f,disabled:s,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:"Test Sign In"})]})}),o.jsxs("div",{className:"flex space-x-4 mb-6",children:[o.jsxs("button",{onClick:h,disabled:s,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:[o.jsx(Ea,{className:"h-4 w-4"}),o.jsx("span",{children:"Run Access Tests"})]}),e&&o.jsx("button",{onClick:r,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Sign Out"})]}),i.length>0&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Test Results"}),i.map((S,m)=>o.jsxs("div",{className:`border rounded-lg p-4 ${y(S.status)}`,children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[x(S.status),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-gray-800",children:S.name}),o.jsx("p",{className:"text-sm text-gray-600",children:S.message})]})]}),S.duration&&o.jsxs("span",{className:"text-xs text-gray-500",children:[S.duration.toFixed(0),"ms"]})]}),S.details&&o.jsxs("div",{className:"mt-2 text-sm text-gray-700 bg-white bg-opacity-50 rounded p-2",children:[o.jsx("strong",{children:"Details:"})," ",S.details]})]},m))]})]})})}const Wy={search:"",category:"All",status:"All",priority:"All",association:"All"};function Jy(){const{user:e,loading:t,profileLoadError:r,clearAuthState:s,hasPermission:n}=Ne(),{violations:i,loading:a,addViolation:l,updateViolation:c,deleteViolation:u}=Fy(),{categories:d}=By(),[h,f]=E.useState(Wy),[x,y]=E.useState(!1),[_,S]=E.useState(null),[m,p]=E.useState("signin"),[g,j]=E.useState(!1),[w,N]=E.useState(!1),[b,k]=E.useState(!1),[v,C]=E.useState(null),[I,z]=E.useState(!1),[L,T]=E.useState("table"),[R,D]=E.useState(null);E.useEffect(()=>{let H=!1;(async()=>{if(H)return;if(H=!0,new URLSearchParams(window.location.search).get("type")==="recovery"){N(!0),window.history.replaceState({},document.title,window.location.pathname);return}if(!t&&e&&!e.profile)try{const{data:{session:Zt}}=await O.auth.getSession();if(Zt!=null&&Zt.user){const{data:Gh}=await O.from("user_profiles").select("id").eq("user_id",Zt.user.id).single();Gh||(console.log("OAuth user without profile detected, showing setup form"),C(Zt.user),k(!0))}}catch(Zt){console.log("Error checking OAuth profile:",Zt)}})()},[]);const ce=async()=>{try{console.log("Clearing auth state from error screen..."),await s(),window.location.href=window.location.origin}catch(H){console.error("Error clearing auth state:",H),window.location.href=window.location.origin}};if(t)return o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"Checking authentication..."}),o.jsxs("div",{className:"mt-6",children:[o.jsx("p",{className:"text-sm text-gray-500",children:"This should only take a few seconds..."}),o.jsx("button",{onClick:ce,className:"mt-2 text-blue-600 hover:text-blue-800 underline text-sm",children:"Taking too long? Click here to restart"})]})]})});if(r)return o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center max-w-md mx-auto p-6",children:[o.jsx(Xs,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connection Error"}),o.jsx("p",{className:"text-gray-600 mb-6",children:r}),o.jsxs("div",{className:"space-y-3 text-center",children:[o.jsx("a",{href:"#",onClick:H=>{H.preventDefault(),window.location.reload()},className:"block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh Page"}),o.jsx("button",{onClick:H=>{H.preventDefault(),ce()},className:"block w-full text-orange-600 hover:text-orange-800 underline transition-colors",children:"Clear Data & Try Again"})]})]})});if(b&&v)return o.jsx(ly,{user:v,onComplete:()=>{k(!1),C(null)}});if(w)return o.jsx(ay,{onComplete:()=>{N(!1),p("signin")}});if(g)return o.jsx(oy,{onBack:()=>{j(!1),p("signin")}});if(I)return o.jsx("div",{className:"min-h-screen bg-gray-50",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx("div",{className:"mb-4",children:o.jsx("button",{onClick:()=>z(!1),className:"text-blue-600 hover:text-blue-800 underline",children:"← Back to App"})}),o.jsx(Hy,{})]})});if(!e)return o.jsx(iy,{mode:m,onModeChange:p,onForgotPassword:()=>j(!0),showDatabaseTestButton:!0,onShowAccessTest:()=>z(!0)});const A=qy(Vy(i,h)),U=Array.from(new Set(i.map(H=>H.association))).filter(Boolean),M=async H=>{try{await l(H),y(!1)}catch(we){console.error("Error adding violation:",we)}},J=async H=>{if(_)try{await c(_.id,H),S(null)}catch(we){console.error("Error updating violation:",we)}},Q=async H=>{if(window.confirm("Are you sure you want to delete this violation?"))try{await u(H)}catch(we){console.error("Error deleting violation:",we)}},Y=H=>{S(H)},Se=H=>{D(H)},Xe=()=>{y(!1),S(null),D(null)};return o.jsxs("div",{className:"min-h-screen bg-gray-50",children:[o.jsx(xy,{onAddViolation:()=>y(!0)}),o.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsx(vy,{violations:i}),o.jsx(jy,{filters:h,onFiltersChange:f,associations:U}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:["Violations (",A.length,")"]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"View:"}),o.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[o.jsx("button",{onClick:()=>T("table"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${L==="table"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Table"}),o.jsx("button",{onClick:()=>T("cards"),className:`px-3 py-1 rounded-md text-sm font-medium transition-colors ${L==="cards"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Cards"})]})]})]}),o.jsx("div",{className:"mb-6",children:a?o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"Loading violations..."})]}):A.length===0?o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-12 text-center",children:[o.jsx("div",{className:"text-gray-400 mb-4",children:o.jsx(gr,{size:48,className:"mx-auto"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No violations found"}),o.jsx("p",{className:"text-gray-600 mb-6",children:i.length===0?"Get started by adding your first violation report.":"Try adjusting your filters to see more results."}),i.length===0&&(n("create_violations")||n("manage_violations"))&&o.jsx("button",{onClick:()=>y(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center space-x-2",children:o.jsx("span",{children:"Add First Violation"})})]}):L==="table"?o.jsx(Py,{violations:A,onView:Se,onEdit:Y,onDelete:Q}):o.jsx("div",{className:"grid gap-6 grid-cols-1 lg:grid-cols-2",children:A.map(H=>o.jsx(Cy,{violation:H,onEdit:Y,onDelete:Q},H.id))})})]}),(x||_)&&o.jsx(Ly,{onSubmit:_?J:M,onCancel:Xe,initialData:_||void 0,isEditing:!!_,categories:d}),R&&o.jsx(My,{violation:R,onEdit:()=>{S(R),D(null)},onDelete:()=>{Q(R.id),D(null)},onClose:()=>D(null)})]})}function Gy(){return o.jsx(V0,{children:o.jsx(Jy,{})})}No.createRoot(document.getElementById("root")).render(o.jsx(ko.StrictMode,{children:o.jsx(Gy,{})}));
